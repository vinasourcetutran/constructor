<?xml version="1.0" encoding="utf-8" ?>
<?xml-stylesheet type='text/xsl' href="scriptsql.xsl"?>
<root xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<database includeDrop="true">Cossis</database>
<procedures>
		
		<procedure owner="dbo" name="Department_Get_List" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets all records from the Department table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters/>
			<body><![CDATA[

SELECT
    [DeptId],
    [Code],
    [Name],
    [Phone],
    [Priority],
    [Fax],
    [IsActive],
    [IsDeletable],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
FROM
    dbo.[Department]
					
Select @@ROWCOUNT
]]></body>
		</procedure>
		
		
		<procedure owner="dbo" name="Department_GetPaged" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets records from the Department table passing page index and page count parameters
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
				<parameter name="@WhereClause" type="varchar" direction="Input" size="2000" precision="0" scale="0" param="(2000)" />
				<parameter name="@OrderBy" type="varchar" direction="Input" size="2000" precision="0" scale="0" param="(2000)"/>
				<parameter name="@PageIndex" type="int" direction="Input" size="0" precision="10" scale="0" />
				<parameter name="@PageSize" type="int" direction="Input" size="0" precision="10" scale="0" /> 
			</parameters>
			<body><![CDATA[

BEGIN
DECLARE @PageLowerBound int
DECLARE @PageUpperBound int
				
-- Set the page bounds
SET @PageLowerBound = @PageSize * @PageIndex
SET @PageUpperBound = @PageLowerBound + @PageSize

IF (@OrderBy is null or LEN(@OrderBy) < 1)
BEGIN
    -- default order by to first column
    SET @OrderBy = '[DeptId]'
END

-- SQL Server 2005 Paging
declare @SQL as nvarchar(4000)
SET @SQL = 'WITH PageIndex AS ('
SET @SQL = @SQL + ' SELECT'
IF @PageSize > 0
BEGIN
    SET @SQL = @SQL + ' TOP ' + convert(nvarchar, @PageUpperBound)
END
SET @SQL = @SQL + ' ROW_NUMBER() OVER (ORDER BY ' + @OrderBy + ') as RowIndex'
SET @SQL = @SQL + ', [DeptId]'
SET @SQL = @SQL + ', [Code]'
SET @SQL = @SQL + ', [Name]'
SET @SQL = @SQL + ', [Phone]'
SET @SQL = @SQL + ', [Priority]'
SET @SQL = @SQL + ', [Fax]'
SET @SQL = @SQL + ', [IsActive]'
SET @SQL = @SQL + ', [IsDeletable]'
SET @SQL = @SQL + ', [CreationDate]'
SET @SQL = @SQL + ', [CreationUserId]'
SET @SQL = @SQL + ', [LastModificationDate]'
SET @SQL = @SQL + ', [LastModificationUserId]'
SET @SQL = @SQL + ' FROM dbo.[Department]'
IF LEN(@WhereClause) > 0
BEGIN
    SET @SQL = @SQL + ' WHERE ' + @WhereClause
END
SET @SQL = @SQL + ' ) SELECT'
SET @SQL = @SQL + ' [DeptId],'
SET @SQL = @SQL + ' [Code],'
SET @SQL = @SQL + ' [Name],'
SET @SQL = @SQL + ' [Phone],'
SET @SQL = @SQL + ' [Priority],'
SET @SQL = @SQL + ' [Fax],'
SET @SQL = @SQL + ' [IsActive],'
SET @SQL = @SQL + ' [IsDeletable],'
SET @SQL = @SQL + ' [CreationDate],'
SET @SQL = @SQL + ' [CreationUserId],'
SET @SQL = @SQL + ' [LastModificationDate],'
SET @SQL = @SQL + ' [LastModificationUserId]'
SET @SQL = @SQL + ' FROM PageIndex'
SET @SQL = @SQL + ' WHERE RowIndex > ' + convert(nvarchar, @PageLowerBound)
IF @PageSize > 0
BEGIN
    SET @SQL = @SQL + ' AND RowIndex <= ' + convert(nvarchar, @PageUpperBound)
END
exec sp_executesql @SQL
				
-- get row count
SET @SQL = 'SELECT COUNT(*) as TotalRowCount'
SET @SQL = @SQL + ' FROM dbo.[Department]'
IF LEN(@WhereClause) > 0
BEGIN
    SET @SQL = @SQL + ' WHERE ' + @WhereClause
END
exec sp_executesql @SQL
			
END
]]></body>
		</procedure>
		
		<procedure owner="dbo" name="Department_Insert" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Inserts a record into the Department table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@DeptId" type="int" direction="Output" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@Code" type="nvarchar" direction="Input" size="50" precision="0" scale="0" param="(50)" nulldefault=""/>
                <parameter name="@Name" type="nvarchar" direction="Input" size="200" precision="0" scale="0" param="(200)" nulldefault=""/>
                <parameter name="@Phone" type="varchar" direction="Input" size="100" precision="0" scale="0" param="(100)" nulldefault=""/>
                <parameter name="@Priority" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@Fax" type="varchar" direction="Input" size="100" precision="0" scale="0" param="(100)" nulldefault=""/>
                <parameter name="@IsActive" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
                <parameter name="@IsDeletable" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@LastModificationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
					
INSERT INTO dbo.[Department]
(
    [Code],
    [Name],
    [Phone],
    [Priority],
    [Fax],
    [IsActive],
    [IsDeletable],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
)
VALUES
(
    @Code,
    @Name,
    @Phone,
    @Priority,
    @Fax,
    @IsActive,
    @IsDeletable,
    @CreationDate,
    @CreationUserId,
    @LastModificationDate,
    @LastModificationUserId
)
				
-- Get the identity value
SET @DeptId = SCOPE_IDENTITY()
									
							
			]]></body>
		</procedure>
		<procedure owner="dbo" name="Department_Update" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Updates a record in the Department table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@DeptId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@Code" type="nvarchar" direction="Input" size="50" precision="0" scale="0" param="(50)" nulldefault=""/>
                <parameter name="@Name" type="nvarchar" direction="Input" size="200" precision="0" scale="0" param="(200)" nulldefault=""/>
                <parameter name="@Phone" type="varchar" direction="Input" size="100" precision="0" scale="0" param="(100)" nulldefault=""/>
                <parameter name="@Priority" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@Fax" type="varchar" direction="Input" size="100" precision="0" scale="0" param="(100)" nulldefault=""/>
                <parameter name="@IsActive" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
                <parameter name="@IsDeletable" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@LastModificationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[

				
-- Modify the updatable columns
UPDATE
    dbo.[Department]
SET
    [Code] = @Code,
    [Name] = @Name,
    [Phone] = @Phone,
    [Priority] = @Priority,
    [Fax] = @Fax,
    [IsActive] = @IsActive,
    [IsDeletable] = @IsDeletable,
    [CreationDate] = @CreationDate,
    [CreationUserId] = @CreationUserId,
    [LastModificationDate] = @LastModificationDate,
    [LastModificationUserId] = @LastModificationUserId
WHERE
    [DeptId] = @DeptId 

				
			]]></body>
		</procedure>
		<procedure owner="dbo" name="Department_Delete" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Deletes a record in the Department table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@DeptId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
DELETE FROM dbo.[Department] WITH (ROWLOCK) 
WHERE
    [DeptId] = @DeptId
					
			]]></body>
		</procedure>
		<procedure owner="dbo" name="Department_GetByDeptId" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Select records from the Department table through an index
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@DeptId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
SELECT
    [DeptId],
    [Code],
    [Name],
    [Phone],
    [Priority],
    [Fax],
    [IsActive],
    [IsDeletable],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
FROM
    dbo.[Department]
WHERE
    [DeptId] = @DeptId
Select @@ROWCOUNT
					
]]></body>
			
		</procedure>
		<procedure owner="dbo" name="Department_Find" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Finds records in the Department table passing nullable parameters
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
				<parameter name="@SearchUsingOR" type="bit" direction="Input" size="0" precision="1" scale="0" param="" nulldefault="null"/>
                <parameter name="@DeptId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@Code" type="nvarchar" direction="Input" size="50" precision="0" scale="0" param="(50)" nulldefault="null"/>
                <parameter name="@Name" type="nvarchar" direction="Input" size="200" precision="0" scale="0" param="(200)" nulldefault="null"/>
                <parameter name="@Phone" type="varchar" direction="Input" size="100" precision="0" scale="0" param="(100)" nulldefault="null"/>
                <parameter name="@Priority" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@Fax" type="varchar" direction="Input" size="100" precision="0" scale="0" param="(100)" nulldefault="null"/>
                <parameter name="@IsActive" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault="null"/>
                <parameter name="@IsDeletable" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault="null"/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault="null"/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@LastModificationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault="null"/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
			</parameters>
			<body><![CDATA[

IF ISNULL(@SearchUsingOR, 0) <> 1
BEGIN
    SELECT
        [DeptId], 
        [Code], 
        [Name], 
        [Phone], 
        [Priority], 
        [Fax], 
        [IsActive], 
        [IsDeletable], 
        [CreationDate], 
        [CreationUserId], 
        [LastModificationDate], 
        [LastModificationUserId]
    FROM
        dbo.[Department]
    WHERE 
     ([DeptId] = @DeptId OR @DeptId is null)
    AND ([Code] = @Code OR @Code is null)
    AND ([Name] = @Name OR @Name is null)
    AND ([Phone] = @Phone OR @Phone is null)
    AND ([Priority] = @Priority OR @Priority is null)
    AND ([Fax] = @Fax OR @Fax is null)
    AND ([IsActive] = @IsActive OR @IsActive is null)
    AND ([IsDeletable] = @IsDeletable OR @IsDeletable is null)
    AND ([CreationDate] = @CreationDate OR @CreationDate is null)
    AND ([CreationUserId] = @CreationUserId OR @CreationUserId is null)
    AND ([LastModificationDate] = @LastModificationDate OR @LastModificationDate is null)
    AND ([LastModificationUserId] = @LastModificationUserId OR @LastModificationUserId is null)
END
ELSE
    BEGIN
        SELECT
            [DeptId], 
            [Code], 
            [Name], 
            [Phone], 
            [Priority], 
            [Fax], 
            [IsActive], 
            [IsDeletable], 
            [CreationDate], 
            [CreationUserId], 
            [LastModificationDate], 
            [LastModificationUserId]
        FROM
            dbo.[Department]
        WHERE
     ([DeptId] = @DeptId AND @DeptId is not null)
    OR ([Code] = @Code AND @Code is not null)
    OR ([Name] = @Name AND @Name is not null)
    OR ([Phone] = @Phone AND @Phone is not null)
    OR ([Priority] = @Priority AND @Priority is not null)
    OR ([Fax] = @Fax AND @Fax is not null)
    OR ([IsActive] = @IsActive AND @IsActive is not null)
    OR ([IsDeletable] = @IsDeletable AND @IsDeletable is not null)
    OR ([CreationDate] = @CreationDate AND @CreationDate is not null)
    OR ([CreationUserId] = @CreationUserId AND @CreationUserId is not null)
    OR ([LastModificationDate] = @LastModificationDate AND @LastModificationDate is not null)
    OR ([LastModificationUserId] = @LastModificationUserId AND @LastModificationUserId is not null)
        Select @@ROWCOUNT			
    END
	]]></body>
		</procedure>

		
		<procedure owner="dbo" name="Department_Find_Dynamic" grant="" skip="true">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets records from the Department table using a dynamically generated query.
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters/>
			<body><![CDATA[

BEGIN
				
with PageIndex as (
	select top {3} row_number() over (order by {1}) as RowIndex
	, [DeptId]
	, [Code]
	, [Name]
	, [Phone]
	, [Priority]
	, [Fax]
	, [IsActive]
	, [IsDeletable]
	, [CreationDate]
	, [CreationUserId]
	, [LastModificationDate]
	, [LastModificationUserId]
	from dbo.[Department] {0}
	)
select
    [DeptId],
    [Code],
    [Name],
    [Phone],
    [Priority],
    [Fax],
    [IsActive],
    [IsDeletable],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
from PageIndex
where RowIndex > {2}
and RowIndex <= {3};
				

				-- get total count
				select count(*) as TotalRowCount from dbo.[Department] {0};
			
				END
			]]></body>
		</procedure>
		
		
		<procedure owner="dbo" name="Group_Get_List" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets all records from the Group table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters/>
			<body><![CDATA[

SELECT
    [GroupId],
    [ParentGroupId],
    [Code],
    [Name],
    [Description],
    [Type],
    [IsActive],
    [IsDeletable],
    [Priority],
    [CreationUserId],
    [CreationDate],
    [LastModificationDate],
    [LastModificationUserId]
FROM
    dbo.[Group]
					
Select @@ROWCOUNT
]]></body>
		</procedure>
		
		
		<procedure owner="dbo" name="Group_GetPaged" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets records from the Group table passing page index and page count parameters
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
				<parameter name="@WhereClause" type="varchar" direction="Input" size="2000" precision="0" scale="0" param="(2000)" />
				<parameter name="@OrderBy" type="varchar" direction="Input" size="2000" precision="0" scale="0" param="(2000)"/>
				<parameter name="@PageIndex" type="int" direction="Input" size="0" precision="10" scale="0" />
				<parameter name="@PageSize" type="int" direction="Input" size="0" precision="10" scale="0" /> 
			</parameters>
			<body><![CDATA[

BEGIN
DECLARE @PageLowerBound int
DECLARE @PageUpperBound int
				
-- Set the page bounds
SET @PageLowerBound = @PageSize * @PageIndex
SET @PageUpperBound = @PageLowerBound + @PageSize

IF (@OrderBy is null or LEN(@OrderBy) < 1)
BEGIN
    -- default order by to first column
    SET @OrderBy = '[GroupId]'
END

-- SQL Server 2005 Paging
declare @SQL as nvarchar(4000)
SET @SQL = 'WITH PageIndex AS ('
SET @SQL = @SQL + ' SELECT'
IF @PageSize > 0
BEGIN
    SET @SQL = @SQL + ' TOP ' + convert(nvarchar, @PageUpperBound)
END
SET @SQL = @SQL + ' ROW_NUMBER() OVER (ORDER BY ' + @OrderBy + ') as RowIndex'
SET @SQL = @SQL + ', [GroupId]'
SET @SQL = @SQL + ', [ParentGroupId]'
SET @SQL = @SQL + ', [Code]'
SET @SQL = @SQL + ', [Name]'
SET @SQL = @SQL + ', [Description]'
SET @SQL = @SQL + ', [Type]'
SET @SQL = @SQL + ', [IsActive]'
SET @SQL = @SQL + ', [IsDeletable]'
SET @SQL = @SQL + ', [Priority]'
SET @SQL = @SQL + ', [CreationUserId]'
SET @SQL = @SQL + ', [CreationDate]'
SET @SQL = @SQL + ', [LastModificationDate]'
SET @SQL = @SQL + ', [LastModificationUserId]'
SET @SQL = @SQL + ' FROM dbo.[Group]'
IF LEN(@WhereClause) > 0
BEGIN
    SET @SQL = @SQL + ' WHERE ' + @WhereClause
END
SET @SQL = @SQL + ' ) SELECT'
SET @SQL = @SQL + ' [GroupId],'
SET @SQL = @SQL + ' [ParentGroupId],'
SET @SQL = @SQL + ' [Code],'
SET @SQL = @SQL + ' [Name],'
SET @SQL = @SQL + ' [Description],'
SET @SQL = @SQL + ' [Type],'
SET @SQL = @SQL + ' [IsActive],'
SET @SQL = @SQL + ' [IsDeletable],'
SET @SQL = @SQL + ' [Priority],'
SET @SQL = @SQL + ' [CreationUserId],'
SET @SQL = @SQL + ' [CreationDate],'
SET @SQL = @SQL + ' [LastModificationDate],'
SET @SQL = @SQL + ' [LastModificationUserId]'
SET @SQL = @SQL + ' FROM PageIndex'
SET @SQL = @SQL + ' WHERE RowIndex > ' + convert(nvarchar, @PageLowerBound)
IF @PageSize > 0
BEGIN
    SET @SQL = @SQL + ' AND RowIndex <= ' + convert(nvarchar, @PageUpperBound)
END
exec sp_executesql @SQL
				
-- get row count
SET @SQL = 'SELECT COUNT(*) as TotalRowCount'
SET @SQL = @SQL + ' FROM dbo.[Group]'
IF LEN(@WhereClause) > 0
BEGIN
    SET @SQL = @SQL + ' WHERE ' + @WhereClause
END
exec sp_executesql @SQL
			
END
]]></body>
		</procedure>
		
		<procedure owner="dbo" name="Group_Insert" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Inserts a record into the Group table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@GroupId" type="int" direction="Output" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@ParentGroupId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@Code" type="nvarchar" direction="Input" size="50" precision="0" scale="0" param="(50)" nulldefault=""/>
                <parameter name="@Name" type="nvarchar" direction="Input" size="200" precision="0" scale="0" param="(200)" nulldefault=""/>
                <parameter name="@Description" type="nvarchar" direction="Input" size="1000" precision="0" scale="0" param="(1000)" nulldefault=""/>
                <parameter name="@Type" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@IsActive" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@IsDeletable" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@Priority" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@LastModificationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
					
INSERT INTO dbo.[Group]
(
    [ParentGroupId],
    [Code],
    [Name],
    [Description],
    [Type],
    [IsActive],
    [IsDeletable],
    [Priority],
    [CreationUserId],
    [CreationDate],
    [LastModificationDate],
    [LastModificationUserId]
)
VALUES
(
    @ParentGroupId,
    @Code,
    @Name,
    @Description,
    @Type,
    @IsActive,
    @IsDeletable,
    @Priority,
    @CreationUserId,
    @CreationDate,
    @LastModificationDate,
    @LastModificationUserId
)
				
-- Get the identity value
SET @GroupId = SCOPE_IDENTITY()
									
							
			]]></body>
		</procedure>
		<procedure owner="dbo" name="Group_Update" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Updates a record in the Group table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@GroupId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@ParentGroupId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@Code" type="nvarchar" direction="Input" size="50" precision="0" scale="0" param="(50)" nulldefault=""/>
                <parameter name="@Name" type="nvarchar" direction="Input" size="200" precision="0" scale="0" param="(200)" nulldefault=""/>
                <parameter name="@Description" type="nvarchar" direction="Input" size="1000" precision="0" scale="0" param="(1000)" nulldefault=""/>
                <parameter name="@Type" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@IsActive" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@IsDeletable" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@Priority" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@LastModificationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[

				
-- Modify the updatable columns
UPDATE
    dbo.[Group]
SET
    [ParentGroupId] = @ParentGroupId,
    [Code] = @Code,
    [Name] = @Name,
    [Description] = @Description,
    [Type] = @Type,
    [IsActive] = @IsActive,
    [IsDeletable] = @IsDeletable,
    [Priority] = @Priority,
    [CreationUserId] = @CreationUserId,
    [CreationDate] = @CreationDate,
    [LastModificationDate] = @LastModificationDate,
    [LastModificationUserId] = @LastModificationUserId
WHERE
    [GroupId] = @GroupId 

				
			]]></body>
		</procedure>
		<procedure owner="dbo" name="Group_Delete" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Deletes a record in the Group table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@GroupId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
DELETE FROM dbo.[Group] WITH (ROWLOCK) 
WHERE
    [GroupId] = @GroupId
					
			]]></body>
		</procedure>
		<procedure owner="dbo" name="Group_GetByGroupId" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Select records from the Group table through an index
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@GroupId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
SELECT
    [GroupId],
    [ParentGroupId],
    [Code],
    [Name],
    [Description],
    [Type],
    [IsActive],
    [IsDeletable],
    [Priority],
    [CreationUserId],
    [CreationDate],
    [LastModificationDate],
    [LastModificationUserId]
FROM
    dbo.[Group]
WHERE
    [GroupId] = @GroupId
Select @@ROWCOUNT
					
]]></body>
			
		</procedure>
		<procedure owner="dbo" name="Group_Find" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Finds records in the Group table passing nullable parameters
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
				<parameter name="@SearchUsingOR" type="bit" direction="Input" size="0" precision="1" scale="0" param="" nulldefault="null"/>
                <parameter name="@GroupId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@ParentGroupId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@Code" type="nvarchar" direction="Input" size="50" precision="0" scale="0" param="(50)" nulldefault="null"/>
                <parameter name="@Name" type="nvarchar" direction="Input" size="200" precision="0" scale="0" param="(200)" nulldefault="null"/>
                <parameter name="@Description" type="nvarchar" direction="Input" size="1000" precision="0" scale="0" param="(1000)" nulldefault="null"/>
                <parameter name="@Type" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@IsActive" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault="null"/>
                <parameter name="@IsDeletable" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault="null"/>
                <parameter name="@Priority" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault="null"/>
                <parameter name="@LastModificationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault="null"/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
			</parameters>
			<body><![CDATA[

IF ISNULL(@SearchUsingOR, 0) <> 1
BEGIN
    SELECT
        [GroupId], 
        [ParentGroupId], 
        [Code], 
        [Name], 
        [Description], 
        [Type], 
        [IsActive], 
        [IsDeletable], 
        [Priority], 
        [CreationUserId], 
        [CreationDate], 
        [LastModificationDate], 
        [LastModificationUserId]
    FROM
        dbo.[Group]
    WHERE 
     ([GroupId] = @GroupId OR @GroupId is null)
    AND ([ParentGroupId] = @ParentGroupId OR @ParentGroupId is null)
    AND ([Code] = @Code OR @Code is null)
    AND ([Name] = @Name OR @Name is null)
    AND ([Description] = @Description OR @Description is null)
    AND ([Type] = @Type OR @Type is null)
    AND ([IsActive] = @IsActive OR @IsActive is null)
    AND ([IsDeletable] = @IsDeletable OR @IsDeletable is null)
    AND ([Priority] = @Priority OR @Priority is null)
    AND ([CreationUserId] = @CreationUserId OR @CreationUserId is null)
    AND ([CreationDate] = @CreationDate OR @CreationDate is null)
    AND ([LastModificationDate] = @LastModificationDate OR @LastModificationDate is null)
    AND ([LastModificationUserId] = @LastModificationUserId OR @LastModificationUserId is null)
END
ELSE
    BEGIN
        SELECT
            [GroupId], 
            [ParentGroupId], 
            [Code], 
            [Name], 
            [Description], 
            [Type], 
            [IsActive], 
            [IsDeletable], 
            [Priority], 
            [CreationUserId], 
            [CreationDate], 
            [LastModificationDate], 
            [LastModificationUserId]
        FROM
            dbo.[Group]
        WHERE
     ([GroupId] = @GroupId AND @GroupId is not null)
    OR ([ParentGroupId] = @ParentGroupId AND @ParentGroupId is not null)
    OR ([Code] = @Code AND @Code is not null)
    OR ([Name] = @Name AND @Name is not null)
    OR ([Description] = @Description AND @Description is not null)
    OR ([Type] = @Type AND @Type is not null)
    OR ([IsActive] = @IsActive AND @IsActive is not null)
    OR ([IsDeletable] = @IsDeletable AND @IsDeletable is not null)
    OR ([Priority] = @Priority AND @Priority is not null)
    OR ([CreationUserId] = @CreationUserId AND @CreationUserId is not null)
    OR ([CreationDate] = @CreationDate AND @CreationDate is not null)
    OR ([LastModificationDate] = @LastModificationDate AND @LastModificationDate is not null)
    OR ([LastModificationUserId] = @LastModificationUserId AND @LastModificationUserId is not null)
        Select @@ROWCOUNT			
    END
	]]></body>
		</procedure>

		
		<procedure owner="dbo" name="Group_Find_Dynamic" grant="" skip="true">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets records from the Group table using a dynamically generated query.
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters/>
			<body><![CDATA[

BEGIN
				
with PageIndex as (
	select top {3} row_number() over (order by {1}) as RowIndex
	, [GroupId]
	, [ParentGroupId]
	, [Code]
	, [Name]
	, [Description]
	, [Type]
	, [IsActive]
	, [IsDeletable]
	, [Priority]
	, [CreationUserId]
	, [CreationDate]
	, [LastModificationDate]
	, [LastModificationUserId]
	from dbo.[Group] {0}
	)
select
    [GroupId],
    [ParentGroupId],
    [Code],
    [Name],
    [Description],
    [Type],
    [IsActive],
    [IsDeletable],
    [Priority],
    [CreationUserId],
    [CreationDate],
    [LastModificationDate],
    [LastModificationUserId]
from PageIndex
where RowIndex > {2}
and RowIndex <= {3};
				

				-- get total count
				select count(*) as TotalRowCount from dbo.[Group] {0};
			
				END
			]]></body>
		</procedure>
		
		
		<procedure owner="dbo" name="Repository_Get_List" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets all records from the Repository table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters/>
			<body><![CDATA[

SELECT
    [RepositoryId],
    [RepositoryManagerStaffId],
    [Code],
    [Name],
    [Address],
    [ProvinceId],
    [IsActive],
    [Priority],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
FROM
    dbo.[Repository]
					
Select @@ROWCOUNT
]]></body>
		</procedure>
		
		
		<procedure owner="dbo" name="Repository_GetPaged" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets records from the Repository table passing page index and page count parameters
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
				<parameter name="@WhereClause" type="varchar" direction="Input" size="2000" precision="0" scale="0" param="(2000)" />
				<parameter name="@OrderBy" type="varchar" direction="Input" size="2000" precision="0" scale="0" param="(2000)"/>
				<parameter name="@PageIndex" type="int" direction="Input" size="0" precision="10" scale="0" />
				<parameter name="@PageSize" type="int" direction="Input" size="0" precision="10" scale="0" /> 
			</parameters>
			<body><![CDATA[

BEGIN
DECLARE @PageLowerBound int
DECLARE @PageUpperBound int
				
-- Set the page bounds
SET @PageLowerBound = @PageSize * @PageIndex
SET @PageUpperBound = @PageLowerBound + @PageSize

IF (@OrderBy is null or LEN(@OrderBy) < 1)
BEGIN
    -- default order by to first column
    SET @OrderBy = '[RepositoryId]'
END

-- SQL Server 2005 Paging
declare @SQL as nvarchar(4000)
SET @SQL = 'WITH PageIndex AS ('
SET @SQL = @SQL + ' SELECT'
IF @PageSize > 0
BEGIN
    SET @SQL = @SQL + ' TOP ' + convert(nvarchar, @PageUpperBound)
END
SET @SQL = @SQL + ' ROW_NUMBER() OVER (ORDER BY ' + @OrderBy + ') as RowIndex'
SET @SQL = @SQL + ', [RepositoryId]'
SET @SQL = @SQL + ', [RepositoryManagerStaffId]'
SET @SQL = @SQL + ', [Code]'
SET @SQL = @SQL + ', [Name]'
SET @SQL = @SQL + ', [Address]'
SET @SQL = @SQL + ', [ProvinceId]'
SET @SQL = @SQL + ', [IsActive]'
SET @SQL = @SQL + ', [Priority]'
SET @SQL = @SQL + ', [CreationDate]'
SET @SQL = @SQL + ', [CreationUserId]'
SET @SQL = @SQL + ', [LastModificationDate]'
SET @SQL = @SQL + ', [LastModificationUserId]'
SET @SQL = @SQL + ' FROM dbo.[Repository]'
IF LEN(@WhereClause) > 0
BEGIN
    SET @SQL = @SQL + ' WHERE ' + @WhereClause
END
SET @SQL = @SQL + ' ) SELECT'
SET @SQL = @SQL + ' [RepositoryId],'
SET @SQL = @SQL + ' [RepositoryManagerStaffId],'
SET @SQL = @SQL + ' [Code],'
SET @SQL = @SQL + ' [Name],'
SET @SQL = @SQL + ' [Address],'
SET @SQL = @SQL + ' [ProvinceId],'
SET @SQL = @SQL + ' [IsActive],'
SET @SQL = @SQL + ' [Priority],'
SET @SQL = @SQL + ' [CreationDate],'
SET @SQL = @SQL + ' [CreationUserId],'
SET @SQL = @SQL + ' [LastModificationDate],'
SET @SQL = @SQL + ' [LastModificationUserId]'
SET @SQL = @SQL + ' FROM PageIndex'
SET @SQL = @SQL + ' WHERE RowIndex > ' + convert(nvarchar, @PageLowerBound)
IF @PageSize > 0
BEGIN
    SET @SQL = @SQL + ' AND RowIndex <= ' + convert(nvarchar, @PageUpperBound)
END
exec sp_executesql @SQL
				
-- get row count
SET @SQL = 'SELECT COUNT(*) as TotalRowCount'
SET @SQL = @SQL + ' FROM dbo.[Repository]'
IF LEN(@WhereClause) > 0
BEGIN
    SET @SQL = @SQL + ' WHERE ' + @WhereClause
END
exec sp_executesql @SQL
			
END
]]></body>
		</procedure>
		
		<procedure owner="dbo" name="Repository_Insert" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Inserts a record into the Repository table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@RepositoryId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@RepositoryManagerStaffId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@Code" type="nvarchar" direction="Input" size="50" precision="0" scale="0" param="(50)" nulldefault=""/>
                <parameter name="@Name" type="nvarchar" direction="Input" size="300" precision="0" scale="0" param="(300)" nulldefault=""/>
                <parameter name="@Address" type="nvarchar" direction="Input" size="500" precision="0" scale="0" param="(500)" nulldefault=""/>
                <parameter name="@ProvinceId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@IsActive" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@Priority" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@LastModificationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
					
INSERT INTO dbo.[Repository]
(
    [RepositoryId],
    [RepositoryManagerStaffId],
    [Code],
    [Name],
    [Address],
    [ProvinceId],
    [IsActive],
    [Priority],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
)
VALUES
(
    @RepositoryId,
    @RepositoryManagerStaffId,
    @Code,
    @Name,
    @Address,
    @ProvinceId,
    @IsActive,
    @Priority,
    @CreationDate,
    @CreationUserId,
    @LastModificationDate,
    @LastModificationUserId
)
				
									
							
			]]></body>
		</procedure>
		<procedure owner="dbo" name="Repository_Update" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Updates a record in the Repository table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@RepositoryId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@OriginalRepositoryId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@RepositoryManagerStaffId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@Code" type="nvarchar" direction="Input" size="50" precision="0" scale="0" param="(50)" nulldefault=""/>
                <parameter name="@Name" type="nvarchar" direction="Input" size="300" precision="0" scale="0" param="(300)" nulldefault=""/>
                <parameter name="@Address" type="nvarchar" direction="Input" size="500" precision="0" scale="0" param="(500)" nulldefault=""/>
                <parameter name="@ProvinceId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@IsActive" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@Priority" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@LastModificationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[

				
-- Modify the updatable columns
UPDATE
    dbo.[Repository]
SET
    [RepositoryId] = @RepositoryId,
    [RepositoryManagerStaffId] = @RepositoryManagerStaffId,
    [Code] = @Code,
    [Name] = @Name,
    [Address] = @Address,
    [ProvinceId] = @ProvinceId,
    [IsActive] = @IsActive,
    [Priority] = @Priority,
    [CreationDate] = @CreationDate,
    [CreationUserId] = @CreationUserId,
    [LastModificationDate] = @LastModificationDate,
    [LastModificationUserId] = @LastModificationUserId
WHERE
    [RepositoryId] = @OriginalRepositoryId 

				
			]]></body>
		</procedure>
		<procedure owner="dbo" name="Repository_Delete" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Deletes a record in the Repository table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@RepositoryId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
DELETE FROM dbo.[Repository] WITH (ROWLOCK) 
WHERE
    [RepositoryId] = @RepositoryId
					
			]]></body>
		</procedure>
		<procedure owner="dbo" name="Repository_GetByRepositoryId" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Select records from the Repository table through an index
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@RepositoryId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
SELECT
    [RepositoryId],
    [RepositoryManagerStaffId],
    [Code],
    [Name],
    [Address],
    [ProvinceId],
    [IsActive],
    [Priority],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
FROM
    dbo.[Repository]
WHERE
    [RepositoryId] = @RepositoryId
Select @@ROWCOUNT
					
]]></body>
			
		</procedure>
		<procedure owner="dbo" name="Repository_GetByItemIdFromItemInRepository" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets records through a junction table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@ItemId" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
SELECT dbo.[Repository].[RepositoryId]
       ,dbo.[Repository].[RepositoryManagerStaffId]
       ,dbo.[Repository].[Code]
       ,dbo.[Repository].[Name]
       ,dbo.[Repository].[Address]
       ,dbo.[Repository].[ProvinceId]
       ,dbo.[Repository].[IsActive]
       ,dbo.[Repository].[Priority]
       ,dbo.[Repository].[CreationDate]
       ,dbo.[Repository].[CreationUserId]
       ,dbo.[Repository].[LastModificationDate]
       ,dbo.[Repository].[LastModificationUserId]
  FROM dbo.[Repository]
 WHERE EXISTS (SELECT 1
                 FROM dbo.[ItemInRepository] 
                WHERE dbo.[ItemInRepository].[ItemId] = @ItemId
                  AND dbo.[ItemInRepository].[RepositoryId] = dbo.[Repository].[RepositoryId]
                  )
				Select @@ROWCOUNT			
				]]></body>
		</procedure>
		<procedure owner="dbo" name="Repository_Find" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Finds records in the Repository table passing nullable parameters
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
				<parameter name="@SearchUsingOR" type="bit" direction="Input" size="0" precision="1" scale="0" param="" nulldefault="null"/>
                <parameter name="@RepositoryId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@RepositoryManagerStaffId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@Code" type="nvarchar" direction="Input" size="50" precision="0" scale="0" param="(50)" nulldefault="null"/>
                <parameter name="@Name" type="nvarchar" direction="Input" size="300" precision="0" scale="0" param="(300)" nulldefault="null"/>
                <parameter name="@Address" type="nvarchar" direction="Input" size="500" precision="0" scale="0" param="(500)" nulldefault="null"/>
                <parameter name="@ProvinceId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@IsActive" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault="null"/>
                <parameter name="@Priority" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault="null"/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@LastModificationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault="null"/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
			</parameters>
			<body><![CDATA[

IF ISNULL(@SearchUsingOR, 0) <> 1
BEGIN
    SELECT
        [RepositoryId], 
        [RepositoryManagerStaffId], 
        [Code], 
        [Name], 
        [Address], 
        [ProvinceId], 
        [IsActive], 
        [Priority], 
        [CreationDate], 
        [CreationUserId], 
        [LastModificationDate], 
        [LastModificationUserId]
    FROM
        dbo.[Repository]
    WHERE 
     ([RepositoryId] = @RepositoryId OR @RepositoryId is null)
    AND ([RepositoryManagerStaffId] = @RepositoryManagerStaffId OR @RepositoryManagerStaffId is null)
    AND ([Code] = @Code OR @Code is null)
    AND ([Name] = @Name OR @Name is null)
    AND ([Address] = @Address OR @Address is null)
    AND ([ProvinceId] = @ProvinceId OR @ProvinceId is null)
    AND ([IsActive] = @IsActive OR @IsActive is null)
    AND ([Priority] = @Priority OR @Priority is null)
    AND ([CreationDate] = @CreationDate OR @CreationDate is null)
    AND ([CreationUserId] = @CreationUserId OR @CreationUserId is null)
    AND ([LastModificationDate] = @LastModificationDate OR @LastModificationDate is null)
    AND ([LastModificationUserId] = @LastModificationUserId OR @LastModificationUserId is null)
END
ELSE
    BEGIN
        SELECT
            [RepositoryId], 
            [RepositoryManagerStaffId], 
            [Code], 
            [Name], 
            [Address], 
            [ProvinceId], 
            [IsActive], 
            [Priority], 
            [CreationDate], 
            [CreationUserId], 
            [LastModificationDate], 
            [LastModificationUserId]
        FROM
            dbo.[Repository]
        WHERE
     ([RepositoryId] = @RepositoryId AND @RepositoryId is not null)
    OR ([RepositoryManagerStaffId] = @RepositoryManagerStaffId AND @RepositoryManagerStaffId is not null)
    OR ([Code] = @Code AND @Code is not null)
    OR ([Name] = @Name AND @Name is not null)
    OR ([Address] = @Address AND @Address is not null)
    OR ([ProvinceId] = @ProvinceId AND @ProvinceId is not null)
    OR ([IsActive] = @IsActive AND @IsActive is not null)
    OR ([Priority] = @Priority AND @Priority is not null)
    OR ([CreationDate] = @CreationDate AND @CreationDate is not null)
    OR ([CreationUserId] = @CreationUserId AND @CreationUserId is not null)
    OR ([LastModificationDate] = @LastModificationDate AND @LastModificationDate is not null)
    OR ([LastModificationUserId] = @LastModificationUserId AND @LastModificationUserId is not null)
        Select @@ROWCOUNT			
    END
	]]></body>
		</procedure>

		
		<procedure owner="dbo" name="Repository_Find_Dynamic" grant="" skip="true">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets records from the Repository table using a dynamically generated query.
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters/>
			<body><![CDATA[

BEGIN
				
with PageIndex as (
	select top {3} row_number() over (order by {1}) as RowIndex
	, [RepositoryId]
	, [RepositoryManagerStaffId]
	, [Code]
	, [Name]
	, [Address]
	, [ProvinceId]
	, [IsActive]
	, [Priority]
	, [CreationDate]
	, [CreationUserId]
	, [LastModificationDate]
	, [LastModificationUserId]
	from dbo.[Repository] {0}
	)
select
    [RepositoryId],
    [RepositoryManagerStaffId],
    [Code],
    [Name],
    [Address],
    [ProvinceId],
    [IsActive],
    [Priority],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
from PageIndex
where RowIndex > {2}
and RowIndex <= {3};
				

				-- get total count
				select count(*) as TotalRowCount from dbo.[Repository] {0};
			
				END
			]]></body>
		</procedure>
		
		
		<procedure owner="dbo" name="Item_Get_List" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets all records from the Item table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters/>
			<body><![CDATA[

SELECT
    [ItemId],
    [GroupId],
    [Code],
    [Name],
    [Description],
    [BaseUnitId],
    [UsedUnitId],
    [Density],
    [TotalQuantity],
    [AvailabelQuantity],
    [ReserveQuantity],
    [ReturnQuantity],
    [AdjustQuantity],
    [Status],
    [IsActive],
    [IsDeletable],
    [Priority],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
FROM
    dbo.[Item]
					
Select @@ROWCOUNT
]]></body>
		</procedure>
		
		
		<procedure owner="dbo" name="Item_GetPaged" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets records from the Item table passing page index and page count parameters
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
				<parameter name="@WhereClause" type="varchar" direction="Input" size="2000" precision="0" scale="0" param="(2000)" />
				<parameter name="@OrderBy" type="varchar" direction="Input" size="2000" precision="0" scale="0" param="(2000)"/>
				<parameter name="@PageIndex" type="int" direction="Input" size="0" precision="10" scale="0" />
				<parameter name="@PageSize" type="int" direction="Input" size="0" precision="10" scale="0" /> 
			</parameters>
			<body><![CDATA[

BEGIN
DECLARE @PageLowerBound int
DECLARE @PageUpperBound int
				
-- Set the page bounds
SET @PageLowerBound = @PageSize * @PageIndex
SET @PageUpperBound = @PageLowerBound + @PageSize

IF (@OrderBy is null or LEN(@OrderBy) < 1)
BEGIN
    -- default order by to first column
    SET @OrderBy = '[ItemId]'
END

-- SQL Server 2005 Paging
declare @SQL as nvarchar(4000)
SET @SQL = 'WITH PageIndex AS ('
SET @SQL = @SQL + ' SELECT'
IF @PageSize > 0
BEGIN
    SET @SQL = @SQL + ' TOP ' + convert(nvarchar, @PageUpperBound)
END
SET @SQL = @SQL + ' ROW_NUMBER() OVER (ORDER BY ' + @OrderBy + ') as RowIndex'
SET @SQL = @SQL + ', [ItemId]'
SET @SQL = @SQL + ', [GroupId]'
SET @SQL = @SQL + ', [Code]'
SET @SQL = @SQL + ', [Name]'
SET @SQL = @SQL + ', [Description]'
SET @SQL = @SQL + ', [BaseUnitId]'
SET @SQL = @SQL + ', [UsedUnitId]'
SET @SQL = @SQL + ', [Density]'
SET @SQL = @SQL + ', [TotalQuantity]'
SET @SQL = @SQL + ', [AvailabelQuantity]'
SET @SQL = @SQL + ', [ReserveQuantity]'
SET @SQL = @SQL + ', [ReturnQuantity]'
SET @SQL = @SQL + ', [AdjustQuantity]'
SET @SQL = @SQL + ', [Status]'
SET @SQL = @SQL + ', [IsActive]'
SET @SQL = @SQL + ', [IsDeletable]'
SET @SQL = @SQL + ', [Priority]'
SET @SQL = @SQL + ', [CreationDate]'
SET @SQL = @SQL + ', [CreationUserId]'
SET @SQL = @SQL + ', [LastModificationDate]'
SET @SQL = @SQL + ', [LastModificationUserId]'
SET @SQL = @SQL + ' FROM dbo.[Item]'
IF LEN(@WhereClause) > 0
BEGIN
    SET @SQL = @SQL + ' WHERE ' + @WhereClause
END
SET @SQL = @SQL + ' ) SELECT'
SET @SQL = @SQL + ' [ItemId],'
SET @SQL = @SQL + ' [GroupId],'
SET @SQL = @SQL + ' [Code],'
SET @SQL = @SQL + ' [Name],'
SET @SQL = @SQL + ' [Description],'
SET @SQL = @SQL + ' [BaseUnitId],'
SET @SQL = @SQL + ' [UsedUnitId],'
SET @SQL = @SQL + ' [Density],'
SET @SQL = @SQL + ' [TotalQuantity],'
SET @SQL = @SQL + ' [AvailabelQuantity],'
SET @SQL = @SQL + ' [ReserveQuantity],'
SET @SQL = @SQL + ' [ReturnQuantity],'
SET @SQL = @SQL + ' [AdjustQuantity],'
SET @SQL = @SQL + ' [Status],'
SET @SQL = @SQL + ' [IsActive],'
SET @SQL = @SQL + ' [IsDeletable],'
SET @SQL = @SQL + ' [Priority],'
SET @SQL = @SQL + ' [CreationDate],'
SET @SQL = @SQL + ' [CreationUserId],'
SET @SQL = @SQL + ' [LastModificationDate],'
SET @SQL = @SQL + ' [LastModificationUserId]'
SET @SQL = @SQL + ' FROM PageIndex'
SET @SQL = @SQL + ' WHERE RowIndex > ' + convert(nvarchar, @PageLowerBound)
IF @PageSize > 0
BEGIN
    SET @SQL = @SQL + ' AND RowIndex <= ' + convert(nvarchar, @PageUpperBound)
END
exec sp_executesql @SQL
				
-- get row count
SET @SQL = 'SELECT COUNT(*) as TotalRowCount'
SET @SQL = @SQL + ' FROM dbo.[Item]'
IF LEN(@WhereClause) > 0
BEGIN
    SET @SQL = @SQL + ' WHERE ' + @WhereClause
END
exec sp_executesql @SQL
			
END
]]></body>
		</procedure>
		
		<procedure owner="dbo" name="Item_Insert" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Inserts a record into the Item table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@ItemId" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
                <parameter name="@GroupId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@Code" type="varchar" direction="Input" size="200" precision="0" scale="0" param="(200)" nulldefault=""/>
                <parameter name="@Name" type="nvarchar" direction="Input" size="500" precision="0" scale="0" param="(500)" nulldefault=""/>
                <parameter name="@Description" type="ntext" direction="Input" size="16" precision="0" scale="0" param="" nulldefault=""/>
                <parameter name="@BaseUnitId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@UsedUnitId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@Density" type="float" direction="Input" size="8" precision="53" scale="0" param="" nulldefault=""/>
                <parameter name="@TotalQuantity" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
                <parameter name="@AvailabelQuantity" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
                <parameter name="@ReserveQuantity" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
                <parameter name="@ReturnQuantity" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
                <parameter name="@AdjustQuantity" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
                <parameter name="@Status" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@IsActive" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@IsDeletable" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@Priority" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@LastModificationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
					
INSERT INTO dbo.[Item]
(
    [ItemId],
    [GroupId],
    [Code],
    [Name],
    [Description],
    [BaseUnitId],
    [UsedUnitId],
    [Density],
    [TotalQuantity],
    [AvailabelQuantity],
    [ReserveQuantity],
    [ReturnQuantity],
    [AdjustQuantity],
    [Status],
    [IsActive],
    [IsDeletable],
    [Priority],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
)
VALUES
(
    @ItemId,
    @GroupId,
    @Code,
    @Name,
    @Description,
    @BaseUnitId,
    @UsedUnitId,
    @Density,
    @TotalQuantity,
    @AvailabelQuantity,
    @ReserveQuantity,
    @ReturnQuantity,
    @AdjustQuantity,
    @Status,
    @IsActive,
    @IsDeletable,
    @Priority,
    @CreationDate,
    @CreationUserId,
    @LastModificationDate,
    @LastModificationUserId
)
				
									
							
			]]></body>
		</procedure>
		<procedure owner="dbo" name="Item_Update" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Updates a record in the Item table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@ItemId" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
                <parameter name="@OriginalItemId" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
                <parameter name="@GroupId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@Code" type="varchar" direction="Input" size="200" precision="0" scale="0" param="(200)" nulldefault=""/>
                <parameter name="@Name" type="nvarchar" direction="Input" size="500" precision="0" scale="0" param="(500)" nulldefault=""/>
                <parameter name="@Description" type="ntext" direction="Input" size="16" precision="0" scale="0" param="" nulldefault=""/>
                <parameter name="@BaseUnitId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@UsedUnitId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@Density" type="float" direction="Input" size="8" precision="53" scale="0" param="" nulldefault=""/>
                <parameter name="@TotalQuantity" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
                <parameter name="@AvailabelQuantity" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
                <parameter name="@ReserveQuantity" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
                <parameter name="@ReturnQuantity" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
                <parameter name="@AdjustQuantity" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
                <parameter name="@Status" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@IsActive" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@IsDeletable" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@Priority" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@LastModificationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[

				
-- Modify the updatable columns
UPDATE
    dbo.[Item]
SET
    [ItemId] = @ItemId,
    [GroupId] = @GroupId,
    [Code] = @Code,
    [Name] = @Name,
    [Description] = @Description,
    [BaseUnitId] = @BaseUnitId,
    [UsedUnitId] = @UsedUnitId,
    [Density] = @Density,
    [TotalQuantity] = @TotalQuantity,
    [AvailabelQuantity] = @AvailabelQuantity,
    [ReserveQuantity] = @ReserveQuantity,
    [ReturnQuantity] = @ReturnQuantity,
    [AdjustQuantity] = @AdjustQuantity,
    [Status] = @Status,
    [IsActive] = @IsActive,
    [IsDeletable] = @IsDeletable,
    [Priority] = @Priority,
    [CreationDate] = @CreationDate,
    [CreationUserId] = @CreationUserId,
    [LastModificationDate] = @LastModificationDate,
    [LastModificationUserId] = @LastModificationUserId
WHERE
    [ItemId] = @OriginalItemId 

				
			]]></body>
		</procedure>
		<procedure owner="dbo" name="Item_Delete" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Deletes a record in the Item table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@ItemId" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
DELETE FROM dbo.[Item] WITH (ROWLOCK) 
WHERE
    [ItemId] = @ItemId
					
			]]></body>
		</procedure>
		<procedure owner="dbo" name="Item_GetByBaseUnitId" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Select records from the Item table through a foreign key
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@BaseUnitId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
SET ANSI_NULLS OFF

SELECT
    [ItemId],
    [GroupId],
    [Code],
    [Name],
    [Description],
    [BaseUnitId],
    [UsedUnitId],
    [Density],
    [TotalQuantity],
    [AvailabelQuantity],
    [ReserveQuantity],
    [ReturnQuantity],
    [AdjustQuantity],
    [Status],
    [IsActive],
    [IsDeletable],
    [Priority],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
FROM
    dbo.[Item]
WHERE
    [BaseUnitId] = @BaseUnitId
				
Select @@ROWCOUNT
SET ANSI_NULLS ON
]]></body>
		</procedure>
		<procedure owner="dbo" name="Item_GetByUsedUnitId" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Select records from the Item table through a foreign key
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@UsedUnitId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
SET ANSI_NULLS OFF

SELECT
    [ItemId],
    [GroupId],
    [Code],
    [Name],
    [Description],
    [BaseUnitId],
    [UsedUnitId],
    [Density],
    [TotalQuantity],
    [AvailabelQuantity],
    [ReserveQuantity],
    [ReturnQuantity],
    [AdjustQuantity],
    [Status],
    [IsActive],
    [IsDeletable],
    [Priority],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
FROM
    dbo.[Item]
WHERE
    [UsedUnitId] = @UsedUnitId
				
Select @@ROWCOUNT
SET ANSI_NULLS ON
]]></body>
		</procedure>
		<procedure owner="dbo" name="Item_GetByGroupId" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Select records from the Item table through a foreign key
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@GroupId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
SET ANSI_NULLS OFF

SELECT
    [ItemId],
    [GroupId],
    [Code],
    [Name],
    [Description],
    [BaseUnitId],
    [UsedUnitId],
    [Density],
    [TotalQuantity],
    [AvailabelQuantity],
    [ReserveQuantity],
    [ReturnQuantity],
    [AdjustQuantity],
    [Status],
    [IsActive],
    [IsDeletable],
    [Priority],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
FROM
    dbo.[Item]
WHERE
    [GroupId] = @GroupId
				
Select @@ROWCOUNT
SET ANSI_NULLS ON
]]></body>
		</procedure>
		<procedure owner="dbo" name="Item_GetByItemId" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Select records from the Item table through an index
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@ItemId" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
SELECT
    [ItemId],
    [GroupId],
    [Code],
    [Name],
    [Description],
    [BaseUnitId],
    [UsedUnitId],
    [Density],
    [TotalQuantity],
    [AvailabelQuantity],
    [ReserveQuantity],
    [ReturnQuantity],
    [AdjustQuantity],
    [Status],
    [IsActive],
    [IsDeletable],
    [Priority],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
FROM
    dbo.[Item]
WHERE
    [ItemId] = @ItemId
Select @@ROWCOUNT
					
]]></body>
			
		</procedure>
		<procedure owner="dbo" name="Item_GetByRepositoryIdFromItemInRepository" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets records through a junction table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@RepositoryId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
SELECT dbo.[Item].[ItemId]
       ,dbo.[Item].[GroupId]
       ,dbo.[Item].[Code]
       ,dbo.[Item].[Name]
       ,dbo.[Item].[Description]
       ,dbo.[Item].[BaseUnitId]
       ,dbo.[Item].[UsedUnitId]
       ,dbo.[Item].[Density]
       ,dbo.[Item].[TotalQuantity]
       ,dbo.[Item].[AvailabelQuantity]
       ,dbo.[Item].[ReserveQuantity]
       ,dbo.[Item].[ReturnQuantity]
       ,dbo.[Item].[AdjustQuantity]
       ,dbo.[Item].[Status]
       ,dbo.[Item].[IsActive]
       ,dbo.[Item].[IsDeletable]
       ,dbo.[Item].[Priority]
       ,dbo.[Item].[CreationDate]
       ,dbo.[Item].[CreationUserId]
       ,dbo.[Item].[LastModificationDate]
       ,dbo.[Item].[LastModificationUserId]
  FROM dbo.[Item]
 WHERE EXISTS (SELECT 1
                 FROM dbo.[ItemInRepository] 
                WHERE dbo.[ItemInRepository].[RepositoryId] = @RepositoryId
                  AND dbo.[ItemInRepository].[ItemId] = dbo.[Item].[ItemId]
                  )
				Select @@ROWCOUNT			
				]]></body>
		</procedure>
		<procedure owner="dbo" name="Item_Find" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Finds records in the Item table passing nullable parameters
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
				<parameter name="@SearchUsingOR" type="bit" direction="Input" size="0" precision="1" scale="0" param="" nulldefault="null"/>
                <parameter name="@ItemId" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault="null"/>
                <parameter name="@GroupId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@Code" type="varchar" direction="Input" size="200" precision="0" scale="0" param="(200)" nulldefault="null"/>
                <parameter name="@Name" type="nvarchar" direction="Input" size="500" precision="0" scale="0" param="(500)" nulldefault="null"/>
                <parameter name="@Description" type="ntext" direction="Input" size="16" precision="0" scale="0" param="" nulldefault="null"/>
                <parameter name="@BaseUnitId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@UsedUnitId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@Density" type="float" direction="Input" size="8" precision="53" scale="0" param="" nulldefault="null"/>
                <parameter name="@TotalQuantity" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault="null"/>
                <parameter name="@AvailabelQuantity" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault="null"/>
                <parameter name="@ReserveQuantity" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault="null"/>
                <parameter name="@ReturnQuantity" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault="null"/>
                <parameter name="@AdjustQuantity" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault="null"/>
                <parameter name="@Status" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@IsActive" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault="null"/>
                <parameter name="@IsDeletable" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault="null"/>
                <parameter name="@Priority" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault="null"/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@LastModificationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault="null"/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
			</parameters>
			<body><![CDATA[

IF ISNULL(@SearchUsingOR, 0) <> 1
BEGIN
    SELECT
        [ItemId], 
        [GroupId], 
        [Code], 
        [Name], 
        [Description], 
        [BaseUnitId], 
        [UsedUnitId], 
        [Density], 
        [TotalQuantity], 
        [AvailabelQuantity], 
        [ReserveQuantity], 
        [ReturnQuantity], 
        [AdjustQuantity], 
        [Status], 
        [IsActive], 
        [IsDeletable], 
        [Priority], 
        [CreationDate], 
        [CreationUserId], 
        [LastModificationDate], 
        [LastModificationUserId]
    FROM
        dbo.[Item]
    WHERE 
     ([ItemId] = @ItemId OR @ItemId is null)
    AND ([GroupId] = @GroupId OR @GroupId is null)
    AND ([Code] = @Code OR @Code is null)
    AND ([Name] = @Name OR @Name is null)
    AND ([BaseUnitId] = @BaseUnitId OR @BaseUnitId is null)
    AND ([UsedUnitId] = @UsedUnitId OR @UsedUnitId is null)
    AND ([Density] = @Density OR @Density is null)
    AND ([TotalQuantity] = @TotalQuantity OR @TotalQuantity is null)
    AND ([AvailabelQuantity] = @AvailabelQuantity OR @AvailabelQuantity is null)
    AND ([ReserveQuantity] = @ReserveQuantity OR @ReserveQuantity is null)
    AND ([ReturnQuantity] = @ReturnQuantity OR @ReturnQuantity is null)
    AND ([AdjustQuantity] = @AdjustQuantity OR @AdjustQuantity is null)
    AND ([Status] = @Status OR @Status is null)
    AND ([IsActive] = @IsActive OR @IsActive is null)
    AND ([IsDeletable] = @IsDeletable OR @IsDeletable is null)
    AND ([Priority] = @Priority OR @Priority is null)
    AND ([CreationDate] = @CreationDate OR @CreationDate is null)
    AND ([CreationUserId] = @CreationUserId OR @CreationUserId is null)
    AND ([LastModificationDate] = @LastModificationDate OR @LastModificationDate is null)
    AND ([LastModificationUserId] = @LastModificationUserId OR @LastModificationUserId is null)
END
ELSE
    BEGIN
        SELECT
            [ItemId], 
            [GroupId], 
            [Code], 
            [Name], 
            [Description], 
            [BaseUnitId], 
            [UsedUnitId], 
            [Density], 
            [TotalQuantity], 
            [AvailabelQuantity], 
            [ReserveQuantity], 
            [ReturnQuantity], 
            [AdjustQuantity], 
            [Status], 
            [IsActive], 
            [IsDeletable], 
            [Priority], 
            [CreationDate], 
            [CreationUserId], 
            [LastModificationDate], 
            [LastModificationUserId]
        FROM
            dbo.[Item]
        WHERE
     ([ItemId] = @ItemId AND @ItemId is not null)
    OR ([GroupId] = @GroupId AND @GroupId is not null)
    OR ([Code] = @Code AND @Code is not null)
    OR ([Name] = @Name AND @Name is not null)
    OR ([BaseUnitId] = @BaseUnitId AND @BaseUnitId is not null)
    OR ([UsedUnitId] = @UsedUnitId AND @UsedUnitId is not null)
    OR ([Density] = @Density AND @Density is not null)
    OR ([TotalQuantity] = @TotalQuantity AND @TotalQuantity is not null)
    OR ([AvailabelQuantity] = @AvailabelQuantity AND @AvailabelQuantity is not null)
    OR ([ReserveQuantity] = @ReserveQuantity AND @ReserveQuantity is not null)
    OR ([ReturnQuantity] = @ReturnQuantity AND @ReturnQuantity is not null)
    OR ([AdjustQuantity] = @AdjustQuantity AND @AdjustQuantity is not null)
    OR ([Status] = @Status AND @Status is not null)
    OR ([IsActive] = @IsActive AND @IsActive is not null)
    OR ([IsDeletable] = @IsDeletable AND @IsDeletable is not null)
    OR ([Priority] = @Priority AND @Priority is not null)
    OR ([CreationDate] = @CreationDate AND @CreationDate is not null)
    OR ([CreationUserId] = @CreationUserId AND @CreationUserId is not null)
    OR ([LastModificationDate] = @LastModificationDate AND @LastModificationDate is not null)
    OR ([LastModificationUserId] = @LastModificationUserId AND @LastModificationUserId is not null)
        Select @@ROWCOUNT			
    END
	]]></body>
		</procedure>

		
		<procedure owner="dbo" name="Item_Find_Dynamic" grant="" skip="true">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets records from the Item table using a dynamically generated query.
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters/>
			<body><![CDATA[

BEGIN
				
with PageIndex as (
	select top {3} row_number() over (order by {1}) as RowIndex
	, [ItemId]
	, [GroupId]
	, [Code]
	, [Name]
	, [Description]
	, [BaseUnitId]
	, [UsedUnitId]
	, [Density]
	, [TotalQuantity]
	, [AvailabelQuantity]
	, [ReserveQuantity]
	, [ReturnQuantity]
	, [AdjustQuantity]
	, [Status]
	, [IsActive]
	, [IsDeletable]
	, [Priority]
	, [CreationDate]
	, [CreationUserId]
	, [LastModificationDate]
	, [LastModificationUserId]
	from dbo.[Item] {0}
	)
select
    [ItemId],
    [GroupId],
    [Code],
    [Name],
    [Description],
    [BaseUnitId],
    [UsedUnitId],
    [Density],
    [TotalQuantity],
    [AvailabelQuantity],
    [ReserveQuantity],
    [ReturnQuantity],
    [AdjustQuantity],
    [Status],
    [IsActive],
    [IsDeletable],
    [Priority],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
from PageIndex
where RowIndex > {2}
and RowIndex <= {3};
				

				-- get total count
				select count(*) as TotalRowCount from dbo.[Item] {0};
			
				END
			]]></body>
		</procedure>
		
		
		<procedure owner="dbo" name="UserGroup_Get_List" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets all records from the UserGroup table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters/>
			<body><![CDATA[

SELECT
    [UserGroupId],
    [UserGroupName],
    [IsActive],
    [IsDeletable],
    [Priority],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
FROM
    dbo.[UserGroup]
					
Select @@ROWCOUNT
]]></body>
		</procedure>
		
		
		<procedure owner="dbo" name="UserGroup_GetPaged" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets records from the UserGroup table passing page index and page count parameters
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
				<parameter name="@WhereClause" type="varchar" direction="Input" size="2000" precision="0" scale="0" param="(2000)" />
				<parameter name="@OrderBy" type="varchar" direction="Input" size="2000" precision="0" scale="0" param="(2000)"/>
				<parameter name="@PageIndex" type="int" direction="Input" size="0" precision="10" scale="0" />
				<parameter name="@PageSize" type="int" direction="Input" size="0" precision="10" scale="0" /> 
			</parameters>
			<body><![CDATA[

BEGIN
DECLARE @PageLowerBound int
DECLARE @PageUpperBound int
				
-- Set the page bounds
SET @PageLowerBound = @PageSize * @PageIndex
SET @PageUpperBound = @PageLowerBound + @PageSize

IF (@OrderBy is null or LEN(@OrderBy) < 1)
BEGIN
    -- default order by to first column
    SET @OrderBy = '[UserGroupId]'
END

-- SQL Server 2005 Paging
declare @SQL as nvarchar(4000)
SET @SQL = 'WITH PageIndex AS ('
SET @SQL = @SQL + ' SELECT'
IF @PageSize > 0
BEGIN
    SET @SQL = @SQL + ' TOP ' + convert(nvarchar, @PageUpperBound)
END
SET @SQL = @SQL + ' ROW_NUMBER() OVER (ORDER BY ' + @OrderBy + ') as RowIndex'
SET @SQL = @SQL + ', [UserGroupId]'
SET @SQL = @SQL + ', [UserGroupName]'
SET @SQL = @SQL + ', [IsActive]'
SET @SQL = @SQL + ', [IsDeletable]'
SET @SQL = @SQL + ', [Priority]'
SET @SQL = @SQL + ', [CreationDate]'
SET @SQL = @SQL + ', [CreationUserId]'
SET @SQL = @SQL + ', [LastModificationDate]'
SET @SQL = @SQL + ', [LastModificationUserId]'
SET @SQL = @SQL + ' FROM dbo.[UserGroup]'
IF LEN(@WhereClause) > 0
BEGIN
    SET @SQL = @SQL + ' WHERE ' + @WhereClause
END
SET @SQL = @SQL + ' ) SELECT'
SET @SQL = @SQL + ' [UserGroupId],'
SET @SQL = @SQL + ' [UserGroupName],'
SET @SQL = @SQL + ' [IsActive],'
SET @SQL = @SQL + ' [IsDeletable],'
SET @SQL = @SQL + ' [Priority],'
SET @SQL = @SQL + ' [CreationDate],'
SET @SQL = @SQL + ' [CreationUserId],'
SET @SQL = @SQL + ' [LastModificationDate],'
SET @SQL = @SQL + ' [LastModificationUserId]'
SET @SQL = @SQL + ' FROM PageIndex'
SET @SQL = @SQL + ' WHERE RowIndex > ' + convert(nvarchar, @PageLowerBound)
IF @PageSize > 0
BEGIN
    SET @SQL = @SQL + ' AND RowIndex <= ' + convert(nvarchar, @PageUpperBound)
END
exec sp_executesql @SQL
				
-- get row count
SET @SQL = 'SELECT COUNT(*) as TotalRowCount'
SET @SQL = @SQL + ' FROM dbo.[UserGroup]'
IF LEN(@WhereClause) > 0
BEGIN
    SET @SQL = @SQL + ' WHERE ' + @WhereClause
END
exec sp_executesql @SQL
			
END
]]></body>
		</procedure>
		
		<procedure owner="dbo" name="UserGroup_Insert" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Inserts a record into the UserGroup table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@UserGroupId" type="int" direction="Output" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@UserGroupName" type="nvarchar" direction="Input" size="200" precision="0" scale="0" param="(200)" nulldefault=""/>
                <parameter name="@IsActive" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@IsDeletable" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@Priority" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@LastModificationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
					
INSERT INTO dbo.[UserGroup]
(
    [UserGroupName],
    [IsActive],
    [IsDeletable],
    [Priority],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
)
VALUES
(
    @UserGroupName,
    @IsActive,
    @IsDeletable,
    @Priority,
    @CreationDate,
    @CreationUserId,
    @LastModificationDate,
    @LastModificationUserId
)
				
-- Get the identity value
SET @UserGroupId = SCOPE_IDENTITY()
									
							
			]]></body>
		</procedure>
		<procedure owner="dbo" name="UserGroup_Update" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Updates a record in the UserGroup table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@UserGroupId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@UserGroupName" type="nvarchar" direction="Input" size="200" precision="0" scale="0" param="(200)" nulldefault=""/>
                <parameter name="@IsActive" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@IsDeletable" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@Priority" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@LastModificationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[

				
-- Modify the updatable columns
UPDATE
    dbo.[UserGroup]
SET
    [UserGroupName] = @UserGroupName,
    [IsActive] = @IsActive,
    [IsDeletable] = @IsDeletable,
    [Priority] = @Priority,
    [CreationDate] = @CreationDate,
    [CreationUserId] = @CreationUserId,
    [LastModificationDate] = @LastModificationDate,
    [LastModificationUserId] = @LastModificationUserId
WHERE
    [UserGroupId] = @UserGroupId 

				
			]]></body>
		</procedure>
		<procedure owner="dbo" name="UserGroup_Delete" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Deletes a record in the UserGroup table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@UserGroupId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
DELETE FROM dbo.[UserGroup] WITH (ROWLOCK) 
WHERE
    [UserGroupId] = @UserGroupId
					
			]]></body>
		</procedure>
		<procedure owner="dbo" name="UserGroup_GetByUserGroupId" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Select records from the UserGroup table through an index
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@UserGroupId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
SELECT
    [UserGroupId],
    [UserGroupName],
    [IsActive],
    [IsDeletable],
    [Priority],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
FROM
    dbo.[UserGroup]
WHERE
    [UserGroupId] = @UserGroupId
Select @@ROWCOUNT
					
]]></body>
			
		</procedure>
		<procedure owner="dbo" name="UserGroup_Find" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Finds records in the UserGroup table passing nullable parameters
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
				<parameter name="@SearchUsingOR" type="bit" direction="Input" size="0" precision="1" scale="0" param="" nulldefault="null"/>
                <parameter name="@UserGroupId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@UserGroupName" type="nvarchar" direction="Input" size="200" precision="0" scale="0" param="(200)" nulldefault="null"/>
                <parameter name="@IsActive" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault="null"/>
                <parameter name="@IsDeletable" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault="null"/>
                <parameter name="@Priority" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault="null"/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@LastModificationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault="null"/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
			</parameters>
			<body><![CDATA[

IF ISNULL(@SearchUsingOR, 0) <> 1
BEGIN
    SELECT
        [UserGroupId], 
        [UserGroupName], 
        [IsActive], 
        [IsDeletable], 
        [Priority], 
        [CreationDate], 
        [CreationUserId], 
        [LastModificationDate], 
        [LastModificationUserId]
    FROM
        dbo.[UserGroup]
    WHERE 
     ([UserGroupId] = @UserGroupId OR @UserGroupId is null)
    AND ([UserGroupName] = @UserGroupName OR @UserGroupName is null)
    AND ([IsActive] = @IsActive OR @IsActive is null)
    AND ([IsDeletable] = @IsDeletable OR @IsDeletable is null)
    AND ([Priority] = @Priority OR @Priority is null)
    AND ([CreationDate] = @CreationDate OR @CreationDate is null)
    AND ([CreationUserId] = @CreationUserId OR @CreationUserId is null)
    AND ([LastModificationDate] = @LastModificationDate OR @LastModificationDate is null)
    AND ([LastModificationUserId] = @LastModificationUserId OR @LastModificationUserId is null)
END
ELSE
    BEGIN
        SELECT
            [UserGroupId], 
            [UserGroupName], 
            [IsActive], 
            [IsDeletable], 
            [Priority], 
            [CreationDate], 
            [CreationUserId], 
            [LastModificationDate], 
            [LastModificationUserId]
        FROM
            dbo.[UserGroup]
        WHERE
     ([UserGroupId] = @UserGroupId AND @UserGroupId is not null)
    OR ([UserGroupName] = @UserGroupName AND @UserGroupName is not null)
    OR ([IsActive] = @IsActive AND @IsActive is not null)
    OR ([IsDeletable] = @IsDeletable AND @IsDeletable is not null)
    OR ([Priority] = @Priority AND @Priority is not null)
    OR ([CreationDate] = @CreationDate AND @CreationDate is not null)
    OR ([CreationUserId] = @CreationUserId AND @CreationUserId is not null)
    OR ([LastModificationDate] = @LastModificationDate AND @LastModificationDate is not null)
    OR ([LastModificationUserId] = @LastModificationUserId AND @LastModificationUserId is not null)
        Select @@ROWCOUNT			
    END
	]]></body>
		</procedure>

		
		<procedure owner="dbo" name="UserGroup_Find_Dynamic" grant="" skip="true">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets records from the UserGroup table using a dynamically generated query.
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters/>
			<body><![CDATA[

BEGIN
				
with PageIndex as (
	select top {3} row_number() over (order by {1}) as RowIndex
	, [UserGroupId]
	, [UserGroupName]
	, [IsActive]
	, [IsDeletable]
	, [Priority]
	, [CreationDate]
	, [CreationUserId]
	, [LastModificationDate]
	, [LastModificationUserId]
	from dbo.[UserGroup] {0}
	)
select
    [UserGroupId],
    [UserGroupName],
    [IsActive],
    [IsDeletable],
    [Priority],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
from PageIndex
where RowIndex > {2}
and RowIndex <= {3};
				

				-- get total count
				select count(*) as TotalRowCount from dbo.[UserGroup] {0};
			
				END
			]]></body>
		</procedure>
		
		
		<procedure owner="dbo" name="Contactor_Get_List" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets all records from the Contactor table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters/>
			<body><![CDATA[

SELECT
    [ContractId],
    [PartnerId],
    [GroupId],
    [Code],
    [Name],
    [JobTitle],
    [Email],
    [Mobile],
    [Phone],
    [Ext],
    [IsActive],
    [Priority],
    [Comment],
    [CreationDate],
    [CreationUserId],
    [LastModifitionDate],
    [LastModificationUserId]
FROM
    dbo.[Contactor]
					
Select @@ROWCOUNT
]]></body>
		</procedure>
		
		
		<procedure owner="dbo" name="Contactor_GetPaged" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets records from the Contactor table passing page index and page count parameters
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
				<parameter name="@WhereClause" type="varchar" direction="Input" size="2000" precision="0" scale="0" param="(2000)" />
				<parameter name="@OrderBy" type="varchar" direction="Input" size="2000" precision="0" scale="0" param="(2000)"/>
				<parameter name="@PageIndex" type="int" direction="Input" size="0" precision="10" scale="0" />
				<parameter name="@PageSize" type="int" direction="Input" size="0" precision="10" scale="0" /> 
			</parameters>
			<body><![CDATA[

BEGIN
DECLARE @PageLowerBound int
DECLARE @PageUpperBound int
				
-- Set the page bounds
SET @PageLowerBound = @PageSize * @PageIndex
SET @PageUpperBound = @PageLowerBound + @PageSize

IF (@OrderBy is null or LEN(@OrderBy) < 1)
BEGIN
    -- default order by to first column
    SET @OrderBy = '[ContractId]'
END

-- SQL Server 2005 Paging
declare @SQL as nvarchar(4000)
SET @SQL = 'WITH PageIndex AS ('
SET @SQL = @SQL + ' SELECT'
IF @PageSize > 0
BEGIN
    SET @SQL = @SQL + ' TOP ' + convert(nvarchar, @PageUpperBound)
END
SET @SQL = @SQL + ' ROW_NUMBER() OVER (ORDER BY ' + @OrderBy + ') as RowIndex'
SET @SQL = @SQL + ', [ContractId]'
SET @SQL = @SQL + ', [PartnerId]'
SET @SQL = @SQL + ', [GroupId]'
SET @SQL = @SQL + ', [Code]'
SET @SQL = @SQL + ', [Name]'
SET @SQL = @SQL + ', [JobTitle]'
SET @SQL = @SQL + ', [Email]'
SET @SQL = @SQL + ', [Mobile]'
SET @SQL = @SQL + ', [Phone]'
SET @SQL = @SQL + ', [Ext]'
SET @SQL = @SQL + ', [IsActive]'
SET @SQL = @SQL + ', [Priority]'
SET @SQL = @SQL + ', [Comment]'
SET @SQL = @SQL + ', [CreationDate]'
SET @SQL = @SQL + ', [CreationUserId]'
SET @SQL = @SQL + ', [LastModifitionDate]'
SET @SQL = @SQL + ', [LastModificationUserId]'
SET @SQL = @SQL + ' FROM dbo.[Contactor]'
IF LEN(@WhereClause) > 0
BEGIN
    SET @SQL = @SQL + ' WHERE ' + @WhereClause
END
SET @SQL = @SQL + ' ) SELECT'
SET @SQL = @SQL + ' [ContractId],'
SET @SQL = @SQL + ' [PartnerId],'
SET @SQL = @SQL + ' [GroupId],'
SET @SQL = @SQL + ' [Code],'
SET @SQL = @SQL + ' [Name],'
SET @SQL = @SQL + ' [JobTitle],'
SET @SQL = @SQL + ' [Email],'
SET @SQL = @SQL + ' [Mobile],'
SET @SQL = @SQL + ' [Phone],'
SET @SQL = @SQL + ' [Ext],'
SET @SQL = @SQL + ' [IsActive],'
SET @SQL = @SQL + ' [Priority],'
SET @SQL = @SQL + ' [Comment],'
SET @SQL = @SQL + ' [CreationDate],'
SET @SQL = @SQL + ' [CreationUserId],'
SET @SQL = @SQL + ' [LastModifitionDate],'
SET @SQL = @SQL + ' [LastModificationUserId]'
SET @SQL = @SQL + ' FROM PageIndex'
SET @SQL = @SQL + ' WHERE RowIndex > ' + convert(nvarchar, @PageLowerBound)
IF @PageSize > 0
BEGIN
    SET @SQL = @SQL + ' AND RowIndex <= ' + convert(nvarchar, @PageUpperBound)
END
exec sp_executesql @SQL
				
-- get row count
SET @SQL = 'SELECT COUNT(*) as TotalRowCount'
SET @SQL = @SQL + ' FROM dbo.[Contactor]'
IF LEN(@WhereClause) > 0
BEGIN
    SET @SQL = @SQL + ' WHERE ' + @WhereClause
END
exec sp_executesql @SQL
			
END
]]></body>
		</procedure>
		
		<procedure owner="dbo" name="Contactor_Insert" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Inserts a record into the Contactor table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@ContractId" type="int" direction="Output" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@PartnerId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@GroupId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@Code" type="varchar" direction="Input" size="50" precision="0" scale="0" param="(50)" nulldefault=""/>
                <parameter name="@Name" type="nvarchar" direction="Input" size="500" precision="0" scale="0" param="(500)" nulldefault=""/>
                <parameter name="@JobTitle" type="nvarchar" direction="Input" size="200" precision="0" scale="0" param="(200)" nulldefault=""/>
                <parameter name="@Email" type="nvarchar" direction="Input" size="100" precision="0" scale="0" param="(100)" nulldefault=""/>
                <parameter name="@Mobile" type="varchar" direction="Input" size="100" precision="0" scale="0" param="(100)" nulldefault=""/>
                <parameter name="@Phone" type="varchar" direction="Input" size="100" precision="0" scale="0" param="(100)" nulldefault=""/>
                <parameter name="@Ext" type="varchar" direction="Input" size="5" precision="0" scale="0" param="(5)" nulldefault=""/>
                <parameter name="@IsActive" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@Priority" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@Comment" type="ntext" direction="Input" size="16" precision="0" scale="0" param="" nulldefault=""/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@LastModifitionDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
					
INSERT INTO dbo.[Contactor]
(
    [PartnerId],
    [GroupId],
    [Code],
    [Name],
    [JobTitle],
    [Email],
    [Mobile],
    [Phone],
    [Ext],
    [IsActive],
    [Priority],
    [Comment],
    [CreationDate],
    [CreationUserId],
    [LastModifitionDate],
    [LastModificationUserId]
)
VALUES
(
    @PartnerId,
    @GroupId,
    @Code,
    @Name,
    @JobTitle,
    @Email,
    @Mobile,
    @Phone,
    @Ext,
    @IsActive,
    @Priority,
    @Comment,
    @CreationDate,
    @CreationUserId,
    @LastModifitionDate,
    @LastModificationUserId
)
				
-- Get the identity value
SET @ContractId = SCOPE_IDENTITY()
									
							
			]]></body>
		</procedure>
		<procedure owner="dbo" name="Contactor_Update" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Updates a record in the Contactor table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@ContractId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@PartnerId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@GroupId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@Code" type="varchar" direction="Input" size="50" precision="0" scale="0" param="(50)" nulldefault=""/>
                <parameter name="@Name" type="nvarchar" direction="Input" size="500" precision="0" scale="0" param="(500)" nulldefault=""/>
                <parameter name="@JobTitle" type="nvarchar" direction="Input" size="200" precision="0" scale="0" param="(200)" nulldefault=""/>
                <parameter name="@Email" type="nvarchar" direction="Input" size="100" precision="0" scale="0" param="(100)" nulldefault=""/>
                <parameter name="@Mobile" type="varchar" direction="Input" size="100" precision="0" scale="0" param="(100)" nulldefault=""/>
                <parameter name="@Phone" type="varchar" direction="Input" size="100" precision="0" scale="0" param="(100)" nulldefault=""/>
                <parameter name="@Ext" type="varchar" direction="Input" size="5" precision="0" scale="0" param="(5)" nulldefault=""/>
                <parameter name="@IsActive" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@Priority" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@Comment" type="ntext" direction="Input" size="16" precision="0" scale="0" param="" nulldefault=""/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@LastModifitionDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[

				
-- Modify the updatable columns
UPDATE
    dbo.[Contactor]
SET
    [PartnerId] = @PartnerId,
    [GroupId] = @GroupId,
    [Code] = @Code,
    [Name] = @Name,
    [JobTitle] = @JobTitle,
    [Email] = @Email,
    [Mobile] = @Mobile,
    [Phone] = @Phone,
    [Ext] = @Ext,
    [IsActive] = @IsActive,
    [Priority] = @Priority,
    [Comment] = @Comment,
    [CreationDate] = @CreationDate,
    [CreationUserId] = @CreationUserId,
    [LastModifitionDate] = @LastModifitionDate,
    [LastModificationUserId] = @LastModificationUserId
WHERE
    [ContractId] = @ContractId 

				
			]]></body>
		</procedure>
		<procedure owner="dbo" name="Contactor_Delete" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Deletes a record in the Contactor table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@ContractId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
DELETE FROM dbo.[Contactor] WITH (ROWLOCK) 
WHERE
    [ContractId] = @ContractId
					
			]]></body>
		</procedure>
		<procedure owner="dbo" name="Contactor_GetByContractId" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Select records from the Contactor table through an index
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@ContractId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
SELECT
    [ContractId],
    [PartnerId],
    [GroupId],
    [Code],
    [Name],
    [JobTitle],
    [Email],
    [Mobile],
    [Phone],
    [Ext],
    [IsActive],
    [Priority],
    [Comment],
    [CreationDate],
    [CreationUserId],
    [LastModifitionDate],
    [LastModificationUserId]
FROM
    dbo.[Contactor]
WHERE
    [ContractId] = @ContractId
Select @@ROWCOUNT
					
]]></body>
			
		</procedure>
		<procedure owner="dbo" name="Contactor_Find" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Finds records in the Contactor table passing nullable parameters
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
				<parameter name="@SearchUsingOR" type="bit" direction="Input" size="0" precision="1" scale="0" param="" nulldefault="null"/>
                <parameter name="@ContractId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@PartnerId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@GroupId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@Code" type="varchar" direction="Input" size="50" precision="0" scale="0" param="(50)" nulldefault="null"/>
                <parameter name="@Name" type="nvarchar" direction="Input" size="500" precision="0" scale="0" param="(500)" nulldefault="null"/>
                <parameter name="@JobTitle" type="nvarchar" direction="Input" size="200" precision="0" scale="0" param="(200)" nulldefault="null"/>
                <parameter name="@Email" type="nvarchar" direction="Input" size="100" precision="0" scale="0" param="(100)" nulldefault="null"/>
                <parameter name="@Mobile" type="varchar" direction="Input" size="100" precision="0" scale="0" param="(100)" nulldefault="null"/>
                <parameter name="@Phone" type="varchar" direction="Input" size="100" precision="0" scale="0" param="(100)" nulldefault="null"/>
                <parameter name="@Ext" type="varchar" direction="Input" size="5" precision="0" scale="0" param="(5)" nulldefault="null"/>
                <parameter name="@IsActive" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault="null"/>
                <parameter name="@Priority" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@Comment" type="ntext" direction="Input" size="16" precision="0" scale="0" param="" nulldefault="null"/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault="null"/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@LastModifitionDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault="null"/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
			</parameters>
			<body><![CDATA[

IF ISNULL(@SearchUsingOR, 0) <> 1
BEGIN
    SELECT
        [ContractId], 
        [PartnerId], 
        [GroupId], 
        [Code], 
        [Name], 
        [JobTitle], 
        [Email], 
        [Mobile], 
        [Phone], 
        [Ext], 
        [IsActive], 
        [Priority], 
        [Comment], 
        [CreationDate], 
        [CreationUserId], 
        [LastModifitionDate], 
        [LastModificationUserId]
    FROM
        dbo.[Contactor]
    WHERE 
     ([ContractId] = @ContractId OR @ContractId is null)
    AND ([PartnerId] = @PartnerId OR @PartnerId is null)
    AND ([GroupId] = @GroupId OR @GroupId is null)
    AND ([Code] = @Code OR @Code is null)
    AND ([Name] = @Name OR @Name is null)
    AND ([JobTitle] = @JobTitle OR @JobTitle is null)
    AND ([Email] = @Email OR @Email is null)
    AND ([Mobile] = @Mobile OR @Mobile is null)
    AND ([Phone] = @Phone OR @Phone is null)
    AND ([Ext] = @Ext OR @Ext is null)
    AND ([IsActive] = @IsActive OR @IsActive is null)
    AND ([Priority] = @Priority OR @Priority is null)
    AND ([CreationDate] = @CreationDate OR @CreationDate is null)
    AND ([CreationUserId] = @CreationUserId OR @CreationUserId is null)
    AND ([LastModifitionDate] = @LastModifitionDate OR @LastModifitionDate is null)
    AND ([LastModificationUserId] = @LastModificationUserId OR @LastModificationUserId is null)
END
ELSE
    BEGIN
        SELECT
            [ContractId], 
            [PartnerId], 
            [GroupId], 
            [Code], 
            [Name], 
            [JobTitle], 
            [Email], 
            [Mobile], 
            [Phone], 
            [Ext], 
            [IsActive], 
            [Priority], 
            [Comment], 
            [CreationDate], 
            [CreationUserId], 
            [LastModifitionDate], 
            [LastModificationUserId]
        FROM
            dbo.[Contactor]
        WHERE
     ([ContractId] = @ContractId AND @ContractId is not null)
    OR ([PartnerId] = @PartnerId AND @PartnerId is not null)
    OR ([GroupId] = @GroupId AND @GroupId is not null)
    OR ([Code] = @Code AND @Code is not null)
    OR ([Name] = @Name AND @Name is not null)
    OR ([JobTitle] = @JobTitle AND @JobTitle is not null)
    OR ([Email] = @Email AND @Email is not null)
    OR ([Mobile] = @Mobile AND @Mobile is not null)
    OR ([Phone] = @Phone AND @Phone is not null)
    OR ([Ext] = @Ext AND @Ext is not null)
    OR ([IsActive] = @IsActive AND @IsActive is not null)
    OR ([Priority] = @Priority AND @Priority is not null)
    OR ([CreationDate] = @CreationDate AND @CreationDate is not null)
    OR ([CreationUserId] = @CreationUserId AND @CreationUserId is not null)
    OR ([LastModifitionDate] = @LastModifitionDate AND @LastModifitionDate is not null)
    OR ([LastModificationUserId] = @LastModificationUserId AND @LastModificationUserId is not null)
        Select @@ROWCOUNT			
    END
	]]></body>
		</procedure>

		
		<procedure owner="dbo" name="Contactor_Find_Dynamic" grant="" skip="true">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets records from the Contactor table using a dynamically generated query.
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters/>
			<body><![CDATA[

BEGIN
				
with PageIndex as (
	select top {3} row_number() over (order by {1}) as RowIndex
	, [ContractId]
	, [PartnerId]
	, [GroupId]
	, [Code]
	, [Name]
	, [JobTitle]
	, [Email]
	, [Mobile]
	, [Phone]
	, [Ext]
	, [IsActive]
	, [Priority]
	, [Comment]
	, [CreationDate]
	, [CreationUserId]
	, [LastModifitionDate]
	, [LastModificationUserId]
	from dbo.[Contactor] {0}
	)
select
    [ContractId],
    [PartnerId],
    [GroupId],
    [Code],
    [Name],
    [JobTitle],
    [Email],
    [Mobile],
    [Phone],
    [Ext],
    [IsActive],
    [Priority],
    [Comment],
    [CreationDate],
    [CreationUserId],
    [LastModifitionDate],
    [LastModificationUserId]
from PageIndex
where RowIndex > {2}
and RowIndex <= {3};
				

				-- get total count
				select count(*) as TotalRowCount from dbo.[Contactor] {0};
			
				END
			]]></body>
		</procedure>
		
		
		<procedure owner="dbo" name="Contract_Get_List" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets all records from the Contract table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters/>
			<body><![CDATA[

SELECT
    [ContractId],
    [ConstructDeptId],
    [DesignDeptId],
    [GroupId],
    [Code],
    [Number],
    [Name],
    [Description],
    [InitPrice],
    [LastPrice],
    [FromDate],
    [ToDate],
    [RealFromDate],
    [RealToDate],
    [Status],
    [IsApprove],
    [IsActive],
    [IsPrinted],
    [CreationUserId],
    [CreationDate],
    [LastModificationUserId],
    [LastModificationDate]
FROM
    dbo.[Contract]
					
Select @@ROWCOUNT
]]></body>
		</procedure>
		
		
		<procedure owner="dbo" name="Contract_GetPaged" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets records from the Contract table passing page index and page count parameters
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
				<parameter name="@WhereClause" type="varchar" direction="Input" size="2000" precision="0" scale="0" param="(2000)" />
				<parameter name="@OrderBy" type="varchar" direction="Input" size="2000" precision="0" scale="0" param="(2000)"/>
				<parameter name="@PageIndex" type="int" direction="Input" size="0" precision="10" scale="0" />
				<parameter name="@PageSize" type="int" direction="Input" size="0" precision="10" scale="0" /> 
			</parameters>
			<body><![CDATA[

BEGIN
DECLARE @PageLowerBound int
DECLARE @PageUpperBound int
				
-- Set the page bounds
SET @PageLowerBound = @PageSize * @PageIndex
SET @PageUpperBound = @PageLowerBound + @PageSize

IF (@OrderBy is null or LEN(@OrderBy) < 1)
BEGIN
    -- default order by to first column
    SET @OrderBy = '[ContractId]'
END

-- SQL Server 2005 Paging
declare @SQL as nvarchar(4000)
SET @SQL = 'WITH PageIndex AS ('
SET @SQL = @SQL + ' SELECT'
IF @PageSize > 0
BEGIN
    SET @SQL = @SQL + ' TOP ' + convert(nvarchar, @PageUpperBound)
END
SET @SQL = @SQL + ' ROW_NUMBER() OVER (ORDER BY ' + @OrderBy + ') as RowIndex'
SET @SQL = @SQL + ', [ContractId]'
SET @SQL = @SQL + ', [ConstructDeptId]'
SET @SQL = @SQL + ', [DesignDeptId]'
SET @SQL = @SQL + ', [GroupId]'
SET @SQL = @SQL + ', [Code]'
SET @SQL = @SQL + ', [Number]'
SET @SQL = @SQL + ', [Name]'
SET @SQL = @SQL + ', [Description]'
SET @SQL = @SQL + ', [InitPrice]'
SET @SQL = @SQL + ', [LastPrice]'
SET @SQL = @SQL + ', [FromDate]'
SET @SQL = @SQL + ', [ToDate]'
SET @SQL = @SQL + ', [RealFromDate]'
SET @SQL = @SQL + ', [RealToDate]'
SET @SQL = @SQL + ', [Status]'
SET @SQL = @SQL + ', [IsApprove]'
SET @SQL = @SQL + ', [IsActive]'
SET @SQL = @SQL + ', [IsPrinted]'
SET @SQL = @SQL + ', [CreationUserId]'
SET @SQL = @SQL + ', [CreationDate]'
SET @SQL = @SQL + ', [LastModificationUserId]'
SET @SQL = @SQL + ', [LastModificationDate]'
SET @SQL = @SQL + ' FROM dbo.[Contract]'
IF LEN(@WhereClause) > 0
BEGIN
    SET @SQL = @SQL + ' WHERE ' + @WhereClause
END
SET @SQL = @SQL + ' ) SELECT'
SET @SQL = @SQL + ' [ContractId],'
SET @SQL = @SQL + ' [ConstructDeptId],'
SET @SQL = @SQL + ' [DesignDeptId],'
SET @SQL = @SQL + ' [GroupId],'
SET @SQL = @SQL + ' [Code],'
SET @SQL = @SQL + ' [Number],'
SET @SQL = @SQL + ' [Name],'
SET @SQL = @SQL + ' [Description],'
SET @SQL = @SQL + ' [InitPrice],'
SET @SQL = @SQL + ' [LastPrice],'
SET @SQL = @SQL + ' [FromDate],'
SET @SQL = @SQL + ' [ToDate],'
SET @SQL = @SQL + ' [RealFromDate],'
SET @SQL = @SQL + ' [RealToDate],'
SET @SQL = @SQL + ' [Status],'
SET @SQL = @SQL + ' [IsApprove],'
SET @SQL = @SQL + ' [IsActive],'
SET @SQL = @SQL + ' [IsPrinted],'
SET @SQL = @SQL + ' [CreationUserId],'
SET @SQL = @SQL + ' [CreationDate],'
SET @SQL = @SQL + ' [LastModificationUserId],'
SET @SQL = @SQL + ' [LastModificationDate]'
SET @SQL = @SQL + ' FROM PageIndex'
SET @SQL = @SQL + ' WHERE RowIndex > ' + convert(nvarchar, @PageLowerBound)
IF @PageSize > 0
BEGIN
    SET @SQL = @SQL + ' AND RowIndex <= ' + convert(nvarchar, @PageUpperBound)
END
exec sp_executesql @SQL
				
-- get row count
SET @SQL = 'SELECT COUNT(*) as TotalRowCount'
SET @SQL = @SQL + ' FROM dbo.[Contract]'
IF LEN(@WhereClause) > 0
BEGIN
    SET @SQL = @SQL + ' WHERE ' + @WhereClause
END
exec sp_executesql @SQL
			
END
]]></body>
		</procedure>
		
		<procedure owner="dbo" name="Contract_Insert" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Inserts a record into the Contract table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@ContractId" type="int" direction="Output" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@ConstructDeptId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@DesignDeptId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@GroupId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@Code" type="nvarchar" direction="Input" size="200" precision="0" scale="0" param="(200)" nulldefault=""/>
                <parameter name="@Number" type="nvarchar" direction="Input" size="200" precision="0" scale="0" param="(200)" nulldefault=""/>
                <parameter name="@Name" type="nvarchar" direction="Input" size="500" precision="0" scale="0" param="(500)" nulldefault=""/>
                <parameter name="@Description" type="ntext" direction="Input" size="16" precision="0" scale="0" param="" nulldefault=""/>
                <parameter name="@InitPrice" type="money" direction="Input" size="8" precision="19" scale="4" param="" nulldefault=""/>
                <parameter name="@LastPrice" type="money" direction="Input" size="8" precision="19" scale="4" param="" nulldefault=""/>
                <parameter name="@FromDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@ToDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@RealFromDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@RealToDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@Status" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@IsApprove" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@IsActive" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@IsPrinted" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@LastModificationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
					
INSERT INTO dbo.[Contract]
(
    [ConstructDeptId],
    [DesignDeptId],
    [GroupId],
    [Code],
    [Number],
    [Name],
    [Description],
    [InitPrice],
    [LastPrice],
    [FromDate],
    [ToDate],
    [RealFromDate],
    [RealToDate],
    [Status],
    [IsApprove],
    [IsActive],
    [IsPrinted],
    [CreationUserId],
    [CreationDate],
    [LastModificationUserId],
    [LastModificationDate]
)
VALUES
(
    @ConstructDeptId,
    @DesignDeptId,
    @GroupId,
    @Code,
    @Number,
    @Name,
    @Description,
    @InitPrice,
    @LastPrice,
    @FromDate,
    @ToDate,
    @RealFromDate,
    @RealToDate,
    @Status,
    @IsApprove,
    @IsActive,
    @IsPrinted,
    @CreationUserId,
    @CreationDate,
    @LastModificationUserId,
    @LastModificationDate
)
				
-- Get the identity value
SET @ContractId = SCOPE_IDENTITY()
									
							
			]]></body>
		</procedure>
		<procedure owner="dbo" name="Contract_Update" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Updates a record in the Contract table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@ContractId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@ConstructDeptId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@DesignDeptId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@GroupId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@Code" type="nvarchar" direction="Input" size="200" precision="0" scale="0" param="(200)" nulldefault=""/>
                <parameter name="@Number" type="nvarchar" direction="Input" size="200" precision="0" scale="0" param="(200)" nulldefault=""/>
                <parameter name="@Name" type="nvarchar" direction="Input" size="500" precision="0" scale="0" param="(500)" nulldefault=""/>
                <parameter name="@Description" type="ntext" direction="Input" size="16" precision="0" scale="0" param="" nulldefault=""/>
                <parameter name="@InitPrice" type="money" direction="Input" size="8" precision="19" scale="4" param="" nulldefault=""/>
                <parameter name="@LastPrice" type="money" direction="Input" size="8" precision="19" scale="4" param="" nulldefault=""/>
                <parameter name="@FromDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@ToDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@RealFromDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@RealToDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@Status" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@IsApprove" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@IsActive" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@IsPrinted" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@LastModificationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[

				
-- Modify the updatable columns
UPDATE
    dbo.[Contract]
SET
    [ConstructDeptId] = @ConstructDeptId,
    [DesignDeptId] = @DesignDeptId,
    [GroupId] = @GroupId,
    [Code] = @Code,
    [Number] = @Number,
    [Name] = @Name,
    [Description] = @Description,
    [InitPrice] = @InitPrice,
    [LastPrice] = @LastPrice,
    [FromDate] = @FromDate,
    [ToDate] = @ToDate,
    [RealFromDate] = @RealFromDate,
    [RealToDate] = @RealToDate,
    [Status] = @Status,
    [IsApprove] = @IsApprove,
    [IsActive] = @IsActive,
    [IsPrinted] = @IsPrinted,
    [CreationUserId] = @CreationUserId,
    [CreationDate] = @CreationDate,
    [LastModificationUserId] = @LastModificationUserId,
    [LastModificationDate] = @LastModificationDate
WHERE
    [ContractId] = @ContractId 

				
			]]></body>
		</procedure>
		<procedure owner="dbo" name="Contract_Delete" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Deletes a record in the Contract table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@ContractId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
DELETE FROM dbo.[Contract] WITH (ROWLOCK) 
WHERE
    [ContractId] = @ContractId
					
			]]></body>
		</procedure>
		<procedure owner="dbo" name="Contract_GetByConstructDeptId" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Select records from the Contract table through a foreign key
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@ConstructDeptId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
SET ANSI_NULLS OFF

SELECT
    [ContractId],
    [ConstructDeptId],
    [DesignDeptId],
    [GroupId],
    [Code],
    [Number],
    [Name],
    [Description],
    [InitPrice],
    [LastPrice],
    [FromDate],
    [ToDate],
    [RealFromDate],
    [RealToDate],
    [Status],
    [IsApprove],
    [IsActive],
    [IsPrinted],
    [CreationUserId],
    [CreationDate],
    [LastModificationUserId],
    [LastModificationDate]
FROM
    dbo.[Contract]
WHERE
    [ConstructDeptId] = @ConstructDeptId
				
Select @@ROWCOUNT
SET ANSI_NULLS ON
]]></body>
		</procedure>
		<procedure owner="dbo" name="Contract_GetByDesignDeptId" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Select records from the Contract table through a foreign key
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@DesignDeptId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
SET ANSI_NULLS OFF

SELECT
    [ContractId],
    [ConstructDeptId],
    [DesignDeptId],
    [GroupId],
    [Code],
    [Number],
    [Name],
    [Description],
    [InitPrice],
    [LastPrice],
    [FromDate],
    [ToDate],
    [RealFromDate],
    [RealToDate],
    [Status],
    [IsApprove],
    [IsActive],
    [IsPrinted],
    [CreationUserId],
    [CreationDate],
    [LastModificationUserId],
    [LastModificationDate]
FROM
    dbo.[Contract]
WHERE
    [DesignDeptId] = @DesignDeptId
				
Select @@ROWCOUNT
SET ANSI_NULLS ON
]]></body>
		</procedure>
		<procedure owner="dbo" name="Contract_GetByGroupId" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Select records from the Contract table through a foreign key
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@GroupId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
SET ANSI_NULLS OFF

SELECT
    [ContractId],
    [ConstructDeptId],
    [DesignDeptId],
    [GroupId],
    [Code],
    [Number],
    [Name],
    [Description],
    [InitPrice],
    [LastPrice],
    [FromDate],
    [ToDate],
    [RealFromDate],
    [RealToDate],
    [Status],
    [IsApprove],
    [IsActive],
    [IsPrinted],
    [CreationUserId],
    [CreationDate],
    [LastModificationUserId],
    [LastModificationDate]
FROM
    dbo.[Contract]
WHERE
    [GroupId] = @GroupId
				
Select @@ROWCOUNT
SET ANSI_NULLS ON
]]></body>
		</procedure>
		<procedure owner="dbo" name="Contract_GetByCreationUserId" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Select records from the Contract table through a foreign key
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
SET ANSI_NULLS OFF

SELECT
    [ContractId],
    [ConstructDeptId],
    [DesignDeptId],
    [GroupId],
    [Code],
    [Number],
    [Name],
    [Description],
    [InitPrice],
    [LastPrice],
    [FromDate],
    [ToDate],
    [RealFromDate],
    [RealToDate],
    [Status],
    [IsApprove],
    [IsActive],
    [IsPrinted],
    [CreationUserId],
    [CreationDate],
    [LastModificationUserId],
    [LastModificationDate]
FROM
    dbo.[Contract]
WHERE
    [CreationUserId] = @CreationUserId
				
Select @@ROWCOUNT
SET ANSI_NULLS ON
]]></body>
		</procedure>
		<procedure owner="dbo" name="Contract_GetByLastModificationUserId" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Select records from the Contract table through a foreign key
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
SET ANSI_NULLS OFF

SELECT
    [ContractId],
    [ConstructDeptId],
    [DesignDeptId],
    [GroupId],
    [Code],
    [Number],
    [Name],
    [Description],
    [InitPrice],
    [LastPrice],
    [FromDate],
    [ToDate],
    [RealFromDate],
    [RealToDate],
    [Status],
    [IsApprove],
    [IsActive],
    [IsPrinted],
    [CreationUserId],
    [CreationDate],
    [LastModificationUserId],
    [LastModificationDate]
FROM
    dbo.[Contract]
WHERE
    [LastModificationUserId] = @LastModificationUserId
				
Select @@ROWCOUNT
SET ANSI_NULLS ON
]]></body>
		</procedure>
		<procedure owner="dbo" name="Contract_GetByContractId" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Select records from the Contract table through an index
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@ContractId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
SELECT
    [ContractId],
    [ConstructDeptId],
    [DesignDeptId],
    [GroupId],
    [Code],
    [Number],
    [Name],
    [Description],
    [InitPrice],
    [LastPrice],
    [FromDate],
    [ToDate],
    [RealFromDate],
    [RealToDate],
    [Status],
    [IsApprove],
    [IsActive],
    [IsPrinted],
    [CreationUserId],
    [CreationDate],
    [LastModificationUserId],
    [LastModificationDate]
FROM
    dbo.[Contract]
WHERE
    [ContractId] = @ContractId
Select @@ROWCOUNT
					
]]></body>
			
		</procedure>
		<procedure owner="dbo" name="Contract_Find" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Finds records in the Contract table passing nullable parameters
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
				<parameter name="@SearchUsingOR" type="bit" direction="Input" size="0" precision="1" scale="0" param="" nulldefault="null"/>
                <parameter name="@ContractId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@ConstructDeptId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@DesignDeptId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@GroupId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@Code" type="nvarchar" direction="Input" size="200" precision="0" scale="0" param="(200)" nulldefault="null"/>
                <parameter name="@Number" type="nvarchar" direction="Input" size="200" precision="0" scale="0" param="(200)" nulldefault="null"/>
                <parameter name="@Name" type="nvarchar" direction="Input" size="500" precision="0" scale="0" param="(500)" nulldefault="null"/>
                <parameter name="@Description" type="ntext" direction="Input" size="16" precision="0" scale="0" param="" nulldefault="null"/>
                <parameter name="@InitPrice" type="money" direction="Input" size="8" precision="19" scale="4" param="" nulldefault="null"/>
                <parameter name="@LastPrice" type="money" direction="Input" size="8" precision="19" scale="4" param="" nulldefault="null"/>
                <parameter name="@FromDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault="null"/>
                <parameter name="@ToDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault="null"/>
                <parameter name="@RealFromDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault="null"/>
                <parameter name="@RealToDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault="null"/>
                <parameter name="@Status" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@IsApprove" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault="null"/>
                <parameter name="@IsActive" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault="null"/>
                <parameter name="@IsPrinted" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault="null"/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault="null"/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@LastModificationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault="null"/>
			</parameters>
			<body><![CDATA[

IF ISNULL(@SearchUsingOR, 0) <> 1
BEGIN
    SELECT
        [ContractId], 
        [ConstructDeptId], 
        [DesignDeptId], 
        [GroupId], 
        [Code], 
        [Number], 
        [Name], 
        [Description], 
        [InitPrice], 
        [LastPrice], 
        [FromDate], 
        [ToDate], 
        [RealFromDate], 
        [RealToDate], 
        [Status], 
        [IsApprove], 
        [IsActive], 
        [IsPrinted], 
        [CreationUserId], 
        [CreationDate], 
        [LastModificationUserId], 
        [LastModificationDate]
    FROM
        dbo.[Contract]
    WHERE 
     ([ContractId] = @ContractId OR @ContractId is null)
    AND ([ConstructDeptId] = @ConstructDeptId OR @ConstructDeptId is null)
    AND ([DesignDeptId] = @DesignDeptId OR @DesignDeptId is null)
    AND ([GroupId] = @GroupId OR @GroupId is null)
    AND ([Code] = @Code OR @Code is null)
    AND ([Number] = @Number OR @Number is null)
    AND ([Name] = @Name OR @Name is null)
    AND ([InitPrice] = @InitPrice OR @InitPrice is null)
    AND ([LastPrice] = @LastPrice OR @LastPrice is null)
    AND ([FromDate] = @FromDate OR @FromDate is null)
    AND ([ToDate] = @ToDate OR @ToDate is null)
    AND ([RealFromDate] = @RealFromDate OR @RealFromDate is null)
    AND ([RealToDate] = @RealToDate OR @RealToDate is null)
    AND ([Status] = @Status OR @Status is null)
    AND ([IsApprove] = @IsApprove OR @IsApprove is null)
    AND ([IsActive] = @IsActive OR @IsActive is null)
    AND ([IsPrinted] = @IsPrinted OR @IsPrinted is null)
    AND ([CreationUserId] = @CreationUserId OR @CreationUserId is null)
    AND ([CreationDate] = @CreationDate OR @CreationDate is null)
    AND ([LastModificationUserId] = @LastModificationUserId OR @LastModificationUserId is null)
    AND ([LastModificationDate] = @LastModificationDate OR @LastModificationDate is null)
END
ELSE
    BEGIN
        SELECT
            [ContractId], 
            [ConstructDeptId], 
            [DesignDeptId], 
            [GroupId], 
            [Code], 
            [Number], 
            [Name], 
            [Description], 
            [InitPrice], 
            [LastPrice], 
            [FromDate], 
            [ToDate], 
            [RealFromDate], 
            [RealToDate], 
            [Status], 
            [IsApprove], 
            [IsActive], 
            [IsPrinted], 
            [CreationUserId], 
            [CreationDate], 
            [LastModificationUserId], 
            [LastModificationDate]
        FROM
            dbo.[Contract]
        WHERE
     ([ContractId] = @ContractId AND @ContractId is not null)
    OR ([ConstructDeptId] = @ConstructDeptId AND @ConstructDeptId is not null)
    OR ([DesignDeptId] = @DesignDeptId AND @DesignDeptId is not null)
    OR ([GroupId] = @GroupId AND @GroupId is not null)
    OR ([Code] = @Code AND @Code is not null)
    OR ([Number] = @Number AND @Number is not null)
    OR ([Name] = @Name AND @Name is not null)
    OR ([InitPrice] = @InitPrice AND @InitPrice is not null)
    OR ([LastPrice] = @LastPrice AND @LastPrice is not null)
    OR ([FromDate] = @FromDate AND @FromDate is not null)
    OR ([ToDate] = @ToDate AND @ToDate is not null)
    OR ([RealFromDate] = @RealFromDate AND @RealFromDate is not null)
    OR ([RealToDate] = @RealToDate AND @RealToDate is not null)
    OR ([Status] = @Status AND @Status is not null)
    OR ([IsApprove] = @IsApprove AND @IsApprove is not null)
    OR ([IsActive] = @IsActive AND @IsActive is not null)
    OR ([IsPrinted] = @IsPrinted AND @IsPrinted is not null)
    OR ([CreationUserId] = @CreationUserId AND @CreationUserId is not null)
    OR ([CreationDate] = @CreationDate AND @CreationDate is not null)
    OR ([LastModificationUserId] = @LastModificationUserId AND @LastModificationUserId is not null)
    OR ([LastModificationDate] = @LastModificationDate AND @LastModificationDate is not null)
        Select @@ROWCOUNT			
    END
	]]></body>
		</procedure>

		
		<procedure owner="dbo" name="Contract_Find_Dynamic" grant="" skip="true">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets records from the Contract table using a dynamically generated query.
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters/>
			<body><![CDATA[

BEGIN
				
with PageIndex as (
	select top {3} row_number() over (order by {1}) as RowIndex
	, [ContractId]
	, [ConstructDeptId]
	, [DesignDeptId]
	, [GroupId]
	, [Code]
	, [Number]
	, [Name]
	, [Description]
	, [InitPrice]
	, [LastPrice]
	, [FromDate]
	, [ToDate]
	, [RealFromDate]
	, [RealToDate]
	, [Status]
	, [IsApprove]
	, [IsActive]
	, [IsPrinted]
	, [CreationUserId]
	, [CreationDate]
	, [LastModificationUserId]
	, [LastModificationDate]
	from dbo.[Contract] {0}
	)
select
    [ContractId],
    [ConstructDeptId],
    [DesignDeptId],
    [GroupId],
    [Code],
    [Number],
    [Name],
    [Description],
    [InitPrice],
    [LastPrice],
    [FromDate],
    [ToDate],
    [RealFromDate],
    [RealToDate],
    [Status],
    [IsApprove],
    [IsActive],
    [IsPrinted],
    [CreationUserId],
    [CreationDate],
    [LastModificationUserId],
    [LastModificationDate]
from PageIndex
where RowIndex > {2}
and RowIndex <= {3};
				

				-- get total count
				select count(*) as TotalRowCount from dbo.[Contract] {0};
			
				END
			]]></body>
		</procedure>
		
		
		<procedure owner="dbo" name="ItemInRepository_Get_List" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets all records from the ItemInRepository table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters/>
			<body><![CDATA[

SELECT
    [RepositoryId],
    [ItemId],
    [TotalQuantity],
    [AvailabelQuantity],
    [ReserveQuantity],
    [ReturnQuantity],
    [AdjustQuantity],
    [IsActive],
    [IsDeletable],
    [Status],
    [Priority],
    [BaseUnitId],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
FROM
    dbo.[ItemInRepository]
					
Select @@ROWCOUNT
]]></body>
		</procedure>
		
		
		<procedure owner="dbo" name="ItemInRepository_GetPaged" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets records from the ItemInRepository table passing page index and page count parameters
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
				<parameter name="@WhereClause" type="varchar" direction="Input" size="2000" precision="0" scale="0" param="(2000)" />
				<parameter name="@OrderBy" type="varchar" direction="Input" size="2000" precision="0" scale="0" param="(2000)"/>
				<parameter name="@PageIndex" type="int" direction="Input" size="0" precision="10" scale="0" />
				<parameter name="@PageSize" type="int" direction="Input" size="0" precision="10" scale="0" /> 
			</parameters>
			<body><![CDATA[

BEGIN
DECLARE @PageLowerBound int
DECLARE @PageUpperBound int
				
-- Set the page bounds
SET @PageLowerBound = @PageSize * @PageIndex
SET @PageUpperBound = @PageLowerBound + @PageSize

IF (@OrderBy is null or LEN(@OrderBy) < 1)
BEGIN
    -- default order by to first column
    SET @OrderBy = '[RepositoryId]'
END

-- SQL Server 2005 Paging
declare @SQL as nvarchar(4000)
SET @SQL = 'WITH PageIndex AS ('
SET @SQL = @SQL + ' SELECT'
IF @PageSize > 0
BEGIN
    SET @SQL = @SQL + ' TOP ' + convert(nvarchar, @PageUpperBound)
END
SET @SQL = @SQL + ' ROW_NUMBER() OVER (ORDER BY ' + @OrderBy + ') as RowIndex'
SET @SQL = @SQL + ', [RepositoryId]'
SET @SQL = @SQL + ', [ItemId]'
SET @SQL = @SQL + ', [TotalQuantity]'
SET @SQL = @SQL + ', [AvailabelQuantity]'
SET @SQL = @SQL + ', [ReserveQuantity]'
SET @SQL = @SQL + ', [ReturnQuantity]'
SET @SQL = @SQL + ', [AdjustQuantity]'
SET @SQL = @SQL + ', [IsActive]'
SET @SQL = @SQL + ', [IsDeletable]'
SET @SQL = @SQL + ', [Status]'
SET @SQL = @SQL + ', [Priority]'
SET @SQL = @SQL + ', [BaseUnitId]'
SET @SQL = @SQL + ', [CreationDate]'
SET @SQL = @SQL + ', [CreationUserId]'
SET @SQL = @SQL + ', [LastModificationDate]'
SET @SQL = @SQL + ', [LastModificationUserId]'
SET @SQL = @SQL + ' FROM dbo.[ItemInRepository]'
IF LEN(@WhereClause) > 0
BEGIN
    SET @SQL = @SQL + ' WHERE ' + @WhereClause
END
SET @SQL = @SQL + ' ) SELECT'
SET @SQL = @SQL + ' [RepositoryId],'
SET @SQL = @SQL + ' [ItemId],'
SET @SQL = @SQL + ' [TotalQuantity],'
SET @SQL = @SQL + ' [AvailabelQuantity],'
SET @SQL = @SQL + ' [ReserveQuantity],'
SET @SQL = @SQL + ' [ReturnQuantity],'
SET @SQL = @SQL + ' [AdjustQuantity],'
SET @SQL = @SQL + ' [IsActive],'
SET @SQL = @SQL + ' [IsDeletable],'
SET @SQL = @SQL + ' [Status],'
SET @SQL = @SQL + ' [Priority],'
SET @SQL = @SQL + ' [BaseUnitId],'
SET @SQL = @SQL + ' [CreationDate],'
SET @SQL = @SQL + ' [CreationUserId],'
SET @SQL = @SQL + ' [LastModificationDate],'
SET @SQL = @SQL + ' [LastModificationUserId]'
SET @SQL = @SQL + ' FROM PageIndex'
SET @SQL = @SQL + ' WHERE RowIndex > ' + convert(nvarchar, @PageLowerBound)
IF @PageSize > 0
BEGIN
    SET @SQL = @SQL + ' AND RowIndex <= ' + convert(nvarchar, @PageUpperBound)
END
exec sp_executesql @SQL
				
-- get row count
SET @SQL = 'SELECT COUNT(*) as TotalRowCount'
SET @SQL = @SQL + ' FROM dbo.[ItemInRepository]'
IF LEN(@WhereClause) > 0
BEGIN
    SET @SQL = @SQL + ' WHERE ' + @WhereClause
END
exec sp_executesql @SQL
			
END
]]></body>
		</procedure>
		
		<procedure owner="dbo" name="ItemInRepository_Insert" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Inserts a record into the ItemInRepository table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@RepositoryId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@ItemId" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
                <parameter name="@TotalQuantity" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
                <parameter name="@AvailabelQuantity" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
                <parameter name="@ReserveQuantity" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
                <parameter name="@ReturnQuantity" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
                <parameter name="@AdjustQuantity" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
                <parameter name="@IsActive" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@IsDeletable" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@Status" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@Priority" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@BaseUnitId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@LastModificationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
					
INSERT INTO dbo.[ItemInRepository]
(
    [RepositoryId],
    [ItemId],
    [TotalQuantity],
    [AvailabelQuantity],
    [ReserveQuantity],
    [ReturnQuantity],
    [AdjustQuantity],
    [IsActive],
    [IsDeletable],
    [Status],
    [Priority],
    [BaseUnitId],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
)
VALUES
(
    @RepositoryId,
    @ItemId,
    @TotalQuantity,
    @AvailabelQuantity,
    @ReserveQuantity,
    @ReturnQuantity,
    @AdjustQuantity,
    @IsActive,
    @IsDeletable,
    @Status,
    @Priority,
    @BaseUnitId,
    @CreationDate,
    @CreationUserId,
    @LastModificationDate,
    @LastModificationUserId
)
				
									
							
			]]></body>
		</procedure>
		<procedure owner="dbo" name="ItemInRepository_Update" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Updates a record in the ItemInRepository table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@RepositoryId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@OriginalRepositoryId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@ItemId" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
                <parameter name="@OriginalItemId" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
                <parameter name="@TotalQuantity" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
                <parameter name="@AvailabelQuantity" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
                <parameter name="@ReserveQuantity" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
                <parameter name="@ReturnQuantity" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
                <parameter name="@AdjustQuantity" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
                <parameter name="@IsActive" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@IsDeletable" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@Status" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@Priority" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@BaseUnitId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@LastModificationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[

				
-- Modify the updatable columns
UPDATE
    dbo.[ItemInRepository]
SET
    [RepositoryId] = @RepositoryId,
    [ItemId] = @ItemId,
    [TotalQuantity] = @TotalQuantity,
    [AvailabelQuantity] = @AvailabelQuantity,
    [ReserveQuantity] = @ReserveQuantity,
    [ReturnQuantity] = @ReturnQuantity,
    [AdjustQuantity] = @AdjustQuantity,
    [IsActive] = @IsActive,
    [IsDeletable] = @IsDeletable,
    [Status] = @Status,
    [Priority] = @Priority,
    [BaseUnitId] = @BaseUnitId,
    [CreationDate] = @CreationDate,
    [CreationUserId] = @CreationUserId,
    [LastModificationDate] = @LastModificationDate,
    [LastModificationUserId] = @LastModificationUserId
WHERE
    [RepositoryId] = @OriginalRepositoryId 
AND [ItemId] = @OriginalItemId 

				
			]]></body>
		</procedure>
		<procedure owner="dbo" name="ItemInRepository_Delete" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Deletes a record in the ItemInRepository table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@RepositoryId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@ItemId" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
DELETE FROM dbo.[ItemInRepository] WITH (ROWLOCK) 
WHERE
    [RepositoryId] = @RepositoryId
    AND [ItemId] = @ItemId
					
			]]></body>
		</procedure>
		<procedure owner="dbo" name="ItemInRepository_GetByItemId" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Select records from the ItemInRepository table through a foreign key
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@ItemId" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
SET ANSI_NULLS OFF

SELECT
    [RepositoryId],
    [ItemId],
    [TotalQuantity],
    [AvailabelQuantity],
    [ReserveQuantity],
    [ReturnQuantity],
    [AdjustQuantity],
    [IsActive],
    [IsDeletable],
    [Status],
    [Priority],
    [BaseUnitId],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
FROM
    dbo.[ItemInRepository]
WHERE
    [ItemId] = @ItemId
				
Select @@ROWCOUNT
SET ANSI_NULLS ON
]]></body>
		</procedure>
		<procedure owner="dbo" name="ItemInRepository_GetByRepositoryId" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Select records from the ItemInRepository table through a foreign key
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@RepositoryId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
SET ANSI_NULLS OFF

SELECT
    [RepositoryId],
    [ItemId],
    [TotalQuantity],
    [AvailabelQuantity],
    [ReserveQuantity],
    [ReturnQuantity],
    [AdjustQuantity],
    [IsActive],
    [IsDeletable],
    [Status],
    [Priority],
    [BaseUnitId],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
FROM
    dbo.[ItemInRepository]
WHERE
    [RepositoryId] = @RepositoryId
				
Select @@ROWCOUNT
SET ANSI_NULLS ON
]]></body>
		</procedure>
		<procedure owner="dbo" name="ItemInRepository_GetByRepositoryIdItemId" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Select records from the ItemInRepository table through an index
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@RepositoryId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@ItemId" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
SELECT
    [RepositoryId],
    [ItemId],
    [TotalQuantity],
    [AvailabelQuantity],
    [ReserveQuantity],
    [ReturnQuantity],
    [AdjustQuantity],
    [IsActive],
    [IsDeletable],
    [Status],
    [Priority],
    [BaseUnitId],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
FROM
    dbo.[ItemInRepository]
WHERE
    [RepositoryId] = @RepositoryId
    AND [ItemId] = @ItemId
Select @@ROWCOUNT
					
]]></body>
			
		</procedure>
		<procedure owner="dbo" name="ItemInRepository_Find" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Finds records in the ItemInRepository table passing nullable parameters
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
				<parameter name="@SearchUsingOR" type="bit" direction="Input" size="0" precision="1" scale="0" param="" nulldefault="null"/>
                <parameter name="@RepositoryId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@ItemId" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault="null"/>
                <parameter name="@TotalQuantity" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault="null"/>
                <parameter name="@AvailabelQuantity" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault="null"/>
                <parameter name="@ReserveQuantity" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault="null"/>
                <parameter name="@ReturnQuantity" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault="null"/>
                <parameter name="@AdjustQuantity" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault="null"/>
                <parameter name="@IsActive" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault="null"/>
                <parameter name="@IsDeletable" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault="null"/>
                <parameter name="@Status" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@Priority" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@BaseUnitId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault="null"/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@LastModificationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault="null"/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
			</parameters>
			<body><![CDATA[

IF ISNULL(@SearchUsingOR, 0) <> 1
BEGIN
    SELECT
        [RepositoryId], 
        [ItemId], 
        [TotalQuantity], 
        [AvailabelQuantity], 
        [ReserveQuantity], 
        [ReturnQuantity], 
        [AdjustQuantity], 
        [IsActive], 
        [IsDeletable], 
        [Status], 
        [Priority], 
        [BaseUnitId], 
        [CreationDate], 
        [CreationUserId], 
        [LastModificationDate], 
        [LastModificationUserId]
    FROM
        dbo.[ItemInRepository]
    WHERE 
     ([RepositoryId] = @RepositoryId OR @RepositoryId is null)
    AND ([ItemId] = @ItemId OR @ItemId is null)
    AND ([TotalQuantity] = @TotalQuantity OR @TotalQuantity is null)
    AND ([AvailabelQuantity] = @AvailabelQuantity OR @AvailabelQuantity is null)
    AND ([ReserveQuantity] = @ReserveQuantity OR @ReserveQuantity is null)
    AND ([ReturnQuantity] = @ReturnQuantity OR @ReturnQuantity is null)
    AND ([AdjustQuantity] = @AdjustQuantity OR @AdjustQuantity is null)
    AND ([IsActive] = @IsActive OR @IsActive is null)
    AND ([IsDeletable] = @IsDeletable OR @IsDeletable is null)
    AND ([Status] = @Status OR @Status is null)
    AND ([Priority] = @Priority OR @Priority is null)
    AND ([BaseUnitId] = @BaseUnitId OR @BaseUnitId is null)
    AND ([CreationDate] = @CreationDate OR @CreationDate is null)
    AND ([CreationUserId] = @CreationUserId OR @CreationUserId is null)
    AND ([LastModificationDate] = @LastModificationDate OR @LastModificationDate is null)
    AND ([LastModificationUserId] = @LastModificationUserId OR @LastModificationUserId is null)
END
ELSE
    BEGIN
        SELECT
            [RepositoryId], 
            [ItemId], 
            [TotalQuantity], 
            [AvailabelQuantity], 
            [ReserveQuantity], 
            [ReturnQuantity], 
            [AdjustQuantity], 
            [IsActive], 
            [IsDeletable], 
            [Status], 
            [Priority], 
            [BaseUnitId], 
            [CreationDate], 
            [CreationUserId], 
            [LastModificationDate], 
            [LastModificationUserId]
        FROM
            dbo.[ItemInRepository]
        WHERE
     ([RepositoryId] = @RepositoryId AND @RepositoryId is not null)
    OR ([ItemId] = @ItemId AND @ItemId is not null)
    OR ([TotalQuantity] = @TotalQuantity AND @TotalQuantity is not null)
    OR ([AvailabelQuantity] = @AvailabelQuantity AND @AvailabelQuantity is not null)
    OR ([ReserveQuantity] = @ReserveQuantity AND @ReserveQuantity is not null)
    OR ([ReturnQuantity] = @ReturnQuantity AND @ReturnQuantity is not null)
    OR ([AdjustQuantity] = @AdjustQuantity AND @AdjustQuantity is not null)
    OR ([IsActive] = @IsActive AND @IsActive is not null)
    OR ([IsDeletable] = @IsDeletable AND @IsDeletable is not null)
    OR ([Status] = @Status AND @Status is not null)
    OR ([Priority] = @Priority AND @Priority is not null)
    OR ([BaseUnitId] = @BaseUnitId AND @BaseUnitId is not null)
    OR ([CreationDate] = @CreationDate AND @CreationDate is not null)
    OR ([CreationUserId] = @CreationUserId AND @CreationUserId is not null)
    OR ([LastModificationDate] = @LastModificationDate AND @LastModificationDate is not null)
    OR ([LastModificationUserId] = @LastModificationUserId AND @LastModificationUserId is not null)
        Select @@ROWCOUNT			
    END
	]]></body>
		</procedure>

		
		<procedure owner="dbo" name="ItemInRepository_Find_Dynamic" grant="" skip="true">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets records from the ItemInRepository table using a dynamically generated query.
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters/>
			<body><![CDATA[

BEGIN
				
with PageIndex as (
	select top {3} row_number() over (order by {1}) as RowIndex
	, [RepositoryId]
	, [ItemId]
	, [TotalQuantity]
	, [AvailabelQuantity]
	, [ReserveQuantity]
	, [ReturnQuantity]
	, [AdjustQuantity]
	, [IsActive]
	, [IsDeletable]
	, [Status]
	, [Priority]
	, [BaseUnitId]
	, [CreationDate]
	, [CreationUserId]
	, [LastModificationDate]
	, [LastModificationUserId]
	from dbo.[ItemInRepository] {0}
	)
select
    [RepositoryId],
    [ItemId],
    [TotalQuantity],
    [AvailabelQuantity],
    [ReserveQuantity],
    [ReturnQuantity],
    [AdjustQuantity],
    [IsActive],
    [IsDeletable],
    [Status],
    [Priority],
    [BaseUnitId],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
from PageIndex
where RowIndex > {2}
and RowIndex <= {3};
				

				-- get total count
				select count(*) as TotalRowCount from dbo.[ItemInRepository] {0};
			
				END
			]]></body>
		</procedure>
		
		
		<procedure owner="dbo" name="ItemInProject_Get_List" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets all records from the ItemInProject table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters/>
			<body><![CDATA[

SELECT
    [ItemInProjectId],
    [ItemId],
    [ProjectId],
    [ContractId],
    [Quantity],
    [UnitPrice],
    [Total],
    [IsActive],
    [IsApprove],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
FROM
    dbo.[ItemInProject]
					
Select @@ROWCOUNT
]]></body>
		</procedure>
		
		
		<procedure owner="dbo" name="ItemInProject_GetPaged" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets records from the ItemInProject table passing page index and page count parameters
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
				<parameter name="@WhereClause" type="varchar" direction="Input" size="2000" precision="0" scale="0" param="(2000)" />
				<parameter name="@OrderBy" type="varchar" direction="Input" size="2000" precision="0" scale="0" param="(2000)"/>
				<parameter name="@PageIndex" type="int" direction="Input" size="0" precision="10" scale="0" />
				<parameter name="@PageSize" type="int" direction="Input" size="0" precision="10" scale="0" /> 
			</parameters>
			<body><![CDATA[

BEGIN
DECLARE @PageLowerBound int
DECLARE @PageUpperBound int
				
-- Set the page bounds
SET @PageLowerBound = @PageSize * @PageIndex
SET @PageUpperBound = @PageLowerBound + @PageSize

IF (@OrderBy is null or LEN(@OrderBy) < 1)
BEGIN
    -- default order by to first column
    SET @OrderBy = '[ItemInProjectId]'
END

-- SQL Server 2005 Paging
declare @SQL as nvarchar(4000)
SET @SQL = 'WITH PageIndex AS ('
SET @SQL = @SQL + ' SELECT'
IF @PageSize > 0
BEGIN
    SET @SQL = @SQL + ' TOP ' + convert(nvarchar, @PageUpperBound)
END
SET @SQL = @SQL + ' ROW_NUMBER() OVER (ORDER BY ' + @OrderBy + ') as RowIndex'
SET @SQL = @SQL + ', [ItemInProjectId]'
SET @SQL = @SQL + ', [ItemId]'
SET @SQL = @SQL + ', [ProjectId]'
SET @SQL = @SQL + ', [ContractId]'
SET @SQL = @SQL + ', [Quantity]'
SET @SQL = @SQL + ', [UnitPrice]'
SET @SQL = @SQL + ', [Total]'
SET @SQL = @SQL + ', [IsActive]'
SET @SQL = @SQL + ', [IsApprove]'
SET @SQL = @SQL + ', [CreationDate]'
SET @SQL = @SQL + ', [CreationUserId]'
SET @SQL = @SQL + ', [LastModificationDate]'
SET @SQL = @SQL + ', [LastModificationUserId]'
SET @SQL = @SQL + ' FROM dbo.[ItemInProject]'
IF LEN(@WhereClause) > 0
BEGIN
    SET @SQL = @SQL + ' WHERE ' + @WhereClause
END
SET @SQL = @SQL + ' ) SELECT'
SET @SQL = @SQL + ' [ItemInProjectId],'
SET @SQL = @SQL + ' [ItemId],'
SET @SQL = @SQL + ' [ProjectId],'
SET @SQL = @SQL + ' [ContractId],'
SET @SQL = @SQL + ' [Quantity],'
SET @SQL = @SQL + ' [UnitPrice],'
SET @SQL = @SQL + ' [Total],'
SET @SQL = @SQL + ' [IsActive],'
SET @SQL = @SQL + ' [IsApprove],'
SET @SQL = @SQL + ' [CreationDate],'
SET @SQL = @SQL + ' [CreationUserId],'
SET @SQL = @SQL + ' [LastModificationDate],'
SET @SQL = @SQL + ' [LastModificationUserId]'
SET @SQL = @SQL + ' FROM PageIndex'
SET @SQL = @SQL + ' WHERE RowIndex > ' + convert(nvarchar, @PageLowerBound)
IF @PageSize > 0
BEGIN
    SET @SQL = @SQL + ' AND RowIndex <= ' + convert(nvarchar, @PageUpperBound)
END
exec sp_executesql @SQL
				
-- get row count
SET @SQL = 'SELECT COUNT(*) as TotalRowCount'
SET @SQL = @SQL + ' FROM dbo.[ItemInProject]'
IF LEN(@WhereClause) > 0
BEGIN
    SET @SQL = @SQL + ' WHERE ' + @WhereClause
END
exec sp_executesql @SQL
			
END
]]></body>
		</procedure>
		
		<procedure owner="dbo" name="ItemInProject_Insert" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Inserts a record into the ItemInProject table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@ItemInProjectId" type="int" direction="Output" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@ItemId" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
                <parameter name="@ProjectId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@ContractId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@Quantity" type="float" direction="Input" size="8" precision="53" scale="0" param="" nulldefault=""/>
                <parameter name="@UnitPrice" type="money" direction="Input" size="8" precision="19" scale="4" param="" nulldefault=""/>
                <parameter name="@Total" type="money" direction="Input" size="8" precision="19" scale="4" param="" nulldefault=""/>
                <parameter name="@IsActive" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@IsApprove" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@LastModificationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
					
INSERT INTO dbo.[ItemInProject]
(
    [ItemId],
    [ProjectId],
    [ContractId],
    [Quantity],
    [UnitPrice],
    [Total],
    [IsActive],
    [IsApprove],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
)
VALUES
(
    @ItemId,
    @ProjectId,
    @ContractId,
    @Quantity,
    @UnitPrice,
    @Total,
    @IsActive,
    @IsApprove,
    @CreationDate,
    @CreationUserId,
    @LastModificationDate,
    @LastModificationUserId
)
				
-- Get the identity value
SET @ItemInProjectId = SCOPE_IDENTITY()
									
							
			]]></body>
		</procedure>
		<procedure owner="dbo" name="ItemInProject_Update" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Updates a record in the ItemInProject table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@ItemInProjectId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@ItemId" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
                <parameter name="@ProjectId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@ContractId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@Quantity" type="float" direction="Input" size="8" precision="53" scale="0" param="" nulldefault=""/>
                <parameter name="@UnitPrice" type="money" direction="Input" size="8" precision="19" scale="4" param="" nulldefault=""/>
                <parameter name="@Total" type="money" direction="Input" size="8" precision="19" scale="4" param="" nulldefault=""/>
                <parameter name="@IsActive" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@IsApprove" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@LastModificationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[

				
-- Modify the updatable columns
UPDATE
    dbo.[ItemInProject]
SET
    [ItemId] = @ItemId,
    [ProjectId] = @ProjectId,
    [ContractId] = @ContractId,
    [Quantity] = @Quantity,
    [UnitPrice] = @UnitPrice,
    [Total] = @Total,
    [IsActive] = @IsActive,
    [IsApprove] = @IsApprove,
    [CreationDate] = @CreationDate,
    [CreationUserId] = @CreationUserId,
    [LastModificationDate] = @LastModificationDate,
    [LastModificationUserId] = @LastModificationUserId
WHERE
    [ItemInProjectId] = @ItemInProjectId 

				
			]]></body>
		</procedure>
		<procedure owner="dbo" name="ItemInProject_Delete" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Deletes a record in the ItemInProject table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@ItemInProjectId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
DELETE FROM dbo.[ItemInProject] WITH (ROWLOCK) 
WHERE
    [ItemInProjectId] = @ItemInProjectId
					
			]]></body>
		</procedure>
		<procedure owner="dbo" name="ItemInProject_GetByContractId" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Select records from the ItemInProject table through a foreign key
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@ContractId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
SET ANSI_NULLS OFF

SELECT
    [ItemInProjectId],
    [ItemId],
    [ProjectId],
    [ContractId],
    [Quantity],
    [UnitPrice],
    [Total],
    [IsActive],
    [IsApprove],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
FROM
    dbo.[ItemInProject]
WHERE
    [ContractId] = @ContractId
				
Select @@ROWCOUNT
SET ANSI_NULLS ON
]]></body>
		</procedure>
		<procedure owner="dbo" name="ItemInProject_GetByProjectId" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Select records from the ItemInProject table through a foreign key
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@ProjectId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
SET ANSI_NULLS OFF

SELECT
    [ItemInProjectId],
    [ItemId],
    [ProjectId],
    [ContractId],
    [Quantity],
    [UnitPrice],
    [Total],
    [IsActive],
    [IsApprove],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
FROM
    dbo.[ItemInProject]
WHERE
    [ProjectId] = @ProjectId
				
Select @@ROWCOUNT
SET ANSI_NULLS ON
]]></body>
		</procedure>
		<procedure owner="dbo" name="ItemInProject_GetByItemId" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Select records from the ItemInProject table through a foreign key
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@ItemId" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
SET ANSI_NULLS OFF

SELECT
    [ItemInProjectId],
    [ItemId],
    [ProjectId],
    [ContractId],
    [Quantity],
    [UnitPrice],
    [Total],
    [IsActive],
    [IsApprove],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
FROM
    dbo.[ItemInProject]
WHERE
    [ItemId] = @ItemId
				
Select @@ROWCOUNT
SET ANSI_NULLS ON
]]></body>
		</procedure>
		<procedure owner="dbo" name="ItemInProject_GetByItemInProjectId" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Select records from the ItemInProject table through an index
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@ItemInProjectId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
SELECT
    [ItemInProjectId],
    [ItemId],
    [ProjectId],
    [ContractId],
    [Quantity],
    [UnitPrice],
    [Total],
    [IsActive],
    [IsApprove],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
FROM
    dbo.[ItemInProject]
WHERE
    [ItemInProjectId] = @ItemInProjectId
Select @@ROWCOUNT
					
]]></body>
			
		</procedure>
		<procedure owner="dbo" name="ItemInProject_Find" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Finds records in the ItemInProject table passing nullable parameters
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
				<parameter name="@SearchUsingOR" type="bit" direction="Input" size="0" precision="1" scale="0" param="" nulldefault="null"/>
                <parameter name="@ItemInProjectId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@ItemId" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault="null"/>
                <parameter name="@ProjectId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@ContractId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@Quantity" type="float" direction="Input" size="8" precision="53" scale="0" param="" nulldefault="null"/>
                <parameter name="@UnitPrice" type="money" direction="Input" size="8" precision="19" scale="4" param="" nulldefault="null"/>
                <parameter name="@Total" type="money" direction="Input" size="8" precision="19" scale="4" param="" nulldefault="null"/>
                <parameter name="@IsActive" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault="null"/>
                <parameter name="@IsApprove" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault="null"/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault="null"/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@LastModificationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault="null"/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
			</parameters>
			<body><![CDATA[

IF ISNULL(@SearchUsingOR, 0) <> 1
BEGIN
    SELECT
        [ItemInProjectId], 
        [ItemId], 
        [ProjectId], 
        [ContractId], 
        [Quantity], 
        [UnitPrice], 
        [Total], 
        [IsActive], 
        [IsApprove], 
        [CreationDate], 
        [CreationUserId], 
        [LastModificationDate], 
        [LastModificationUserId]
    FROM
        dbo.[ItemInProject]
    WHERE 
     ([ItemInProjectId] = @ItemInProjectId OR @ItemInProjectId is null)
    AND ([ItemId] = @ItemId OR @ItemId is null)
    AND ([ProjectId] = @ProjectId OR @ProjectId is null)
    AND ([ContractId] = @ContractId OR @ContractId is null)
    AND ([Quantity] = @Quantity OR @Quantity is null)
    AND ([UnitPrice] = @UnitPrice OR @UnitPrice is null)
    AND ([Total] = @Total OR @Total is null)
    AND ([IsActive] = @IsActive OR @IsActive is null)
    AND ([IsApprove] = @IsApprove OR @IsApprove is null)
    AND ([CreationDate] = @CreationDate OR @CreationDate is null)
    AND ([CreationUserId] = @CreationUserId OR @CreationUserId is null)
    AND ([LastModificationDate] = @LastModificationDate OR @LastModificationDate is null)
    AND ([LastModificationUserId] = @LastModificationUserId OR @LastModificationUserId is null)
END
ELSE
    BEGIN
        SELECT
            [ItemInProjectId], 
            [ItemId], 
            [ProjectId], 
            [ContractId], 
            [Quantity], 
            [UnitPrice], 
            [Total], 
            [IsActive], 
            [IsApprove], 
            [CreationDate], 
            [CreationUserId], 
            [LastModificationDate], 
            [LastModificationUserId]
        FROM
            dbo.[ItemInProject]
        WHERE
     ([ItemInProjectId] = @ItemInProjectId AND @ItemInProjectId is not null)
    OR ([ItemId] = @ItemId AND @ItemId is not null)
    OR ([ProjectId] = @ProjectId AND @ProjectId is not null)
    OR ([ContractId] = @ContractId AND @ContractId is not null)
    OR ([Quantity] = @Quantity AND @Quantity is not null)
    OR ([UnitPrice] = @UnitPrice AND @UnitPrice is not null)
    OR ([Total] = @Total AND @Total is not null)
    OR ([IsActive] = @IsActive AND @IsActive is not null)
    OR ([IsApprove] = @IsApprove AND @IsApprove is not null)
    OR ([CreationDate] = @CreationDate AND @CreationDate is not null)
    OR ([CreationUserId] = @CreationUserId AND @CreationUserId is not null)
    OR ([LastModificationDate] = @LastModificationDate AND @LastModificationDate is not null)
    OR ([LastModificationUserId] = @LastModificationUserId AND @LastModificationUserId is not null)
        Select @@ROWCOUNT			
    END
	]]></body>
		</procedure>

		
		<procedure owner="dbo" name="ItemInProject_Find_Dynamic" grant="" skip="true">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets records from the ItemInProject table using a dynamically generated query.
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters/>
			<body><![CDATA[

BEGIN
				
with PageIndex as (
	select top {3} row_number() over (order by {1}) as RowIndex
	, [ItemInProjectId]
	, [ItemId]
	, [ProjectId]
	, [ContractId]
	, [Quantity]
	, [UnitPrice]
	, [Total]
	, [IsActive]
	, [IsApprove]
	, [CreationDate]
	, [CreationUserId]
	, [LastModificationDate]
	, [LastModificationUserId]
	from dbo.[ItemInProject] {0}
	)
select
    [ItemInProjectId],
    [ItemId],
    [ProjectId],
    [ContractId],
    [Quantity],
    [UnitPrice],
    [Total],
    [IsActive],
    [IsApprove],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
from PageIndex
where RowIndex > {2}
and RowIndex <= {3};
				

				-- get total count
				select count(*) as TotalRowCount from dbo.[ItemInProject] {0};
			
				END
			]]></body>
		</procedure>
		
		
		<procedure owner="dbo" name="Partner_Get_List" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets all records from the Partner table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters/>
			<body><![CDATA[

SELECT
    [PartnerId],
    [GroupId],
    [Code],
    [Name],
    [NameInEng],
    [TaxCode],
    [Priority],
    [Address],
    [Phone],
    [Fax],
    [Email],
    [IsDeletable],
    [IsActive],
    [Comment],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
FROM
    dbo.[Partner]
					
Select @@ROWCOUNT
]]></body>
		</procedure>
		
		
		<procedure owner="dbo" name="Partner_GetPaged" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets records from the Partner table passing page index and page count parameters
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
				<parameter name="@WhereClause" type="varchar" direction="Input" size="2000" precision="0" scale="0" param="(2000)" />
				<parameter name="@OrderBy" type="varchar" direction="Input" size="2000" precision="0" scale="0" param="(2000)"/>
				<parameter name="@PageIndex" type="int" direction="Input" size="0" precision="10" scale="0" />
				<parameter name="@PageSize" type="int" direction="Input" size="0" precision="10" scale="0" /> 
			</parameters>
			<body><![CDATA[

BEGIN
DECLARE @PageLowerBound int
DECLARE @PageUpperBound int
				
-- Set the page bounds
SET @PageLowerBound = @PageSize * @PageIndex
SET @PageUpperBound = @PageLowerBound + @PageSize

IF (@OrderBy is null or LEN(@OrderBy) < 1)
BEGIN
    -- default order by to first column
    SET @OrderBy = '[PartnerId]'
END

-- SQL Server 2005 Paging
declare @SQL as nvarchar(4000)
SET @SQL = 'WITH PageIndex AS ('
SET @SQL = @SQL + ' SELECT'
IF @PageSize > 0
BEGIN
    SET @SQL = @SQL + ' TOP ' + convert(nvarchar, @PageUpperBound)
END
SET @SQL = @SQL + ' ROW_NUMBER() OVER (ORDER BY ' + @OrderBy + ') as RowIndex'
SET @SQL = @SQL + ', [PartnerId]'
SET @SQL = @SQL + ', [GroupId]'
SET @SQL = @SQL + ', [Code]'
SET @SQL = @SQL + ', [Name]'
SET @SQL = @SQL + ', [NameInEng]'
SET @SQL = @SQL + ', [TaxCode]'
SET @SQL = @SQL + ', [Priority]'
SET @SQL = @SQL + ', [Address]'
SET @SQL = @SQL + ', [Phone]'
SET @SQL = @SQL + ', [Fax]'
SET @SQL = @SQL + ', [Email]'
SET @SQL = @SQL + ', [IsDeletable]'
SET @SQL = @SQL + ', [IsActive]'
SET @SQL = @SQL + ', [Comment]'
SET @SQL = @SQL + ', [CreationDate]'
SET @SQL = @SQL + ', [CreationUserId]'
SET @SQL = @SQL + ', [LastModificationDate]'
SET @SQL = @SQL + ', [LastModificationUserId]'
SET @SQL = @SQL + ' FROM dbo.[Partner]'
IF LEN(@WhereClause) > 0
BEGIN
    SET @SQL = @SQL + ' WHERE ' + @WhereClause
END
SET @SQL = @SQL + ' ) SELECT'
SET @SQL = @SQL + ' [PartnerId],'
SET @SQL = @SQL + ' [GroupId],'
SET @SQL = @SQL + ' [Code],'
SET @SQL = @SQL + ' [Name],'
SET @SQL = @SQL + ' [NameInEng],'
SET @SQL = @SQL + ' [TaxCode],'
SET @SQL = @SQL + ' [Priority],'
SET @SQL = @SQL + ' [Address],'
SET @SQL = @SQL + ' [Phone],'
SET @SQL = @SQL + ' [Fax],'
SET @SQL = @SQL + ' [Email],'
SET @SQL = @SQL + ' [IsDeletable],'
SET @SQL = @SQL + ' [IsActive],'
SET @SQL = @SQL + ' [Comment],'
SET @SQL = @SQL + ' [CreationDate],'
SET @SQL = @SQL + ' [CreationUserId],'
SET @SQL = @SQL + ' [LastModificationDate],'
SET @SQL = @SQL + ' [LastModificationUserId]'
SET @SQL = @SQL + ' FROM PageIndex'
SET @SQL = @SQL + ' WHERE RowIndex > ' + convert(nvarchar, @PageLowerBound)
IF @PageSize > 0
BEGIN
    SET @SQL = @SQL + ' AND RowIndex <= ' + convert(nvarchar, @PageUpperBound)
END
exec sp_executesql @SQL
				
-- get row count
SET @SQL = 'SELECT COUNT(*) as TotalRowCount'
SET @SQL = @SQL + ' FROM dbo.[Partner]'
IF LEN(@WhereClause) > 0
BEGIN
    SET @SQL = @SQL + ' WHERE ' + @WhereClause
END
exec sp_executesql @SQL
			
END
]]></body>
		</procedure>
		
		<procedure owner="dbo" name="Partner_Insert" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Inserts a record into the Partner table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@PartnerId" type="int" direction="Output" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@GroupId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@Code" type="nvarchar" direction="Input" size="50" precision="0" scale="0" param="(50)" nulldefault=""/>
                <parameter name="@Name" type="nvarchar" direction="Input" size="500" precision="0" scale="0" param="(500)" nulldefault=""/>
                <parameter name="@NameInEng" type="varchar" direction="Input" size="500" precision="0" scale="0" param="(500)" nulldefault=""/>
                <parameter name="@TaxCode" type="varchar" direction="Input" size="50" precision="0" scale="0" param="(50)" nulldefault=""/>
                <parameter name="@Priority" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@Address" type="nvarchar" direction="Input" size="500" precision="0" scale="0" param="(500)" nulldefault=""/>
                <parameter name="@Phone" type="varchar" direction="Input" size="200" precision="0" scale="0" param="(200)" nulldefault=""/>
                <parameter name="@Fax" type="varchar" direction="Input" size="200" precision="0" scale="0" param="(200)" nulldefault=""/>
                <parameter name="@Email" type="varchar" direction="Input" size="200" precision="0" scale="0" param="(200)" nulldefault=""/>
                <parameter name="@IsDeletable" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@IsActive" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@Comment" type="ntext" direction="Input" size="16" precision="0" scale="0" param="" nulldefault=""/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@LastModificationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
					
INSERT INTO dbo.[Partner]
(
    [GroupId],
    [Code],
    [Name],
    [NameInEng],
    [TaxCode],
    [Priority],
    [Address],
    [Phone],
    [Fax],
    [Email],
    [IsDeletable],
    [IsActive],
    [Comment],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
)
VALUES
(
    @GroupId,
    @Code,
    @Name,
    @NameInEng,
    @TaxCode,
    @Priority,
    @Address,
    @Phone,
    @Fax,
    @Email,
    @IsDeletable,
    @IsActive,
    @Comment,
    @CreationDate,
    @CreationUserId,
    @LastModificationDate,
    @LastModificationUserId
)
				
-- Get the identity value
SET @PartnerId = SCOPE_IDENTITY()
									
							
			]]></body>
		</procedure>
		<procedure owner="dbo" name="Partner_Update" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Updates a record in the Partner table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@PartnerId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@GroupId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@Code" type="nvarchar" direction="Input" size="50" precision="0" scale="0" param="(50)" nulldefault=""/>
                <parameter name="@Name" type="nvarchar" direction="Input" size="500" precision="0" scale="0" param="(500)" nulldefault=""/>
                <parameter name="@NameInEng" type="varchar" direction="Input" size="500" precision="0" scale="0" param="(500)" nulldefault=""/>
                <parameter name="@TaxCode" type="varchar" direction="Input" size="50" precision="0" scale="0" param="(50)" nulldefault=""/>
                <parameter name="@Priority" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@Address" type="nvarchar" direction="Input" size="500" precision="0" scale="0" param="(500)" nulldefault=""/>
                <parameter name="@Phone" type="varchar" direction="Input" size="200" precision="0" scale="0" param="(200)" nulldefault=""/>
                <parameter name="@Fax" type="varchar" direction="Input" size="200" precision="0" scale="0" param="(200)" nulldefault=""/>
                <parameter name="@Email" type="varchar" direction="Input" size="200" precision="0" scale="0" param="(200)" nulldefault=""/>
                <parameter name="@IsDeletable" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@IsActive" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@Comment" type="ntext" direction="Input" size="16" precision="0" scale="0" param="" nulldefault=""/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@LastModificationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[

				
-- Modify the updatable columns
UPDATE
    dbo.[Partner]
SET
    [GroupId] = @GroupId,
    [Code] = @Code,
    [Name] = @Name,
    [NameInEng] = @NameInEng,
    [TaxCode] = @TaxCode,
    [Priority] = @Priority,
    [Address] = @Address,
    [Phone] = @Phone,
    [Fax] = @Fax,
    [Email] = @Email,
    [IsDeletable] = @IsDeletable,
    [IsActive] = @IsActive,
    [Comment] = @Comment,
    [CreationDate] = @CreationDate,
    [CreationUserId] = @CreationUserId,
    [LastModificationDate] = @LastModificationDate,
    [LastModificationUserId] = @LastModificationUserId
WHERE
    [PartnerId] = @PartnerId 

				
			]]></body>
		</procedure>
		<procedure owner="dbo" name="Partner_Delete" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Deletes a record in the Partner table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@PartnerId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
DELETE FROM dbo.[Partner] WITH (ROWLOCK) 
WHERE
    [PartnerId] = @PartnerId
					
			]]></body>
		</procedure>
		<procedure owner="dbo" name="Partner_GetByPartnerId" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Select records from the Partner table through an index
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@PartnerId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
SELECT
    [PartnerId],
    [GroupId],
    [Code],
    [Name],
    [NameInEng],
    [TaxCode],
    [Priority],
    [Address],
    [Phone],
    [Fax],
    [Email],
    [IsDeletable],
    [IsActive],
    [Comment],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
FROM
    dbo.[Partner]
WHERE
    [PartnerId] = @PartnerId
Select @@ROWCOUNT
					
]]></body>
			
		</procedure>
		<procedure owner="dbo" name="Partner_Find" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Finds records in the Partner table passing nullable parameters
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
				<parameter name="@SearchUsingOR" type="bit" direction="Input" size="0" precision="1" scale="0" param="" nulldefault="null"/>
                <parameter name="@PartnerId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@GroupId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@Code" type="nvarchar" direction="Input" size="50" precision="0" scale="0" param="(50)" nulldefault="null"/>
                <parameter name="@Name" type="nvarchar" direction="Input" size="500" precision="0" scale="0" param="(500)" nulldefault="null"/>
                <parameter name="@NameInEng" type="varchar" direction="Input" size="500" precision="0" scale="0" param="(500)" nulldefault="null"/>
                <parameter name="@TaxCode" type="varchar" direction="Input" size="50" precision="0" scale="0" param="(50)" nulldefault="null"/>
                <parameter name="@Priority" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@Address" type="nvarchar" direction="Input" size="500" precision="0" scale="0" param="(500)" nulldefault="null"/>
                <parameter name="@Phone" type="varchar" direction="Input" size="200" precision="0" scale="0" param="(200)" nulldefault="null"/>
                <parameter name="@Fax" type="varchar" direction="Input" size="200" precision="0" scale="0" param="(200)" nulldefault="null"/>
                <parameter name="@Email" type="varchar" direction="Input" size="200" precision="0" scale="0" param="(200)" nulldefault="null"/>
                <parameter name="@IsDeletable" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault="null"/>
                <parameter name="@IsActive" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault="null"/>
                <parameter name="@Comment" type="ntext" direction="Input" size="16" precision="0" scale="0" param="" nulldefault="null"/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault="null"/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@LastModificationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault="null"/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
			</parameters>
			<body><![CDATA[

IF ISNULL(@SearchUsingOR, 0) <> 1
BEGIN
    SELECT
        [PartnerId], 
        [GroupId], 
        [Code], 
        [Name], 
        [NameInEng], 
        [TaxCode], 
        [Priority], 
        [Address], 
        [Phone], 
        [Fax], 
        [Email], 
        [IsDeletable], 
        [IsActive], 
        [Comment], 
        [CreationDate], 
        [CreationUserId], 
        [LastModificationDate], 
        [LastModificationUserId]
    FROM
        dbo.[Partner]
    WHERE 
     ([PartnerId] = @PartnerId OR @PartnerId is null)
    AND ([GroupId] = @GroupId OR @GroupId is null)
    AND ([Code] = @Code OR @Code is null)
    AND ([Name] = @Name OR @Name is null)
    AND ([NameInEng] = @NameInEng OR @NameInEng is null)
    AND ([TaxCode] = @TaxCode OR @TaxCode is null)
    AND ([Priority] = @Priority OR @Priority is null)
    AND ([Address] = @Address OR @Address is null)
    AND ([Phone] = @Phone OR @Phone is null)
    AND ([Fax] = @Fax OR @Fax is null)
    AND ([Email] = @Email OR @Email is null)
    AND ([IsDeletable] = @IsDeletable OR @IsDeletable is null)
    AND ([IsActive] = @IsActive OR @IsActive is null)
    AND ([CreationDate] = @CreationDate OR @CreationDate is null)
    AND ([CreationUserId] = @CreationUserId OR @CreationUserId is null)
    AND ([LastModificationDate] = @LastModificationDate OR @LastModificationDate is null)
    AND ([LastModificationUserId] = @LastModificationUserId OR @LastModificationUserId is null)
END
ELSE
    BEGIN
        SELECT
            [PartnerId], 
            [GroupId], 
            [Code], 
            [Name], 
            [NameInEng], 
            [TaxCode], 
            [Priority], 
            [Address], 
            [Phone], 
            [Fax], 
            [Email], 
            [IsDeletable], 
            [IsActive], 
            [Comment], 
            [CreationDate], 
            [CreationUserId], 
            [LastModificationDate], 
            [LastModificationUserId]
        FROM
            dbo.[Partner]
        WHERE
     ([PartnerId] = @PartnerId AND @PartnerId is not null)
    OR ([GroupId] = @GroupId AND @GroupId is not null)
    OR ([Code] = @Code AND @Code is not null)
    OR ([Name] = @Name AND @Name is not null)
    OR ([NameInEng] = @NameInEng AND @NameInEng is not null)
    OR ([TaxCode] = @TaxCode AND @TaxCode is not null)
    OR ([Priority] = @Priority AND @Priority is not null)
    OR ([Address] = @Address AND @Address is not null)
    OR ([Phone] = @Phone AND @Phone is not null)
    OR ([Fax] = @Fax AND @Fax is not null)
    OR ([Email] = @Email AND @Email is not null)
    OR ([IsDeletable] = @IsDeletable AND @IsDeletable is not null)
    OR ([IsActive] = @IsActive AND @IsActive is not null)
    OR ([CreationDate] = @CreationDate AND @CreationDate is not null)
    OR ([CreationUserId] = @CreationUserId AND @CreationUserId is not null)
    OR ([LastModificationDate] = @LastModificationDate AND @LastModificationDate is not null)
    OR ([LastModificationUserId] = @LastModificationUserId AND @LastModificationUserId is not null)
        Select @@ROWCOUNT			
    END
	]]></body>
		</procedure>

		
		<procedure owner="dbo" name="Partner_Find_Dynamic" grant="" skip="true">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets records from the Partner table using a dynamically generated query.
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters/>
			<body><![CDATA[

BEGIN
				
with PageIndex as (
	select top {3} row_number() over (order by {1}) as RowIndex
	, [PartnerId]
	, [GroupId]
	, [Code]
	, [Name]
	, [NameInEng]
	, [TaxCode]
	, [Priority]
	, [Address]
	, [Phone]
	, [Fax]
	, [Email]
	, [IsDeletable]
	, [IsActive]
	, [Comment]
	, [CreationDate]
	, [CreationUserId]
	, [LastModificationDate]
	, [LastModificationUserId]
	from dbo.[Partner] {0}
	)
select
    [PartnerId],
    [GroupId],
    [Code],
    [Name],
    [NameInEng],
    [TaxCode],
    [Priority],
    [Address],
    [Phone],
    [Fax],
    [Email],
    [IsDeletable],
    [IsActive],
    [Comment],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
from PageIndex
where RowIndex > {2}
and RowIndex <= {3};
				

				-- get total count
				select count(*) as TotalRowCount from dbo.[Partner] {0};
			
				END
			]]></body>
		</procedure>
		
		
		<procedure owner="dbo" name="Role_Get_List" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets all records from the Role table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters/>
			<body><![CDATA[

SELECT
    [RoleId],
    [Code],
    [Name],
    [IsActive],
    [IsDeletable],
    [Type],
    [CreationDate],
    [CreationUserId],
    [LastModificationUserId],
    [LastModificationDate]
FROM
    dbo.[Role]
					
Select @@ROWCOUNT
]]></body>
		</procedure>
		
		
		<procedure owner="dbo" name="Role_GetPaged" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets records from the Role table passing page index and page count parameters
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
				<parameter name="@WhereClause" type="varchar" direction="Input" size="2000" precision="0" scale="0" param="(2000)" />
				<parameter name="@OrderBy" type="varchar" direction="Input" size="2000" precision="0" scale="0" param="(2000)"/>
				<parameter name="@PageIndex" type="int" direction="Input" size="0" precision="10" scale="0" />
				<parameter name="@PageSize" type="int" direction="Input" size="0" precision="10" scale="0" /> 
			</parameters>
			<body><![CDATA[

BEGIN
DECLARE @PageLowerBound int
DECLARE @PageUpperBound int
				
-- Set the page bounds
SET @PageLowerBound = @PageSize * @PageIndex
SET @PageUpperBound = @PageLowerBound + @PageSize

IF (@OrderBy is null or LEN(@OrderBy) < 1)
BEGIN
    -- default order by to first column
    SET @OrderBy = '[RoleId]'
END

-- SQL Server 2005 Paging
declare @SQL as nvarchar(4000)
SET @SQL = 'WITH PageIndex AS ('
SET @SQL = @SQL + ' SELECT'
IF @PageSize > 0
BEGIN
    SET @SQL = @SQL + ' TOP ' + convert(nvarchar, @PageUpperBound)
END
SET @SQL = @SQL + ' ROW_NUMBER() OVER (ORDER BY ' + @OrderBy + ') as RowIndex'
SET @SQL = @SQL + ', [RoleId]'
SET @SQL = @SQL + ', [Code]'
SET @SQL = @SQL + ', [Name]'
SET @SQL = @SQL + ', [IsActive]'
SET @SQL = @SQL + ', [IsDeletable]'
SET @SQL = @SQL + ', [Type]'
SET @SQL = @SQL + ', [CreationDate]'
SET @SQL = @SQL + ', [CreationUserId]'
SET @SQL = @SQL + ', [LastModificationUserId]'
SET @SQL = @SQL + ', [LastModificationDate]'
SET @SQL = @SQL + ' FROM dbo.[Role]'
IF LEN(@WhereClause) > 0
BEGIN
    SET @SQL = @SQL + ' WHERE ' + @WhereClause
END
SET @SQL = @SQL + ' ) SELECT'
SET @SQL = @SQL + ' [RoleId],'
SET @SQL = @SQL + ' [Code],'
SET @SQL = @SQL + ' [Name],'
SET @SQL = @SQL + ' [IsActive],'
SET @SQL = @SQL + ' [IsDeletable],'
SET @SQL = @SQL + ' [Type],'
SET @SQL = @SQL + ' [CreationDate],'
SET @SQL = @SQL + ' [CreationUserId],'
SET @SQL = @SQL + ' [LastModificationUserId],'
SET @SQL = @SQL + ' [LastModificationDate]'
SET @SQL = @SQL + ' FROM PageIndex'
SET @SQL = @SQL + ' WHERE RowIndex > ' + convert(nvarchar, @PageLowerBound)
IF @PageSize > 0
BEGIN
    SET @SQL = @SQL + ' AND RowIndex <= ' + convert(nvarchar, @PageUpperBound)
END
exec sp_executesql @SQL
				
-- get row count
SET @SQL = 'SELECT COUNT(*) as TotalRowCount'
SET @SQL = @SQL + ' FROM dbo.[Role]'
IF LEN(@WhereClause) > 0
BEGIN
    SET @SQL = @SQL + ' WHERE ' + @WhereClause
END
exec sp_executesql @SQL
			
END
]]></body>
		</procedure>
		
		<procedure owner="dbo" name="Role_Insert" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Inserts a record into the Role table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@RoleId" type="int" direction="Output" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@Code" type="nvarchar" direction="Input" size="50" precision="0" scale="0" param="(50)" nulldefault=""/>
                <parameter name="@Name" type="nvarchar" direction="Input" size="100" precision="0" scale="0" param="(100)" nulldefault=""/>
                <parameter name="@IsActive" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@IsDeletable" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@Type" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@LastModificationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
					
INSERT INTO dbo.[Role]
(
    [Code],
    [Name],
    [IsActive],
    [IsDeletable],
    [Type],
    [CreationDate],
    [CreationUserId],
    [LastModificationUserId],
    [LastModificationDate]
)
VALUES
(
    @Code,
    @Name,
    @IsActive,
    @IsDeletable,
    @Type,
    @CreationDate,
    @CreationUserId,
    @LastModificationUserId,
    @LastModificationDate
)
				
-- Get the identity value
SET @RoleId = SCOPE_IDENTITY()
									
							
			]]></body>
		</procedure>
		<procedure owner="dbo" name="Role_Update" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Updates a record in the Role table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@RoleId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@Code" type="nvarchar" direction="Input" size="50" precision="0" scale="0" param="(50)" nulldefault=""/>
                <parameter name="@Name" type="nvarchar" direction="Input" size="100" precision="0" scale="0" param="(100)" nulldefault=""/>
                <parameter name="@IsActive" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@IsDeletable" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@Type" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@LastModificationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[

				
-- Modify the updatable columns
UPDATE
    dbo.[Role]
SET
    [Code] = @Code,
    [Name] = @Name,
    [IsActive] = @IsActive,
    [IsDeletable] = @IsDeletable,
    [Type] = @Type,
    [CreationDate] = @CreationDate,
    [CreationUserId] = @CreationUserId,
    [LastModificationUserId] = @LastModificationUserId,
    [LastModificationDate] = @LastModificationDate
WHERE
    [RoleId] = @RoleId 

				
			]]></body>
		</procedure>
		<procedure owner="dbo" name="Role_Delete" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Deletes a record in the Role table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@RoleId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
DELETE FROM dbo.[Role] WITH (ROWLOCK) 
WHERE
    [RoleId] = @RoleId
					
			]]></body>
		</procedure>
		<procedure owner="dbo" name="Role_GetByRoleId" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Select records from the Role table through an index
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@RoleId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
SELECT
    [RoleId],
    [Code],
    [Name],
    [IsActive],
    [IsDeletable],
    [Type],
    [CreationDate],
    [CreationUserId],
    [LastModificationUserId],
    [LastModificationDate]
FROM
    dbo.[Role]
WHERE
    [RoleId] = @RoleId
Select @@ROWCOUNT
					
]]></body>
			
		</procedure>
		<procedure owner="dbo" name="Role_Find" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Finds records in the Role table passing nullable parameters
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
				<parameter name="@SearchUsingOR" type="bit" direction="Input" size="0" precision="1" scale="0" param="" nulldefault="null"/>
                <parameter name="@RoleId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@Code" type="nvarchar" direction="Input" size="50" precision="0" scale="0" param="(50)" nulldefault="null"/>
                <parameter name="@Name" type="nvarchar" direction="Input" size="100" precision="0" scale="0" param="(100)" nulldefault="null"/>
                <parameter name="@IsActive" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault="null"/>
                <parameter name="@IsDeletable" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault="null"/>
                <parameter name="@Type" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault="null"/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@LastModificationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault="null"/>
			</parameters>
			<body><![CDATA[

IF ISNULL(@SearchUsingOR, 0) <> 1
BEGIN
    SELECT
        [RoleId], 
        [Code], 
        [Name], 
        [IsActive], 
        [IsDeletable], 
        [Type], 
        [CreationDate], 
        [CreationUserId], 
        [LastModificationUserId], 
        [LastModificationDate]
    FROM
        dbo.[Role]
    WHERE 
     ([RoleId] = @RoleId OR @RoleId is null)
    AND ([Code] = @Code OR @Code is null)
    AND ([Name] = @Name OR @Name is null)
    AND ([IsActive] = @IsActive OR @IsActive is null)
    AND ([IsDeletable] = @IsDeletable OR @IsDeletable is null)
    AND ([Type] = @Type OR @Type is null)
    AND ([CreationDate] = @CreationDate OR @CreationDate is null)
    AND ([CreationUserId] = @CreationUserId OR @CreationUserId is null)
    AND ([LastModificationUserId] = @LastModificationUserId OR @LastModificationUserId is null)
    AND ([LastModificationDate] = @LastModificationDate OR @LastModificationDate is null)
END
ELSE
    BEGIN
        SELECT
            [RoleId], 
            [Code], 
            [Name], 
            [IsActive], 
            [IsDeletable], 
            [Type], 
            [CreationDate], 
            [CreationUserId], 
            [LastModificationUserId], 
            [LastModificationDate]
        FROM
            dbo.[Role]
        WHERE
     ([RoleId] = @RoleId AND @RoleId is not null)
    OR ([Code] = @Code AND @Code is not null)
    OR ([Name] = @Name AND @Name is not null)
    OR ([IsActive] = @IsActive AND @IsActive is not null)
    OR ([IsDeletable] = @IsDeletable AND @IsDeletable is not null)
    OR ([Type] = @Type AND @Type is not null)
    OR ([CreationDate] = @CreationDate AND @CreationDate is not null)
    OR ([CreationUserId] = @CreationUserId AND @CreationUserId is not null)
    OR ([LastModificationUserId] = @LastModificationUserId AND @LastModificationUserId is not null)
    OR ([LastModificationDate] = @LastModificationDate AND @LastModificationDate is not null)
        Select @@ROWCOUNT			
    END
	]]></body>
		</procedure>

		
		<procedure owner="dbo" name="Role_Find_Dynamic" grant="" skip="true">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets records from the Role table using a dynamically generated query.
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters/>
			<body><![CDATA[

BEGIN
				
with PageIndex as (
	select top {3} row_number() over (order by {1}) as RowIndex
	, [RoleId]
	, [Code]
	, [Name]
	, [IsActive]
	, [IsDeletable]
	, [Type]
	, [CreationDate]
	, [CreationUserId]
	, [LastModificationUserId]
	, [LastModificationDate]
	from dbo.[Role] {0}
	)
select
    [RoleId],
    [Code],
    [Name],
    [IsActive],
    [IsDeletable],
    [Type],
    [CreationDate],
    [CreationUserId],
    [LastModificationUserId],
    [LastModificationDate]
from PageIndex
where RowIndex > {2}
and RowIndex <= {3};
				

				-- get total count
				select count(*) as TotalRowCount from dbo.[Role] {0};
			
				END
			]]></body>
		</procedure>
		
		
		<procedure owner="dbo" name="UnitConvertor_Get_List" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets all records from the UnitConvertor table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters/>
			<body><![CDATA[

SELECT
    [FromUnitId],
    [ToUnitId],
    [Quantity],
    [IsDeletable],
    [IsActive],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
FROM
    dbo.[UnitConvertor]
					
Select @@ROWCOUNT
]]></body>
		</procedure>
		
		
		<procedure owner="dbo" name="UnitConvertor_GetPaged" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets records from the UnitConvertor table passing page index and page count parameters
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
				<parameter name="@WhereClause" type="varchar" direction="Input" size="2000" precision="0" scale="0" param="(2000)" />
				<parameter name="@OrderBy" type="varchar" direction="Input" size="2000" precision="0" scale="0" param="(2000)"/>
				<parameter name="@PageIndex" type="int" direction="Input" size="0" precision="10" scale="0" />
				<parameter name="@PageSize" type="int" direction="Input" size="0" precision="10" scale="0" /> 
			</parameters>
			<body><![CDATA[

BEGIN
DECLARE @PageLowerBound int
DECLARE @PageUpperBound int
				
-- Set the page bounds
SET @PageLowerBound = @PageSize * @PageIndex
SET @PageUpperBound = @PageLowerBound + @PageSize

IF (@OrderBy is null or LEN(@OrderBy) < 1)
BEGIN
    -- default order by to first column
    SET @OrderBy = '[FromUnitId]'
END

-- SQL Server 2005 Paging
declare @SQL as nvarchar(4000)
SET @SQL = 'WITH PageIndex AS ('
SET @SQL = @SQL + ' SELECT'
IF @PageSize > 0
BEGIN
    SET @SQL = @SQL + ' TOP ' + convert(nvarchar, @PageUpperBound)
END
SET @SQL = @SQL + ' ROW_NUMBER() OVER (ORDER BY ' + @OrderBy + ') as RowIndex'
SET @SQL = @SQL + ', [FromUnitId]'
SET @SQL = @SQL + ', [ToUnitId]'
SET @SQL = @SQL + ', [Quantity]'
SET @SQL = @SQL + ', [IsDeletable]'
SET @SQL = @SQL + ', [IsActive]'
SET @SQL = @SQL + ', [CreationDate]'
SET @SQL = @SQL + ', [CreationUserId]'
SET @SQL = @SQL + ', [LastModificationDate]'
SET @SQL = @SQL + ', [LastModificationUserId]'
SET @SQL = @SQL + ' FROM dbo.[UnitConvertor]'
IF LEN(@WhereClause) > 0
BEGIN
    SET @SQL = @SQL + ' WHERE ' + @WhereClause
END
SET @SQL = @SQL + ' ) SELECT'
SET @SQL = @SQL + ' [FromUnitId],'
SET @SQL = @SQL + ' [ToUnitId],'
SET @SQL = @SQL + ' [Quantity],'
SET @SQL = @SQL + ' [IsDeletable],'
SET @SQL = @SQL + ' [IsActive],'
SET @SQL = @SQL + ' [CreationDate],'
SET @SQL = @SQL + ' [CreationUserId],'
SET @SQL = @SQL + ' [LastModificationDate],'
SET @SQL = @SQL + ' [LastModificationUserId]'
SET @SQL = @SQL + ' FROM PageIndex'
SET @SQL = @SQL + ' WHERE RowIndex > ' + convert(nvarchar, @PageLowerBound)
IF @PageSize > 0
BEGIN
    SET @SQL = @SQL + ' AND RowIndex <= ' + convert(nvarchar, @PageUpperBound)
END
exec sp_executesql @SQL
				
-- get row count
SET @SQL = 'SELECT COUNT(*) as TotalRowCount'
SET @SQL = @SQL + ' FROM dbo.[UnitConvertor]'
IF LEN(@WhereClause) > 0
BEGIN
    SET @SQL = @SQL + ' WHERE ' + @WhereClause
END
exec sp_executesql @SQL
			
END
]]></body>
		</procedure>
		
		<procedure owner="dbo" name="UnitConvertor_Insert" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Inserts a record into the UnitConvertor table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@FromUnitId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@ToUnitId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@Quantity" type="float" direction="Input" size="8" precision="53" scale="0" param="" nulldefault=""/>
                <parameter name="@IsDeletable" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@IsActive" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@LastModificationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
					
INSERT INTO dbo.[UnitConvertor]
(
    [FromUnitId],
    [ToUnitId],
    [Quantity],
    [IsDeletable],
    [IsActive],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
)
VALUES
(
    @FromUnitId,
    @ToUnitId,
    @Quantity,
    @IsDeletable,
    @IsActive,
    @CreationDate,
    @CreationUserId,
    @LastModificationDate,
    @LastModificationUserId
)
				
									
							
			]]></body>
		</procedure>
		<procedure owner="dbo" name="UnitConvertor_Update" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Updates a record in the UnitConvertor table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@FromUnitId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@OriginalFromUnitId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@ToUnitId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@OriginalToUnitId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@Quantity" type="float" direction="Input" size="8" precision="53" scale="0" param="" nulldefault=""/>
                <parameter name="@IsDeletable" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@IsActive" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@LastModificationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[

				
-- Modify the updatable columns
UPDATE
    dbo.[UnitConvertor]
SET
    [FromUnitId] = @FromUnitId,
    [ToUnitId] = @ToUnitId,
    [Quantity] = @Quantity,
    [IsDeletable] = @IsDeletable,
    [IsActive] = @IsActive,
    [CreationDate] = @CreationDate,
    [CreationUserId] = @CreationUserId,
    [LastModificationDate] = @LastModificationDate,
    [LastModificationUserId] = @LastModificationUserId
WHERE
    [FromUnitId] = @OriginalFromUnitId 
AND [ToUnitId] = @OriginalToUnitId 

				
			]]></body>
		</procedure>
		<procedure owner="dbo" name="UnitConvertor_Delete" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Deletes a record in the UnitConvertor table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@FromUnitId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@ToUnitId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
DELETE FROM dbo.[UnitConvertor] WITH (ROWLOCK) 
WHERE
    [FromUnitId] = @FromUnitId
    AND [ToUnitId] = @ToUnitId
					
			]]></body>
		</procedure>
		<procedure owner="dbo" name="UnitConvertor_GetByFromUnitId" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Select records from the UnitConvertor table through a foreign key
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@FromUnitId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
SET ANSI_NULLS OFF

SELECT
    [FromUnitId],
    [ToUnitId],
    [Quantity],
    [IsDeletable],
    [IsActive],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
FROM
    dbo.[UnitConvertor]
WHERE
    [FromUnitId] = @FromUnitId
				
Select @@ROWCOUNT
SET ANSI_NULLS ON
]]></body>
		</procedure>
		<procedure owner="dbo" name="UnitConvertor_GetByToUnitId" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Select records from the UnitConvertor table through a foreign key
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@ToUnitId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
SET ANSI_NULLS OFF

SELECT
    [FromUnitId],
    [ToUnitId],
    [Quantity],
    [IsDeletable],
    [IsActive],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
FROM
    dbo.[UnitConvertor]
WHERE
    [ToUnitId] = @ToUnitId
				
Select @@ROWCOUNT
SET ANSI_NULLS ON
]]></body>
		</procedure>
		<procedure owner="dbo" name="UnitConvertor_GetByFromUnitIdToUnitId" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Select records from the UnitConvertor table through an index
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@FromUnitId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@ToUnitId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
SELECT
    [FromUnitId],
    [ToUnitId],
    [Quantity],
    [IsDeletable],
    [IsActive],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
FROM
    dbo.[UnitConvertor]
WHERE
    [FromUnitId] = @FromUnitId
    AND [ToUnitId] = @ToUnitId
Select @@ROWCOUNT
					
]]></body>
			
		</procedure>
		<procedure owner="dbo" name="UnitConvertor_Find" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Finds records in the UnitConvertor table passing nullable parameters
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
				<parameter name="@SearchUsingOR" type="bit" direction="Input" size="0" precision="1" scale="0" param="" nulldefault="null"/>
                <parameter name="@FromUnitId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@ToUnitId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@Quantity" type="float" direction="Input" size="8" precision="53" scale="0" param="" nulldefault="null"/>
                <parameter name="@IsDeletable" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault="null"/>
                <parameter name="@IsActive" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault="null"/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault="null"/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@LastModificationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault="null"/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
			</parameters>
			<body><![CDATA[

IF ISNULL(@SearchUsingOR, 0) <> 1
BEGIN
    SELECT
        [FromUnitId], 
        [ToUnitId], 
        [Quantity], 
        [IsDeletable], 
        [IsActive], 
        [CreationDate], 
        [CreationUserId], 
        [LastModificationDate], 
        [LastModificationUserId]
    FROM
        dbo.[UnitConvertor]
    WHERE 
     ([FromUnitId] = @FromUnitId OR @FromUnitId is null)
    AND ([ToUnitId] = @ToUnitId OR @ToUnitId is null)
    AND ([Quantity] = @Quantity OR @Quantity is null)
    AND ([IsDeletable] = @IsDeletable OR @IsDeletable is null)
    AND ([IsActive] = @IsActive OR @IsActive is null)
    AND ([CreationDate] = @CreationDate OR @CreationDate is null)
    AND ([CreationUserId] = @CreationUserId OR @CreationUserId is null)
    AND ([LastModificationDate] = @LastModificationDate OR @LastModificationDate is null)
    AND ([LastModificationUserId] = @LastModificationUserId OR @LastModificationUserId is null)
END
ELSE
    BEGIN
        SELECT
            [FromUnitId], 
            [ToUnitId], 
            [Quantity], 
            [IsDeletable], 
            [IsActive], 
            [CreationDate], 
            [CreationUserId], 
            [LastModificationDate], 
            [LastModificationUserId]
        FROM
            dbo.[UnitConvertor]
        WHERE
     ([FromUnitId] = @FromUnitId AND @FromUnitId is not null)
    OR ([ToUnitId] = @ToUnitId AND @ToUnitId is not null)
    OR ([Quantity] = @Quantity AND @Quantity is not null)
    OR ([IsDeletable] = @IsDeletable AND @IsDeletable is not null)
    OR ([IsActive] = @IsActive AND @IsActive is not null)
    OR ([CreationDate] = @CreationDate AND @CreationDate is not null)
    OR ([CreationUserId] = @CreationUserId AND @CreationUserId is not null)
    OR ([LastModificationDate] = @LastModificationDate AND @LastModificationDate is not null)
    OR ([LastModificationUserId] = @LastModificationUserId AND @LastModificationUserId is not null)
        Select @@ROWCOUNT			
    END
	]]></body>
		</procedure>

		
		<procedure owner="dbo" name="UnitConvertor_Find_Dynamic" grant="" skip="true">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets records from the UnitConvertor table using a dynamically generated query.
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters/>
			<body><![CDATA[

BEGIN
				
with PageIndex as (
	select top {3} row_number() over (order by {1}) as RowIndex
	, [FromUnitId]
	, [ToUnitId]
	, [Quantity]
	, [IsDeletable]
	, [IsActive]
	, [CreationDate]
	, [CreationUserId]
	, [LastModificationDate]
	, [LastModificationUserId]
	from dbo.[UnitConvertor] {0}
	)
select
    [FromUnitId],
    [ToUnitId],
    [Quantity],
    [IsDeletable],
    [IsActive],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
from PageIndex
where RowIndex > {2}
and RowIndex <= {3};
				

				-- get total count
				select count(*) as TotalRowCount from dbo.[UnitConvertor] {0};
			
				END
			]]></body>
		</procedure>
		
		
		<procedure owner="dbo" name="User_Get_List" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets all records from the User table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters/>
			<body><![CDATA[

SELECT
    [UserId],
    [UserGroupId],
    [Email],
    [Pwd],
    [PwdFormat],
    [FullName],
    [Phone],
    [IsDeletable],
    [IsActive],
    [IsFirstLoggedIn],
    [IsLocked],
    [LogInFail],
    [LastLoginDate],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
FROM
    dbo.[User]
					
Select @@ROWCOUNT
]]></body>
		</procedure>
		
		
		<procedure owner="dbo" name="User_GetPaged" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets records from the User table passing page index and page count parameters
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
				<parameter name="@WhereClause" type="varchar" direction="Input" size="2000" precision="0" scale="0" param="(2000)" />
				<parameter name="@OrderBy" type="varchar" direction="Input" size="2000" precision="0" scale="0" param="(2000)"/>
				<parameter name="@PageIndex" type="int" direction="Input" size="0" precision="10" scale="0" />
				<parameter name="@PageSize" type="int" direction="Input" size="0" precision="10" scale="0" /> 
			</parameters>
			<body><![CDATA[

BEGIN
DECLARE @PageLowerBound int
DECLARE @PageUpperBound int
				
-- Set the page bounds
SET @PageLowerBound = @PageSize * @PageIndex
SET @PageUpperBound = @PageLowerBound + @PageSize

IF (@OrderBy is null or LEN(@OrderBy) < 1)
BEGIN
    -- default order by to first column
    SET @OrderBy = '[UserId]'
END

-- SQL Server 2005 Paging
declare @SQL as nvarchar(4000)
SET @SQL = 'WITH PageIndex AS ('
SET @SQL = @SQL + ' SELECT'
IF @PageSize > 0
BEGIN
    SET @SQL = @SQL + ' TOP ' + convert(nvarchar, @PageUpperBound)
END
SET @SQL = @SQL + ' ROW_NUMBER() OVER (ORDER BY ' + @OrderBy + ') as RowIndex'
SET @SQL = @SQL + ', [UserId]'
SET @SQL = @SQL + ', [UserGroupId]'
SET @SQL = @SQL + ', [Email]'
SET @SQL = @SQL + ', [Pwd]'
SET @SQL = @SQL + ', [PwdFormat]'
SET @SQL = @SQL + ', [FullName]'
SET @SQL = @SQL + ', [Phone]'
SET @SQL = @SQL + ', [IsDeletable]'
SET @SQL = @SQL + ', [IsActive]'
SET @SQL = @SQL + ', [IsFirstLoggedIn]'
SET @SQL = @SQL + ', [IsLocked]'
SET @SQL = @SQL + ', [LogInFail]'
SET @SQL = @SQL + ', [LastLoginDate]'
SET @SQL = @SQL + ', [CreationDate]'
SET @SQL = @SQL + ', [CreationUserId]'
SET @SQL = @SQL + ', [LastModificationDate]'
SET @SQL = @SQL + ', [LastModificationUserId]'
SET @SQL = @SQL + ' FROM dbo.[User]'
IF LEN(@WhereClause) > 0
BEGIN
    SET @SQL = @SQL + ' WHERE ' + @WhereClause
END
SET @SQL = @SQL + ' ) SELECT'
SET @SQL = @SQL + ' [UserId],'
SET @SQL = @SQL + ' [UserGroupId],'
SET @SQL = @SQL + ' [Email],'
SET @SQL = @SQL + ' [Pwd],'
SET @SQL = @SQL + ' [PwdFormat],'
SET @SQL = @SQL + ' [FullName],'
SET @SQL = @SQL + ' [Phone],'
SET @SQL = @SQL + ' [IsDeletable],'
SET @SQL = @SQL + ' [IsActive],'
SET @SQL = @SQL + ' [IsFirstLoggedIn],'
SET @SQL = @SQL + ' [IsLocked],'
SET @SQL = @SQL + ' [LogInFail],'
SET @SQL = @SQL + ' [LastLoginDate],'
SET @SQL = @SQL + ' [CreationDate],'
SET @SQL = @SQL + ' [CreationUserId],'
SET @SQL = @SQL + ' [LastModificationDate],'
SET @SQL = @SQL + ' [LastModificationUserId]'
SET @SQL = @SQL + ' FROM PageIndex'
SET @SQL = @SQL + ' WHERE RowIndex > ' + convert(nvarchar, @PageLowerBound)
IF @PageSize > 0
BEGIN
    SET @SQL = @SQL + ' AND RowIndex <= ' + convert(nvarchar, @PageUpperBound)
END
exec sp_executesql @SQL
				
-- get row count
SET @SQL = 'SELECT COUNT(*) as TotalRowCount'
SET @SQL = @SQL + ' FROM dbo.[User]'
IF LEN(@WhereClause) > 0
BEGIN
    SET @SQL = @SQL + ' WHERE ' + @WhereClause
END
exec sp_executesql @SQL
			
END
]]></body>
		</procedure>
		
		<procedure owner="dbo" name="User_Insert" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Inserts a record into the User table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@UserId" type="int" direction="Output" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@UserGroupId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@Email" type="varchar" direction="Input" size="100" precision="0" scale="0" param="(100)" nulldefault=""/>
                <parameter name="@Pwd" type="varchar" direction="Input" size="50" precision="0" scale="0" param="(50)" nulldefault=""/>
                <parameter name="@PwdFormat" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@FullName" type="nvarchar" direction="Input" size="200" precision="0" scale="0" param="(200)" nulldefault=""/>
                <parameter name="@Phone" type="varchar" direction="Input" size="100" precision="0" scale="0" param="(100)" nulldefault=""/>
                <parameter name="@IsDeletable" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@IsActive" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@IsFirstLoggedIn" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@IsLocked" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@LogInFail" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@LastLoginDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@LastModificationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
					
INSERT INTO dbo.[User]
(
    [UserGroupId],
    [Email],
    [Pwd],
    [PwdFormat],
    [FullName],
    [Phone],
    [IsDeletable],
    [IsActive],
    [IsFirstLoggedIn],
    [IsLocked],
    [LogInFail],
    [LastLoginDate],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
)
VALUES
(
    @UserGroupId,
    @Email,
    @Pwd,
    @PwdFormat,
    @FullName,
    @Phone,
    @IsDeletable,
    @IsActive,
    @IsFirstLoggedIn,
    @IsLocked,
    @LogInFail,
    @LastLoginDate,
    @CreationDate,
    @CreationUserId,
    @LastModificationDate,
    @LastModificationUserId
)
				
-- Get the identity value
SET @UserId = SCOPE_IDENTITY()
									
							
			]]></body>
		</procedure>
		<procedure owner="dbo" name="User_Update" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Updates a record in the User table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@UserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@UserGroupId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@Email" type="varchar" direction="Input" size="100" precision="0" scale="0" param="(100)" nulldefault=""/>
                <parameter name="@Pwd" type="varchar" direction="Input" size="50" precision="0" scale="0" param="(50)" nulldefault=""/>
                <parameter name="@PwdFormat" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@FullName" type="nvarchar" direction="Input" size="200" precision="0" scale="0" param="(200)" nulldefault=""/>
                <parameter name="@Phone" type="varchar" direction="Input" size="100" precision="0" scale="0" param="(100)" nulldefault=""/>
                <parameter name="@IsDeletable" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@IsActive" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@IsFirstLoggedIn" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@IsLocked" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@LogInFail" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@LastLoginDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@LastModificationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[

				
-- Modify the updatable columns
UPDATE
    dbo.[User]
SET
    [UserGroupId] = @UserGroupId,
    [Email] = @Email,
    [Pwd] = @Pwd,
    [PwdFormat] = @PwdFormat,
    [FullName] = @FullName,
    [Phone] = @Phone,
    [IsDeletable] = @IsDeletable,
    [IsActive] = @IsActive,
    [IsFirstLoggedIn] = @IsFirstLoggedIn,
    [IsLocked] = @IsLocked,
    [LogInFail] = @LogInFail,
    [LastLoginDate] = @LastLoginDate,
    [CreationDate] = @CreationDate,
    [CreationUserId] = @CreationUserId,
    [LastModificationDate] = @LastModificationDate,
    [LastModificationUserId] = @LastModificationUserId
WHERE
    [UserId] = @UserId 

				
			]]></body>
		</procedure>
		<procedure owner="dbo" name="User_Delete" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Deletes a record in the User table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@UserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
DELETE FROM dbo.[User] WITH (ROWLOCK) 
WHERE
    [UserId] = @UserId
					
			]]></body>
		</procedure>
		<procedure owner="dbo" name="User_GetByUserGroupId" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Select records from the User table through a foreign key
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@UserGroupId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
SET ANSI_NULLS OFF

SELECT
    [UserId],
    [UserGroupId],
    [Email],
    [Pwd],
    [PwdFormat],
    [FullName],
    [Phone],
    [IsDeletable],
    [IsActive],
    [IsFirstLoggedIn],
    [IsLocked],
    [LogInFail],
    [LastLoginDate],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
FROM
    dbo.[User]
WHERE
    [UserGroupId] = @UserGroupId
				
Select @@ROWCOUNT
SET ANSI_NULLS ON
]]></body>
		</procedure>
		<procedure owner="dbo" name="User_GetByUserId" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Select records from the User table through an index
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@UserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
SELECT
    [UserId],
    [UserGroupId],
    [Email],
    [Pwd],
    [PwdFormat],
    [FullName],
    [Phone],
    [IsDeletable],
    [IsActive],
    [IsFirstLoggedIn],
    [IsLocked],
    [LogInFail],
    [LastLoginDate],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
FROM
    dbo.[User]
WHERE
    [UserId] = @UserId
Select @@ROWCOUNT
					
]]></body>
			
		</procedure>
		<procedure owner="dbo" name="User_Find" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Finds records in the User table passing nullable parameters
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
				<parameter name="@SearchUsingOR" type="bit" direction="Input" size="0" precision="1" scale="0" param="" nulldefault="null"/>
                <parameter name="@UserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@UserGroupId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@Email" type="varchar" direction="Input" size="100" precision="0" scale="0" param="(100)" nulldefault="null"/>
                <parameter name="@Pwd" type="varchar" direction="Input" size="50" precision="0" scale="0" param="(50)" nulldefault="null"/>
                <parameter name="@PwdFormat" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@FullName" type="nvarchar" direction="Input" size="200" precision="0" scale="0" param="(200)" nulldefault="null"/>
                <parameter name="@Phone" type="varchar" direction="Input" size="100" precision="0" scale="0" param="(100)" nulldefault="null"/>
                <parameter name="@IsDeletable" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault="null"/>
                <parameter name="@IsActive" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault="null"/>
                <parameter name="@IsFirstLoggedIn" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault="null"/>
                <parameter name="@IsLocked" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault="null"/>
                <parameter name="@LogInFail" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@LastLoginDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault="null"/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault="null"/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@LastModificationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault="null"/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
			</parameters>
			<body><![CDATA[

IF ISNULL(@SearchUsingOR, 0) <> 1
BEGIN
    SELECT
        [UserId], 
        [UserGroupId], 
        [Email], 
        [Pwd], 
        [PwdFormat], 
        [FullName], 
        [Phone], 
        [IsDeletable], 
        [IsActive], 
        [IsFirstLoggedIn], 
        [IsLocked], 
        [LogInFail], 
        [LastLoginDate], 
        [CreationDate], 
        [CreationUserId], 
        [LastModificationDate], 
        [LastModificationUserId]
    FROM
        dbo.[User]
    WHERE 
     ([UserId] = @UserId OR @UserId is null)
    AND ([UserGroupId] = @UserGroupId OR @UserGroupId is null)
    AND ([Email] = @Email OR @Email is null)
    AND ([Pwd] = @Pwd OR @Pwd is null)
    AND ([PwdFormat] = @PwdFormat OR @PwdFormat is null)
    AND ([FullName] = @FullName OR @FullName is null)
    AND ([Phone] = @Phone OR @Phone is null)
    AND ([IsDeletable] = @IsDeletable OR @IsDeletable is null)
    AND ([IsActive] = @IsActive OR @IsActive is null)
    AND ([IsFirstLoggedIn] = @IsFirstLoggedIn OR @IsFirstLoggedIn is null)
    AND ([IsLocked] = @IsLocked OR @IsLocked is null)
    AND ([LogInFail] = @LogInFail OR @LogInFail is null)
    AND ([LastLoginDate] = @LastLoginDate OR @LastLoginDate is null)
    AND ([CreationDate] = @CreationDate OR @CreationDate is null)
    AND ([CreationUserId] = @CreationUserId OR @CreationUserId is null)
    AND ([LastModificationDate] = @LastModificationDate OR @LastModificationDate is null)
    AND ([LastModificationUserId] = @LastModificationUserId OR @LastModificationUserId is null)
END
ELSE
    BEGIN
        SELECT
            [UserId], 
            [UserGroupId], 
            [Email], 
            [Pwd], 
            [PwdFormat], 
            [FullName], 
            [Phone], 
            [IsDeletable], 
            [IsActive], 
            [IsFirstLoggedIn], 
            [IsLocked], 
            [LogInFail], 
            [LastLoginDate], 
            [CreationDate], 
            [CreationUserId], 
            [LastModificationDate], 
            [LastModificationUserId]
        FROM
            dbo.[User]
        WHERE
     ([UserId] = @UserId AND @UserId is not null)
    OR ([UserGroupId] = @UserGroupId AND @UserGroupId is not null)
    OR ([Email] = @Email AND @Email is not null)
    OR ([Pwd] = @Pwd AND @Pwd is not null)
    OR ([PwdFormat] = @PwdFormat AND @PwdFormat is not null)
    OR ([FullName] = @FullName AND @FullName is not null)
    OR ([Phone] = @Phone AND @Phone is not null)
    OR ([IsDeletable] = @IsDeletable AND @IsDeletable is not null)
    OR ([IsActive] = @IsActive AND @IsActive is not null)
    OR ([IsFirstLoggedIn] = @IsFirstLoggedIn AND @IsFirstLoggedIn is not null)
    OR ([IsLocked] = @IsLocked AND @IsLocked is not null)
    OR ([LogInFail] = @LogInFail AND @LogInFail is not null)
    OR ([LastLoginDate] = @LastLoginDate AND @LastLoginDate is not null)
    OR ([CreationDate] = @CreationDate AND @CreationDate is not null)
    OR ([CreationUserId] = @CreationUserId AND @CreationUserId is not null)
    OR ([LastModificationDate] = @LastModificationDate AND @LastModificationDate is not null)
    OR ([LastModificationUserId] = @LastModificationUserId AND @LastModificationUserId is not null)
        Select @@ROWCOUNT			
    END
	]]></body>
		</procedure>

		
		<procedure owner="dbo" name="User_Find_Dynamic" grant="" skip="true">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets records from the User table using a dynamically generated query.
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters/>
			<body><![CDATA[

BEGIN
				
with PageIndex as (
	select top {3} row_number() over (order by {1}) as RowIndex
	, [UserId]
	, [UserGroupId]
	, [Email]
	, [Pwd]
	, [PwdFormat]
	, [FullName]
	, [Phone]
	, [IsDeletable]
	, [IsActive]
	, [IsFirstLoggedIn]
	, [IsLocked]
	, [LogInFail]
	, [LastLoginDate]
	, [CreationDate]
	, [CreationUserId]
	, [LastModificationDate]
	, [LastModificationUserId]
	from dbo.[User] {0}
	)
select
    [UserId],
    [UserGroupId],
    [Email],
    [Pwd],
    [PwdFormat],
    [FullName],
    [Phone],
    [IsDeletable],
    [IsActive],
    [IsFirstLoggedIn],
    [IsLocked],
    [LogInFail],
    [LastLoginDate],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
from PageIndex
where RowIndex > {2}
and RowIndex <= {3};
				

				-- get total count
				select count(*) as TotalRowCount from dbo.[User] {0};
			
				END
			]]></body>
		</procedure>
		
		
		<procedure owner="dbo" name="AttachFile_Get_List" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets all records from the AttachFile table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters/>
			<body><![CDATA[

SELECT
    [AttachFileId],
    [Name],
    [FilePath],
    [Type],
    [ResourceId],
    [ResourceType],
    [IsActive],
    [Comment],
    [CreationUserId],
    [CreationDate],
    [LastModificationUserId],
    [LastModificationDate]
FROM
    dbo.[AttachFile]
					
Select @@ROWCOUNT
]]></body>
		</procedure>
		
		
		<procedure owner="dbo" name="AttachFile_GetPaged" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets records from the AttachFile table passing page index and page count parameters
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
				<parameter name="@WhereClause" type="varchar" direction="Input" size="2000" precision="0" scale="0" param="(2000)" />
				<parameter name="@OrderBy" type="varchar" direction="Input" size="2000" precision="0" scale="0" param="(2000)"/>
				<parameter name="@PageIndex" type="int" direction="Input" size="0" precision="10" scale="0" />
				<parameter name="@PageSize" type="int" direction="Input" size="0" precision="10" scale="0" /> 
			</parameters>
			<body><![CDATA[

BEGIN
DECLARE @PageLowerBound int
DECLARE @PageUpperBound int
				
-- Set the page bounds
SET @PageLowerBound = @PageSize * @PageIndex
SET @PageUpperBound = @PageLowerBound + @PageSize

IF (@OrderBy is null or LEN(@OrderBy) < 1)
BEGIN
    -- default order by to first column
    SET @OrderBy = '[AttachFileId]'
END

-- SQL Server 2005 Paging
declare @SQL as nvarchar(4000)
SET @SQL = 'WITH PageIndex AS ('
SET @SQL = @SQL + ' SELECT'
IF @PageSize > 0
BEGIN
    SET @SQL = @SQL + ' TOP ' + convert(nvarchar, @PageUpperBound)
END
SET @SQL = @SQL + ' ROW_NUMBER() OVER (ORDER BY ' + @OrderBy + ') as RowIndex'
SET @SQL = @SQL + ', [AttachFileId]'
SET @SQL = @SQL + ', [Name]'
SET @SQL = @SQL + ', [FilePath]'
SET @SQL = @SQL + ', [Type]'
SET @SQL = @SQL + ', [ResourceId]'
SET @SQL = @SQL + ', [ResourceType]'
SET @SQL = @SQL + ', [IsActive]'
SET @SQL = @SQL + ', [Comment]'
SET @SQL = @SQL + ', [CreationUserId]'
SET @SQL = @SQL + ', [CreationDate]'
SET @SQL = @SQL + ', [LastModificationUserId]'
SET @SQL = @SQL + ', [LastModificationDate]'
SET @SQL = @SQL + ' FROM dbo.[AttachFile]'
IF LEN(@WhereClause) > 0
BEGIN
    SET @SQL = @SQL + ' WHERE ' + @WhereClause
END
SET @SQL = @SQL + ' ) SELECT'
SET @SQL = @SQL + ' [AttachFileId],'
SET @SQL = @SQL + ' [Name],'
SET @SQL = @SQL + ' [FilePath],'
SET @SQL = @SQL + ' [Type],'
SET @SQL = @SQL + ' [ResourceId],'
SET @SQL = @SQL + ' [ResourceType],'
SET @SQL = @SQL + ' [IsActive],'
SET @SQL = @SQL + ' [Comment],'
SET @SQL = @SQL + ' [CreationUserId],'
SET @SQL = @SQL + ' [CreationDate],'
SET @SQL = @SQL + ' [LastModificationUserId],'
SET @SQL = @SQL + ' [LastModificationDate]'
SET @SQL = @SQL + ' FROM PageIndex'
SET @SQL = @SQL + ' WHERE RowIndex > ' + convert(nvarchar, @PageLowerBound)
IF @PageSize > 0
BEGIN
    SET @SQL = @SQL + ' AND RowIndex <= ' + convert(nvarchar, @PageUpperBound)
END
exec sp_executesql @SQL
				
-- get row count
SET @SQL = 'SELECT COUNT(*) as TotalRowCount'
SET @SQL = @SQL + ' FROM dbo.[AttachFile]'
IF LEN(@WhereClause) > 0
BEGIN
    SET @SQL = @SQL + ' WHERE ' + @WhereClause
END
exec sp_executesql @SQL
			
END
]]></body>
		</procedure>
		
		<procedure owner="dbo" name="AttachFile_Insert" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Inserts a record into the AttachFile table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@AttachFileId" type="int" direction="Output" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@Name" type="nvarchar" direction="Input" size="500" precision="0" scale="0" param="(500)" nulldefault=""/>
                <parameter name="@FilePath" type="nvarchar" direction="Input" size="500" precision="0" scale="0" param="(500)" nulldefault=""/>
                <parameter name="@Type" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@ResourceId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@ResourceType" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@IsActive" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@Comment" type="ntext" direction="Input" size="16" precision="0" scale="0" param="" nulldefault=""/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@LastModificationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
					
INSERT INTO dbo.[AttachFile]
(
    [Name],
    [FilePath],
    [Type],
    [ResourceId],
    [ResourceType],
    [IsActive],
    [Comment],
    [CreationUserId],
    [CreationDate],
    [LastModificationUserId],
    [LastModificationDate]
)
VALUES
(
    @Name,
    @FilePath,
    @Type,
    @ResourceId,
    @ResourceType,
    @IsActive,
    @Comment,
    @CreationUserId,
    @CreationDate,
    @LastModificationUserId,
    @LastModificationDate
)
				
-- Get the identity value
SET @AttachFileId = SCOPE_IDENTITY()
									
							
			]]></body>
		</procedure>
		<procedure owner="dbo" name="AttachFile_Update" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Updates a record in the AttachFile table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@AttachFileId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@Name" type="nvarchar" direction="Input" size="500" precision="0" scale="0" param="(500)" nulldefault=""/>
                <parameter name="@FilePath" type="nvarchar" direction="Input" size="500" precision="0" scale="0" param="(500)" nulldefault=""/>
                <parameter name="@Type" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@ResourceId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@ResourceType" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@IsActive" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@Comment" type="ntext" direction="Input" size="16" precision="0" scale="0" param="" nulldefault=""/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@LastModificationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[

				
-- Modify the updatable columns
UPDATE
    dbo.[AttachFile]
SET
    [Name] = @Name,
    [FilePath] = @FilePath,
    [Type] = @Type,
    [ResourceId] = @ResourceId,
    [ResourceType] = @ResourceType,
    [IsActive] = @IsActive,
    [Comment] = @Comment,
    [CreationUserId] = @CreationUserId,
    [CreationDate] = @CreationDate,
    [LastModificationUserId] = @LastModificationUserId,
    [LastModificationDate] = @LastModificationDate
WHERE
    [AttachFileId] = @AttachFileId 

				
			]]></body>
		</procedure>
		<procedure owner="dbo" name="AttachFile_Delete" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Deletes a record in the AttachFile table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@AttachFileId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
DELETE FROM dbo.[AttachFile] WITH (ROWLOCK) 
WHERE
    [AttachFileId] = @AttachFileId
					
			]]></body>
		</procedure>
		<procedure owner="dbo" name="AttachFile_GetByAttachFileId" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Select records from the AttachFile table through an index
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@AttachFileId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
SELECT
    [AttachFileId],
    [Name],
    [FilePath],
    [Type],
    [ResourceId],
    [ResourceType],
    [IsActive],
    [Comment],
    [CreationUserId],
    [CreationDate],
    [LastModificationUserId],
    [LastModificationDate]
FROM
    dbo.[AttachFile]
WHERE
    [AttachFileId] = @AttachFileId
Select @@ROWCOUNT
					
]]></body>
			
		</procedure>
		<procedure owner="dbo" name="AttachFile_Find" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Finds records in the AttachFile table passing nullable parameters
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
				<parameter name="@SearchUsingOR" type="bit" direction="Input" size="0" precision="1" scale="0" param="" nulldefault="null"/>
                <parameter name="@AttachFileId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@Name" type="nvarchar" direction="Input" size="500" precision="0" scale="0" param="(500)" nulldefault="null"/>
                <parameter name="@FilePath" type="nvarchar" direction="Input" size="500" precision="0" scale="0" param="(500)" nulldefault="null"/>
                <parameter name="@Type" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@ResourceId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@ResourceType" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@IsActive" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault="null"/>
                <parameter name="@Comment" type="ntext" direction="Input" size="16" precision="0" scale="0" param="" nulldefault="null"/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault="null"/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@LastModificationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault="null"/>
			</parameters>
			<body><![CDATA[

IF ISNULL(@SearchUsingOR, 0) <> 1
BEGIN
    SELECT
        [AttachFileId], 
        [Name], 
        [FilePath], 
        [Type], 
        [ResourceId], 
        [ResourceType], 
        [IsActive], 
        [Comment], 
        [CreationUserId], 
        [CreationDate], 
        [LastModificationUserId], 
        [LastModificationDate]
    FROM
        dbo.[AttachFile]
    WHERE 
     ([AttachFileId] = @AttachFileId OR @AttachFileId is null)
    AND ([Name] = @Name OR @Name is null)
    AND ([FilePath] = @FilePath OR @FilePath is null)
    AND ([Type] = @Type OR @Type is null)
    AND ([ResourceId] = @ResourceId OR @ResourceId is null)
    AND ([ResourceType] = @ResourceType OR @ResourceType is null)
    AND ([IsActive] = @IsActive OR @IsActive is null)
    AND ([CreationUserId] = @CreationUserId OR @CreationUserId is null)
    AND ([CreationDate] = @CreationDate OR @CreationDate is null)
    AND ([LastModificationUserId] = @LastModificationUserId OR @LastModificationUserId is null)
    AND ([LastModificationDate] = @LastModificationDate OR @LastModificationDate is null)
END
ELSE
    BEGIN
        SELECT
            [AttachFileId], 
            [Name], 
            [FilePath], 
            [Type], 
            [ResourceId], 
            [ResourceType], 
            [IsActive], 
            [Comment], 
            [CreationUserId], 
            [CreationDate], 
            [LastModificationUserId], 
            [LastModificationDate]
        FROM
            dbo.[AttachFile]
        WHERE
     ([AttachFileId] = @AttachFileId AND @AttachFileId is not null)
    OR ([Name] = @Name AND @Name is not null)
    OR ([FilePath] = @FilePath AND @FilePath is not null)
    OR ([Type] = @Type AND @Type is not null)
    OR ([ResourceId] = @ResourceId AND @ResourceId is not null)
    OR ([ResourceType] = @ResourceType AND @ResourceType is not null)
    OR ([IsActive] = @IsActive AND @IsActive is not null)
    OR ([CreationUserId] = @CreationUserId AND @CreationUserId is not null)
    OR ([CreationDate] = @CreationDate AND @CreationDate is not null)
    OR ([LastModificationUserId] = @LastModificationUserId AND @LastModificationUserId is not null)
    OR ([LastModificationDate] = @LastModificationDate AND @LastModificationDate is not null)
        Select @@ROWCOUNT			
    END
	]]></body>
		</procedure>

		
		<procedure owner="dbo" name="AttachFile_Find_Dynamic" grant="" skip="true">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets records from the AttachFile table using a dynamically generated query.
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters/>
			<body><![CDATA[

BEGIN
				
with PageIndex as (
	select top {3} row_number() over (order by {1}) as RowIndex
	, [AttachFileId]
	, [Name]
	, [FilePath]
	, [Type]
	, [ResourceId]
	, [ResourceType]
	, [IsActive]
	, [Comment]
	, [CreationUserId]
	, [CreationDate]
	, [LastModificationUserId]
	, [LastModificationDate]
	from dbo.[AttachFile] {0}
	)
select
    [AttachFileId],
    [Name],
    [FilePath],
    [Type],
    [ResourceId],
    [ResourceType],
    [IsActive],
    [Comment],
    [CreationUserId],
    [CreationDate],
    [LastModificationUserId],
    [LastModificationDate]
from PageIndex
where RowIndex > {2}
and RowIndex <= {3};
				

				-- get total count
				select count(*) as TotalRowCount from dbo.[AttachFile] {0};
			
				END
			]]></body>
		</procedure>
		
		
		<procedure owner="dbo" name="Staff_Get_List" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets all records from the Staff table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters/>
			<body><![CDATA[

SELECT
    [StaffId],
    [UserId],
    [Code],
    [FirstName],
    [LastName],
    [MiddleName]
FROM
    dbo.[Staff]
					
Select @@ROWCOUNT
]]></body>
		</procedure>
		
		
		<procedure owner="dbo" name="Staff_GetPaged" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets records from the Staff table passing page index and page count parameters
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
				<parameter name="@WhereClause" type="varchar" direction="Input" size="2000" precision="0" scale="0" param="(2000)" />
				<parameter name="@OrderBy" type="varchar" direction="Input" size="2000" precision="0" scale="0" param="(2000)"/>
				<parameter name="@PageIndex" type="int" direction="Input" size="0" precision="10" scale="0" />
				<parameter name="@PageSize" type="int" direction="Input" size="0" precision="10" scale="0" /> 
			</parameters>
			<body><![CDATA[

BEGIN
DECLARE @PageLowerBound int
DECLARE @PageUpperBound int
				
-- Set the page bounds
SET @PageLowerBound = @PageSize * @PageIndex
SET @PageUpperBound = @PageLowerBound + @PageSize

IF (@OrderBy is null or LEN(@OrderBy) < 1)
BEGIN
    -- default order by to first column
    SET @OrderBy = '[StaffId]'
END

-- SQL Server 2005 Paging
declare @SQL as nvarchar(4000)
SET @SQL = 'WITH PageIndex AS ('
SET @SQL = @SQL + ' SELECT'
IF @PageSize > 0
BEGIN
    SET @SQL = @SQL + ' TOP ' + convert(nvarchar, @PageUpperBound)
END
SET @SQL = @SQL + ' ROW_NUMBER() OVER (ORDER BY ' + @OrderBy + ') as RowIndex'
SET @SQL = @SQL + ', [StaffId]'
SET @SQL = @SQL + ', [UserId]'
SET @SQL = @SQL + ', [Code]'
SET @SQL = @SQL + ', [FirstName]'
SET @SQL = @SQL + ', [LastName]'
SET @SQL = @SQL + ', [MiddleName]'
SET @SQL = @SQL + ' FROM dbo.[Staff]'
IF LEN(@WhereClause) > 0
BEGIN
    SET @SQL = @SQL + ' WHERE ' + @WhereClause
END
SET @SQL = @SQL + ' ) SELECT'
SET @SQL = @SQL + ' [StaffId],'
SET @SQL = @SQL + ' [UserId],'
SET @SQL = @SQL + ' [Code],'
SET @SQL = @SQL + ' [FirstName],'
SET @SQL = @SQL + ' [LastName],'
SET @SQL = @SQL + ' [MiddleName]'
SET @SQL = @SQL + ' FROM PageIndex'
SET @SQL = @SQL + ' WHERE RowIndex > ' + convert(nvarchar, @PageLowerBound)
IF @PageSize > 0
BEGIN
    SET @SQL = @SQL + ' AND RowIndex <= ' + convert(nvarchar, @PageUpperBound)
END
exec sp_executesql @SQL
				
-- get row count
SET @SQL = 'SELECT COUNT(*) as TotalRowCount'
SET @SQL = @SQL + ' FROM dbo.[Staff]'
IF LEN(@WhereClause) > 0
BEGIN
    SET @SQL = @SQL + ' WHERE ' + @WhereClause
END
exec sp_executesql @SQL
			
END
]]></body>
		</procedure>
		
		<procedure owner="dbo" name="Staff_Insert" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Inserts a record into the Staff table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@StaffId" type="int" direction="Output" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@UserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@Code" type="nchar" direction="Input" size="10" precision="0" scale="0" param="(10)" nulldefault=""/>
                <parameter name="@FirstName" type="nchar" direction="Input" size="10" precision="0" scale="0" param="(10)" nulldefault=""/>
                <parameter name="@LastName" type="nchar" direction="Input" size="10" precision="0" scale="0" param="(10)" nulldefault=""/>
                <parameter name="@MiddleName" type="nchar" direction="Input" size="10" precision="0" scale="0" param="(10)" nulldefault=""/>
			</parameters>
			<body><![CDATA[
					
INSERT INTO dbo.[Staff]
(
    [UserId],
    [Code],
    [FirstName],
    [LastName],
    [MiddleName]
)
VALUES
(
    @UserId,
    @Code,
    @FirstName,
    @LastName,
    @MiddleName
)
				
-- Get the identity value
SET @StaffId = SCOPE_IDENTITY()
									
							
			]]></body>
		</procedure>
		<procedure owner="dbo" name="Staff_Update" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Updates a record in the Staff table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@StaffId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@UserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@Code" type="nchar" direction="Input" size="10" precision="0" scale="0" param="(10)" nulldefault=""/>
                <parameter name="@FirstName" type="nchar" direction="Input" size="10" precision="0" scale="0" param="(10)" nulldefault=""/>
                <parameter name="@LastName" type="nchar" direction="Input" size="10" precision="0" scale="0" param="(10)" nulldefault=""/>
                <parameter name="@MiddleName" type="nchar" direction="Input" size="10" precision="0" scale="0" param="(10)" nulldefault=""/>
			</parameters>
			<body><![CDATA[

				
-- Modify the updatable columns
UPDATE
    dbo.[Staff]
SET
    [UserId] = @UserId,
    [Code] = @Code,
    [FirstName] = @FirstName,
    [LastName] = @LastName,
    [MiddleName] = @MiddleName
WHERE
    [StaffId] = @StaffId 

				
			]]></body>
		</procedure>
		<procedure owner="dbo" name="Staff_Delete" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Deletes a record in the Staff table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@StaffId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
DELETE FROM dbo.[Staff] WITH (ROWLOCK) 
WHERE
    [StaffId] = @StaffId
					
			]]></body>
		</procedure>
		<procedure owner="dbo" name="Staff_GetByUserId" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Select records from the Staff table through a foreign key
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@UserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
SET ANSI_NULLS OFF

SELECT
    [StaffId],
    [UserId],
    [Code],
    [FirstName],
    [LastName],
    [MiddleName]
FROM
    dbo.[Staff]
WHERE
    [UserId] = @UserId
				
Select @@ROWCOUNT
SET ANSI_NULLS ON
]]></body>
		</procedure>
		<procedure owner="dbo" name="Staff_GetByStaffId" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Select records from the Staff table through an index
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@StaffId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
SELECT
    [StaffId],
    [UserId],
    [Code],
    [FirstName],
    [LastName],
    [MiddleName]
FROM
    dbo.[Staff]
WHERE
    [StaffId] = @StaffId
Select @@ROWCOUNT
					
]]></body>
			
		</procedure>
		<procedure owner="dbo" name="Staff_Find" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Finds records in the Staff table passing nullable parameters
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
				<parameter name="@SearchUsingOR" type="bit" direction="Input" size="0" precision="1" scale="0" param="" nulldefault="null"/>
                <parameter name="@StaffId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@UserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@Code" type="nchar" direction="Input" size="10" precision="0" scale="0" param="(10)" nulldefault="null"/>
                <parameter name="@FirstName" type="nchar" direction="Input" size="10" precision="0" scale="0" param="(10)" nulldefault="null"/>
                <parameter name="@LastName" type="nchar" direction="Input" size="10" precision="0" scale="0" param="(10)" nulldefault="null"/>
                <parameter name="@MiddleName" type="nchar" direction="Input" size="10" precision="0" scale="0" param="(10)" nulldefault="null"/>
			</parameters>
			<body><![CDATA[

IF ISNULL(@SearchUsingOR, 0) <> 1
BEGIN
    SELECT
        [StaffId], 
        [UserId], 
        [Code], 
        [FirstName], 
        [LastName], 
        [MiddleName]
    FROM
        dbo.[Staff]
    WHERE 
     ([StaffId] = @StaffId OR @StaffId is null)
    AND ([UserId] = @UserId OR @UserId is null)
    AND ([Code] = @Code OR @Code is null)
    AND ([FirstName] = @FirstName OR @FirstName is null)
    AND ([LastName] = @LastName OR @LastName is null)
    AND ([MiddleName] = @MiddleName OR @MiddleName is null)
END
ELSE
    BEGIN
        SELECT
            [StaffId], 
            [UserId], 
            [Code], 
            [FirstName], 
            [LastName], 
            [MiddleName]
        FROM
            dbo.[Staff]
        WHERE
     ([StaffId] = @StaffId AND @StaffId is not null)
    OR ([UserId] = @UserId AND @UserId is not null)
    OR ([Code] = @Code AND @Code is not null)
    OR ([FirstName] = @FirstName AND @FirstName is not null)
    OR ([LastName] = @LastName AND @LastName is not null)
    OR ([MiddleName] = @MiddleName AND @MiddleName is not null)
        Select @@ROWCOUNT			
    END
	]]></body>
		</procedure>

		
		<procedure owner="dbo" name="Staff_Find_Dynamic" grant="" skip="true">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets records from the Staff table using a dynamically generated query.
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters/>
			<body><![CDATA[

BEGIN
				
with PageIndex as (
	select top {3} row_number() over (order by {1}) as RowIndex
	, [StaffId]
	, [UserId]
	, [Code]
	, [FirstName]
	, [LastName]
	, [MiddleName]
	from dbo.[Staff] {0}
	)
select
    [StaffId],
    [UserId],
    [Code],
    [FirstName],
    [LastName],
    [MiddleName]
from PageIndex
where RowIndex > {2}
and RowIndex <= {3};
				

				-- get total count
				select count(*) as TotalRowCount from dbo.[Staff] {0};
			
				END
			]]></body>
		</procedure>
		
		
		<procedure owner="dbo" name="RoleOfStaff_Get_List" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets all records from the RoleOfStaff table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters/>
			<body><![CDATA[

SELECT
    [RoleOfStaffId],
    [StaffId],
    [RoleId],
    [ResourceId],
    [ResourceType],
    [IsApprove],
    [IsActive],
    [Status],
    [FromDate],
    [ToDate],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
FROM
    dbo.[RoleOfStaff]
					
Select @@ROWCOUNT
]]></body>
		</procedure>
		
		
		<procedure owner="dbo" name="RoleOfStaff_GetPaged" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets records from the RoleOfStaff table passing page index and page count parameters
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
				<parameter name="@WhereClause" type="varchar" direction="Input" size="2000" precision="0" scale="0" param="(2000)" />
				<parameter name="@OrderBy" type="varchar" direction="Input" size="2000" precision="0" scale="0" param="(2000)"/>
				<parameter name="@PageIndex" type="int" direction="Input" size="0" precision="10" scale="0" />
				<parameter name="@PageSize" type="int" direction="Input" size="0" precision="10" scale="0" /> 
			</parameters>
			<body><![CDATA[

BEGIN
DECLARE @PageLowerBound int
DECLARE @PageUpperBound int
				
-- Set the page bounds
SET @PageLowerBound = @PageSize * @PageIndex
SET @PageUpperBound = @PageLowerBound + @PageSize

IF (@OrderBy is null or LEN(@OrderBy) < 1)
BEGIN
    -- default order by to first column
    SET @OrderBy = '[RoleOfStaffId]'
END

-- SQL Server 2005 Paging
declare @SQL as nvarchar(4000)
SET @SQL = 'WITH PageIndex AS ('
SET @SQL = @SQL + ' SELECT'
IF @PageSize > 0
BEGIN
    SET @SQL = @SQL + ' TOP ' + convert(nvarchar, @PageUpperBound)
END
SET @SQL = @SQL + ' ROW_NUMBER() OVER (ORDER BY ' + @OrderBy + ') as RowIndex'
SET @SQL = @SQL + ', [RoleOfStaffId]'
SET @SQL = @SQL + ', [StaffId]'
SET @SQL = @SQL + ', [RoleId]'
SET @SQL = @SQL + ', [ResourceId]'
SET @SQL = @SQL + ', [ResourceType]'
SET @SQL = @SQL + ', [IsApprove]'
SET @SQL = @SQL + ', [IsActive]'
SET @SQL = @SQL + ', [Status]'
SET @SQL = @SQL + ', [FromDate]'
SET @SQL = @SQL + ', [ToDate]'
SET @SQL = @SQL + ', [CreationDate]'
SET @SQL = @SQL + ', [CreationUserId]'
SET @SQL = @SQL + ', [LastModificationDate]'
SET @SQL = @SQL + ', [LastModificationUserId]'
SET @SQL = @SQL + ' FROM dbo.[RoleOfStaff]'
IF LEN(@WhereClause) > 0
BEGIN
    SET @SQL = @SQL + ' WHERE ' + @WhereClause
END
SET @SQL = @SQL + ' ) SELECT'
SET @SQL = @SQL + ' [RoleOfStaffId],'
SET @SQL = @SQL + ' [StaffId],'
SET @SQL = @SQL + ' [RoleId],'
SET @SQL = @SQL + ' [ResourceId],'
SET @SQL = @SQL + ' [ResourceType],'
SET @SQL = @SQL + ' [IsApprove],'
SET @SQL = @SQL + ' [IsActive],'
SET @SQL = @SQL + ' [Status],'
SET @SQL = @SQL + ' [FromDate],'
SET @SQL = @SQL + ' [ToDate],'
SET @SQL = @SQL + ' [CreationDate],'
SET @SQL = @SQL + ' [CreationUserId],'
SET @SQL = @SQL + ' [LastModificationDate],'
SET @SQL = @SQL + ' [LastModificationUserId]'
SET @SQL = @SQL + ' FROM PageIndex'
SET @SQL = @SQL + ' WHERE RowIndex > ' + convert(nvarchar, @PageLowerBound)
IF @PageSize > 0
BEGIN
    SET @SQL = @SQL + ' AND RowIndex <= ' + convert(nvarchar, @PageUpperBound)
END
exec sp_executesql @SQL
				
-- get row count
SET @SQL = 'SELECT COUNT(*) as TotalRowCount'
SET @SQL = @SQL + ' FROM dbo.[RoleOfStaff]'
IF LEN(@WhereClause) > 0
BEGIN
    SET @SQL = @SQL + ' WHERE ' + @WhereClause
END
exec sp_executesql @SQL
			
END
]]></body>
		</procedure>
		
		<procedure owner="dbo" name="RoleOfStaff_Insert" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Inserts a record into the RoleOfStaff table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@RoleOfStaffId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@StaffId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@RoleId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@ResourceId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@ResourceType" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@IsApprove" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
                <parameter name="@IsActive" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@Status" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@FromDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@ToDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@LastModificationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
					
INSERT INTO dbo.[RoleOfStaff]
(
    [RoleOfStaffId],
    [StaffId],
    [RoleId],
    [ResourceId],
    [ResourceType],
    [IsApprove],
    [IsActive],
    [Status],
    [FromDate],
    [ToDate],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
)
VALUES
(
    @RoleOfStaffId,
    @StaffId,
    @RoleId,
    @ResourceId,
    @ResourceType,
    @IsApprove,
    @IsActive,
    @Status,
    @FromDate,
    @ToDate,
    @CreationDate,
    @CreationUserId,
    @LastModificationDate,
    @LastModificationUserId
)
				
									
							
			]]></body>
		</procedure>
		<procedure owner="dbo" name="RoleOfStaff_Update" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Updates a record in the RoleOfStaff table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@RoleOfStaffId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@OriginalRoleOfStaffId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@StaffId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@RoleId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@ResourceId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@ResourceType" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@IsApprove" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
                <parameter name="@IsActive" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@Status" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@FromDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@ToDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@LastModificationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[

				
-- Modify the updatable columns
UPDATE
    dbo.[RoleOfStaff]
SET
    [RoleOfStaffId] = @RoleOfStaffId,
    [StaffId] = @StaffId,
    [RoleId] = @RoleId,
    [ResourceId] = @ResourceId,
    [ResourceType] = @ResourceType,
    [IsApprove] = @IsApprove,
    [IsActive] = @IsActive,
    [Status] = @Status,
    [FromDate] = @FromDate,
    [ToDate] = @ToDate,
    [CreationDate] = @CreationDate,
    [CreationUserId] = @CreationUserId,
    [LastModificationDate] = @LastModificationDate,
    [LastModificationUserId] = @LastModificationUserId
WHERE
    [RoleOfStaffId] = @OriginalRoleOfStaffId 

				
			]]></body>
		</procedure>
		<procedure owner="dbo" name="RoleOfStaff_Delete" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Deletes a record in the RoleOfStaff table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@RoleOfStaffId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
DELETE FROM dbo.[RoleOfStaff] WITH (ROWLOCK) 
WHERE
    [RoleOfStaffId] = @RoleOfStaffId
					
			]]></body>
		</procedure>
		<procedure owner="dbo" name="RoleOfStaff_GetByRoleId" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Select records from the RoleOfStaff table through a foreign key
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@RoleId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
SET ANSI_NULLS OFF

SELECT
    [RoleOfStaffId],
    [StaffId],
    [RoleId],
    [ResourceId],
    [ResourceType],
    [IsApprove],
    [IsActive],
    [Status],
    [FromDate],
    [ToDate],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
FROM
    dbo.[RoleOfStaff]
WHERE
    [RoleId] = @RoleId
				
Select @@ROWCOUNT
SET ANSI_NULLS ON
]]></body>
		</procedure>
		<procedure owner="dbo" name="RoleOfStaff_GetByStaffId" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Select records from the RoleOfStaff table through a foreign key
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@StaffId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
SET ANSI_NULLS OFF

SELECT
    [RoleOfStaffId],
    [StaffId],
    [RoleId],
    [ResourceId],
    [ResourceType],
    [IsApprove],
    [IsActive],
    [Status],
    [FromDate],
    [ToDate],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
FROM
    dbo.[RoleOfStaff]
WHERE
    [StaffId] = @StaffId
				
Select @@ROWCOUNT
SET ANSI_NULLS ON
]]></body>
		</procedure>
		<procedure owner="dbo" name="RoleOfStaff_GetByRoleOfStaffId" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Select records from the RoleOfStaff table through an index
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@RoleOfStaffId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
SELECT
    [RoleOfStaffId],
    [StaffId],
    [RoleId],
    [ResourceId],
    [ResourceType],
    [IsApprove],
    [IsActive],
    [Status],
    [FromDate],
    [ToDate],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
FROM
    dbo.[RoleOfStaff]
WHERE
    [RoleOfStaffId] = @RoleOfStaffId
Select @@ROWCOUNT
					
]]></body>
			
		</procedure>
		<procedure owner="dbo" name="RoleOfStaff_Find" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Finds records in the RoleOfStaff table passing nullable parameters
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
				<parameter name="@SearchUsingOR" type="bit" direction="Input" size="0" precision="1" scale="0" param="" nulldefault="null"/>
                <parameter name="@RoleOfStaffId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@StaffId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@RoleId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@ResourceId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@ResourceType" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@IsApprove" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault="null"/>
                <parameter name="@IsActive" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault="null"/>
                <parameter name="@Status" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@FromDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault="null"/>
                <parameter name="@ToDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault="null"/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault="null"/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@LastModificationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault="null"/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
			</parameters>
			<body><![CDATA[

IF ISNULL(@SearchUsingOR, 0) <> 1
BEGIN
    SELECT
        [RoleOfStaffId], 
        [StaffId], 
        [RoleId], 
        [ResourceId], 
        [ResourceType], 
        [IsApprove], 
        [IsActive], 
        [Status], 
        [FromDate], 
        [ToDate], 
        [CreationDate], 
        [CreationUserId], 
        [LastModificationDate], 
        [LastModificationUserId]
    FROM
        dbo.[RoleOfStaff]
    WHERE 
     ([RoleOfStaffId] = @RoleOfStaffId OR @RoleOfStaffId is null)
    AND ([StaffId] = @StaffId OR @StaffId is null)
    AND ([RoleId] = @RoleId OR @RoleId is null)
    AND ([ResourceId] = @ResourceId OR @ResourceId is null)
    AND ([ResourceType] = @ResourceType OR @ResourceType is null)
    AND ([IsApprove] = @IsApprove OR @IsApprove is null)
    AND ([IsActive] = @IsActive OR @IsActive is null)
    AND ([Status] = @Status OR @Status is null)
    AND ([FromDate] = @FromDate OR @FromDate is null)
    AND ([ToDate] = @ToDate OR @ToDate is null)
    AND ([CreationDate] = @CreationDate OR @CreationDate is null)
    AND ([CreationUserId] = @CreationUserId OR @CreationUserId is null)
    AND ([LastModificationDate] = @LastModificationDate OR @LastModificationDate is null)
    AND ([LastModificationUserId] = @LastModificationUserId OR @LastModificationUserId is null)
END
ELSE
    BEGIN
        SELECT
            [RoleOfStaffId], 
            [StaffId], 
            [RoleId], 
            [ResourceId], 
            [ResourceType], 
            [IsApprove], 
            [IsActive], 
            [Status], 
            [FromDate], 
            [ToDate], 
            [CreationDate], 
            [CreationUserId], 
            [LastModificationDate], 
            [LastModificationUserId]
        FROM
            dbo.[RoleOfStaff]
        WHERE
     ([RoleOfStaffId] = @RoleOfStaffId AND @RoleOfStaffId is not null)
    OR ([StaffId] = @StaffId AND @StaffId is not null)
    OR ([RoleId] = @RoleId AND @RoleId is not null)
    OR ([ResourceId] = @ResourceId AND @ResourceId is not null)
    OR ([ResourceType] = @ResourceType AND @ResourceType is not null)
    OR ([IsApprove] = @IsApprove AND @IsApprove is not null)
    OR ([IsActive] = @IsActive AND @IsActive is not null)
    OR ([Status] = @Status AND @Status is not null)
    OR ([FromDate] = @FromDate AND @FromDate is not null)
    OR ([ToDate] = @ToDate AND @ToDate is not null)
    OR ([CreationDate] = @CreationDate AND @CreationDate is not null)
    OR ([CreationUserId] = @CreationUserId AND @CreationUserId is not null)
    OR ([LastModificationDate] = @LastModificationDate AND @LastModificationDate is not null)
    OR ([LastModificationUserId] = @LastModificationUserId AND @LastModificationUserId is not null)
        Select @@ROWCOUNT			
    END
	]]></body>
		</procedure>

		
		<procedure owner="dbo" name="RoleOfStaff_Find_Dynamic" grant="" skip="true">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets records from the RoleOfStaff table using a dynamically generated query.
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters/>
			<body><![CDATA[

BEGIN
				
with PageIndex as (
	select top {3} row_number() over (order by {1}) as RowIndex
	, [RoleOfStaffId]
	, [StaffId]
	, [RoleId]
	, [ResourceId]
	, [ResourceType]
	, [IsApprove]
	, [IsActive]
	, [Status]
	, [FromDate]
	, [ToDate]
	, [CreationDate]
	, [CreationUserId]
	, [LastModificationDate]
	, [LastModificationUserId]
	from dbo.[RoleOfStaff] {0}
	)
select
    [RoleOfStaffId],
    [StaffId],
    [RoleId],
    [ResourceId],
    [ResourceType],
    [IsApprove],
    [IsActive],
    [Status],
    [FromDate],
    [ToDate],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
from PageIndex
where RowIndex > {2}
and RowIndex <= {3};
				

				-- get total count
				select count(*) as TotalRowCount from dbo.[RoleOfStaff] {0};
			
				END
			]]></body>
		</procedure>
		
		
		<procedure owner="dbo" name="Unit_Get_List" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets all records from the Unit table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters/>
			<body><![CDATA[

SELECT
    [UnitId],
    [Name],
    [Description],
    [IsActive],
    [IsDeletable],
    [Priority],
    [IsBaseUnit],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
FROM
    dbo.[Unit]
					
Select @@ROWCOUNT
]]></body>
		</procedure>
		
		
		<procedure owner="dbo" name="Unit_GetPaged" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets records from the Unit table passing page index and page count parameters
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
				<parameter name="@WhereClause" type="varchar" direction="Input" size="2000" precision="0" scale="0" param="(2000)" />
				<parameter name="@OrderBy" type="varchar" direction="Input" size="2000" precision="0" scale="0" param="(2000)"/>
				<parameter name="@PageIndex" type="int" direction="Input" size="0" precision="10" scale="0" />
				<parameter name="@PageSize" type="int" direction="Input" size="0" precision="10" scale="0" /> 
			</parameters>
			<body><![CDATA[

BEGIN
DECLARE @PageLowerBound int
DECLARE @PageUpperBound int
				
-- Set the page bounds
SET @PageLowerBound = @PageSize * @PageIndex
SET @PageUpperBound = @PageLowerBound + @PageSize

IF (@OrderBy is null or LEN(@OrderBy) < 1)
BEGIN
    -- default order by to first column
    SET @OrderBy = '[UnitId]'
END

-- SQL Server 2005 Paging
declare @SQL as nvarchar(4000)
SET @SQL = 'WITH PageIndex AS ('
SET @SQL = @SQL + ' SELECT'
IF @PageSize > 0
BEGIN
    SET @SQL = @SQL + ' TOP ' + convert(nvarchar, @PageUpperBound)
END
SET @SQL = @SQL + ' ROW_NUMBER() OVER (ORDER BY ' + @OrderBy + ') as RowIndex'
SET @SQL = @SQL + ', [UnitId]'
SET @SQL = @SQL + ', [Name]'
SET @SQL = @SQL + ', [Description]'
SET @SQL = @SQL + ', [IsActive]'
SET @SQL = @SQL + ', [IsDeletable]'
SET @SQL = @SQL + ', [Priority]'
SET @SQL = @SQL + ', [IsBaseUnit]'
SET @SQL = @SQL + ', [CreationDate]'
SET @SQL = @SQL + ', [CreationUserId]'
SET @SQL = @SQL + ', [LastModificationDate]'
SET @SQL = @SQL + ', [LastModificationUserId]'
SET @SQL = @SQL + ' FROM dbo.[Unit]'
IF LEN(@WhereClause) > 0
BEGIN
    SET @SQL = @SQL + ' WHERE ' + @WhereClause
END
SET @SQL = @SQL + ' ) SELECT'
SET @SQL = @SQL + ' [UnitId],'
SET @SQL = @SQL + ' [Name],'
SET @SQL = @SQL + ' [Description],'
SET @SQL = @SQL + ' [IsActive],'
SET @SQL = @SQL + ' [IsDeletable],'
SET @SQL = @SQL + ' [Priority],'
SET @SQL = @SQL + ' [IsBaseUnit],'
SET @SQL = @SQL + ' [CreationDate],'
SET @SQL = @SQL + ' [CreationUserId],'
SET @SQL = @SQL + ' [LastModificationDate],'
SET @SQL = @SQL + ' [LastModificationUserId]'
SET @SQL = @SQL + ' FROM PageIndex'
SET @SQL = @SQL + ' WHERE RowIndex > ' + convert(nvarchar, @PageLowerBound)
IF @PageSize > 0
BEGIN
    SET @SQL = @SQL + ' AND RowIndex <= ' + convert(nvarchar, @PageUpperBound)
END
exec sp_executesql @SQL
				
-- get row count
SET @SQL = 'SELECT COUNT(*) as TotalRowCount'
SET @SQL = @SQL + ' FROM dbo.[Unit]'
IF LEN(@WhereClause) > 0
BEGIN
    SET @SQL = @SQL + ' WHERE ' + @WhereClause
END
exec sp_executesql @SQL
			
END
]]></body>
		</procedure>
		
		<procedure owner="dbo" name="Unit_Insert" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Inserts a record into the Unit table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@UnitId" type="int" direction="Output" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@Name" type="nvarchar" direction="Input" size="300" precision="0" scale="0" param="(300)" nulldefault=""/>
                <parameter name="@Description" type="ntext" direction="Input" size="16" precision="0" scale="0" param="" nulldefault=""/>
                <parameter name="@IsActive" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@IsDeletable" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@Priority" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@IsBaseUnit" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@LastModificationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
					
INSERT INTO dbo.[Unit]
(
    [Name],
    [Description],
    [IsActive],
    [IsDeletable],
    [Priority],
    [IsBaseUnit],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
)
VALUES
(
    @Name,
    @Description,
    @IsActive,
    @IsDeletable,
    @Priority,
    @IsBaseUnit,
    @CreationDate,
    @CreationUserId,
    @LastModificationDate,
    @LastModificationUserId
)
				
-- Get the identity value
SET @UnitId = SCOPE_IDENTITY()
									
							
			]]></body>
		</procedure>
		<procedure owner="dbo" name="Unit_Update" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Updates a record in the Unit table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@UnitId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@Name" type="nvarchar" direction="Input" size="300" precision="0" scale="0" param="(300)" nulldefault=""/>
                <parameter name="@Description" type="ntext" direction="Input" size="16" precision="0" scale="0" param="" nulldefault=""/>
                <parameter name="@IsActive" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@IsDeletable" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@Priority" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@IsBaseUnit" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@LastModificationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[

				
-- Modify the updatable columns
UPDATE
    dbo.[Unit]
SET
    [Name] = @Name,
    [Description] = @Description,
    [IsActive] = @IsActive,
    [IsDeletable] = @IsDeletable,
    [Priority] = @Priority,
    [IsBaseUnit] = @IsBaseUnit,
    [CreationDate] = @CreationDate,
    [CreationUserId] = @CreationUserId,
    [LastModificationDate] = @LastModificationDate,
    [LastModificationUserId] = @LastModificationUserId
WHERE
    [UnitId] = @UnitId 

				
			]]></body>
		</procedure>
		<procedure owner="dbo" name="Unit_Delete" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Deletes a record in the Unit table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@UnitId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
DELETE FROM dbo.[Unit] WITH (ROWLOCK) 
WHERE
    [UnitId] = @UnitId
					
			]]></body>
		</procedure>
		<procedure owner="dbo" name="Unit_GetByUnitId" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Select records from the Unit table through an index
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@UnitId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
SELECT
    [UnitId],
    [Name],
    [Description],
    [IsActive],
    [IsDeletable],
    [Priority],
    [IsBaseUnit],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
FROM
    dbo.[Unit]
WHERE
    [UnitId] = @UnitId
Select @@ROWCOUNT
					
]]></body>
			
		</procedure>
		<procedure owner="dbo" name="Unit_GetByToUnitIdFromUnitConvertor" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets records through a junction table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@ToUnitId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
SELECT dbo.[Unit].[UnitId]
       ,dbo.[Unit].[Name]
       ,dbo.[Unit].[Description]
       ,dbo.[Unit].[IsActive]
       ,dbo.[Unit].[IsDeletable]
       ,dbo.[Unit].[Priority]
       ,dbo.[Unit].[IsBaseUnit]
       ,dbo.[Unit].[CreationDate]
       ,dbo.[Unit].[CreationUserId]
       ,dbo.[Unit].[LastModificationDate]
       ,dbo.[Unit].[LastModificationUserId]
  FROM dbo.[Unit]
 WHERE EXISTS (SELECT 1
                 FROM dbo.[UnitConvertor] 
                WHERE dbo.[UnitConvertor].[ToUnitId] = @ToUnitId
                  AND dbo.[UnitConvertor].[FromUnitId] = dbo.[Unit].[UnitId]
                  )
				Select @@ROWCOUNT			
				]]></body>
		</procedure>
		<procedure owner="dbo" name="Unit_GetByFromUnitIdFromUnitConvertor" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets records through a junction table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@FromUnitId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
SELECT dbo.[Unit].[UnitId]
       ,dbo.[Unit].[Name]
       ,dbo.[Unit].[Description]
       ,dbo.[Unit].[IsActive]
       ,dbo.[Unit].[IsDeletable]
       ,dbo.[Unit].[Priority]
       ,dbo.[Unit].[IsBaseUnit]
       ,dbo.[Unit].[CreationDate]
       ,dbo.[Unit].[CreationUserId]
       ,dbo.[Unit].[LastModificationDate]
       ,dbo.[Unit].[LastModificationUserId]
  FROM dbo.[Unit]
 WHERE EXISTS (SELECT 1
                 FROM dbo.[UnitConvertor] 
                WHERE dbo.[UnitConvertor].[FromUnitId] = @FromUnitId
                  AND dbo.[UnitConvertor].[ToUnitId] = dbo.[Unit].[UnitId]
                  )
				Select @@ROWCOUNT			
				]]></body>
		</procedure>
		<procedure owner="dbo" name="Unit_Find" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Finds records in the Unit table passing nullable parameters
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
				<parameter name="@SearchUsingOR" type="bit" direction="Input" size="0" precision="1" scale="0" param="" nulldefault="null"/>
                <parameter name="@UnitId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@Name" type="nvarchar" direction="Input" size="300" precision="0" scale="0" param="(300)" nulldefault="null"/>
                <parameter name="@Description" type="ntext" direction="Input" size="16" precision="0" scale="0" param="" nulldefault="null"/>
                <parameter name="@IsActive" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault="null"/>
                <parameter name="@IsDeletable" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault="null"/>
                <parameter name="@Priority" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@IsBaseUnit" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault="null"/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault="null"/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@LastModificationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault="null"/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
			</parameters>
			<body><![CDATA[

IF ISNULL(@SearchUsingOR, 0) <> 1
BEGIN
    SELECT
        [UnitId], 
        [Name], 
        [Description], 
        [IsActive], 
        [IsDeletable], 
        [Priority], 
        [IsBaseUnit], 
        [CreationDate], 
        [CreationUserId], 
        [LastModificationDate], 
        [LastModificationUserId]
    FROM
        dbo.[Unit]
    WHERE 
     ([UnitId] = @UnitId OR @UnitId is null)
    AND ([Name] = @Name OR @Name is null)
    AND ([IsActive] = @IsActive OR @IsActive is null)
    AND ([IsDeletable] = @IsDeletable OR @IsDeletable is null)
    AND ([Priority] = @Priority OR @Priority is null)
    AND ([IsBaseUnit] = @IsBaseUnit OR @IsBaseUnit is null)
    AND ([CreationDate] = @CreationDate OR @CreationDate is null)
    AND ([CreationUserId] = @CreationUserId OR @CreationUserId is null)
    AND ([LastModificationDate] = @LastModificationDate OR @LastModificationDate is null)
    AND ([LastModificationUserId] = @LastModificationUserId OR @LastModificationUserId is null)
END
ELSE
    BEGIN
        SELECT
            [UnitId], 
            [Name], 
            [Description], 
            [IsActive], 
            [IsDeletable], 
            [Priority], 
            [IsBaseUnit], 
            [CreationDate], 
            [CreationUserId], 
            [LastModificationDate], 
            [LastModificationUserId]
        FROM
            dbo.[Unit]
        WHERE
     ([UnitId] = @UnitId AND @UnitId is not null)
    OR ([Name] = @Name AND @Name is not null)
    OR ([IsActive] = @IsActive AND @IsActive is not null)
    OR ([IsDeletable] = @IsDeletable AND @IsDeletable is not null)
    OR ([Priority] = @Priority AND @Priority is not null)
    OR ([IsBaseUnit] = @IsBaseUnit AND @IsBaseUnit is not null)
    OR ([CreationDate] = @CreationDate AND @CreationDate is not null)
    OR ([CreationUserId] = @CreationUserId AND @CreationUserId is not null)
    OR ([LastModificationDate] = @LastModificationDate AND @LastModificationDate is not null)
    OR ([LastModificationUserId] = @LastModificationUserId AND @LastModificationUserId is not null)
        Select @@ROWCOUNT			
    END
	]]></body>
		</procedure>

		
		<procedure owner="dbo" name="Unit_Find_Dynamic" grant="" skip="true">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets records from the Unit table using a dynamically generated query.
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters/>
			<body><![CDATA[

BEGIN
				
with PageIndex as (
	select top {3} row_number() over (order by {1}) as RowIndex
	, [UnitId]
	, [Name]
	, [Description]
	, [IsActive]
	, [IsDeletable]
	, [Priority]
	, [IsBaseUnit]
	, [CreationDate]
	, [CreationUserId]
	, [LastModificationDate]
	, [LastModificationUserId]
	from dbo.[Unit] {0}
	)
select
    [UnitId],
    [Name],
    [Description],
    [IsActive],
    [IsDeletable],
    [Priority],
    [IsBaseUnit],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
from PageIndex
where RowIndex > {2}
and RowIndex <= {3};
				

				-- get total count
				select count(*) as TotalRowCount from dbo.[Unit] {0};
			
				END
			]]></body>
		</procedure>
		
		
		<procedure owner="dbo" name="Project_Get_List" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets all records from the Project table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters/>
			<body><![CDATA[

SELECT
    [ProjectId],
    [GroupId],
    [ContractId],
    [Code],
    [Name],
    [DesignedPrice],
    [FinalPrice],
    [IsActive],
    [IsApprove],
    [Status],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
FROM
    dbo.[Project]
					
Select @@ROWCOUNT
]]></body>
		</procedure>
		
		
		<procedure owner="dbo" name="Project_GetPaged" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets records from the Project table passing page index and page count parameters
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
				<parameter name="@WhereClause" type="varchar" direction="Input" size="2000" precision="0" scale="0" param="(2000)" />
				<parameter name="@OrderBy" type="varchar" direction="Input" size="2000" precision="0" scale="0" param="(2000)"/>
				<parameter name="@PageIndex" type="int" direction="Input" size="0" precision="10" scale="0" />
				<parameter name="@PageSize" type="int" direction="Input" size="0" precision="10" scale="0" /> 
			</parameters>
			<body><![CDATA[

BEGIN
DECLARE @PageLowerBound int
DECLARE @PageUpperBound int
				
-- Set the page bounds
SET @PageLowerBound = @PageSize * @PageIndex
SET @PageUpperBound = @PageLowerBound + @PageSize

IF (@OrderBy is null or LEN(@OrderBy) < 1)
BEGIN
    -- default order by to first column
    SET @OrderBy = '[ProjectId]'
END

-- SQL Server 2005 Paging
declare @SQL as nvarchar(4000)
SET @SQL = 'WITH PageIndex AS ('
SET @SQL = @SQL + ' SELECT'
IF @PageSize > 0
BEGIN
    SET @SQL = @SQL + ' TOP ' + convert(nvarchar, @PageUpperBound)
END
SET @SQL = @SQL + ' ROW_NUMBER() OVER (ORDER BY ' + @OrderBy + ') as RowIndex'
SET @SQL = @SQL + ', [ProjectId]'
SET @SQL = @SQL + ', [GroupId]'
SET @SQL = @SQL + ', [ContractId]'
SET @SQL = @SQL + ', [Code]'
SET @SQL = @SQL + ', [Name]'
SET @SQL = @SQL + ', [DesignedPrice]'
SET @SQL = @SQL + ', [FinalPrice]'
SET @SQL = @SQL + ', [IsActive]'
SET @SQL = @SQL + ', [IsApprove]'
SET @SQL = @SQL + ', [Status]'
SET @SQL = @SQL + ', [CreationDate]'
SET @SQL = @SQL + ', [CreationUserId]'
SET @SQL = @SQL + ', [LastModificationDate]'
SET @SQL = @SQL + ', [LastModificationUserId]'
SET @SQL = @SQL + ' FROM dbo.[Project]'
IF LEN(@WhereClause) > 0
BEGIN
    SET @SQL = @SQL + ' WHERE ' + @WhereClause
END
SET @SQL = @SQL + ' ) SELECT'
SET @SQL = @SQL + ' [ProjectId],'
SET @SQL = @SQL + ' [GroupId],'
SET @SQL = @SQL + ' [ContractId],'
SET @SQL = @SQL + ' [Code],'
SET @SQL = @SQL + ' [Name],'
SET @SQL = @SQL + ' [DesignedPrice],'
SET @SQL = @SQL + ' [FinalPrice],'
SET @SQL = @SQL + ' [IsActive],'
SET @SQL = @SQL + ' [IsApprove],'
SET @SQL = @SQL + ' [Status],'
SET @SQL = @SQL + ' [CreationDate],'
SET @SQL = @SQL + ' [CreationUserId],'
SET @SQL = @SQL + ' [LastModificationDate],'
SET @SQL = @SQL + ' [LastModificationUserId]'
SET @SQL = @SQL + ' FROM PageIndex'
SET @SQL = @SQL + ' WHERE RowIndex > ' + convert(nvarchar, @PageLowerBound)
IF @PageSize > 0
BEGIN
    SET @SQL = @SQL + ' AND RowIndex <= ' + convert(nvarchar, @PageUpperBound)
END
exec sp_executesql @SQL
				
-- get row count
SET @SQL = 'SELECT COUNT(*) as TotalRowCount'
SET @SQL = @SQL + ' FROM dbo.[Project]'
IF LEN(@WhereClause) > 0
BEGIN
    SET @SQL = @SQL + ' WHERE ' + @WhereClause
END
exec sp_executesql @SQL
			
END
]]></body>
		</procedure>
		
		<procedure owner="dbo" name="Project_Insert" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Inserts a record into the Project table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@ProjectId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@GroupId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@ContractId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@Code" type="nvarchar" direction="Input" size="100" precision="0" scale="0" param="(100)" nulldefault=""/>
                <parameter name="@Name" type="nvarchar" direction="Input" size="500" precision="0" scale="0" param="(500)" nulldefault=""/>
                <parameter name="@DesignedPrice" type="money" direction="Input" size="8" precision="19" scale="4" param="" nulldefault=""/>
                <parameter name="@FinalPrice" type="money" direction="Input" size="8" precision="19" scale="4" param="" nulldefault=""/>
                <parameter name="@IsActive" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
                <parameter name="@IsApprove" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
                <parameter name="@Status" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@LastModificationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
					
INSERT INTO dbo.[Project]
(
    [ProjectId],
    [GroupId],
    [ContractId],
    [Code],
    [Name],
    [DesignedPrice],
    [FinalPrice],
    [IsActive],
    [IsApprove],
    [Status],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
)
VALUES
(
    @ProjectId,
    @GroupId,
    @ContractId,
    @Code,
    @Name,
    @DesignedPrice,
    @FinalPrice,
    @IsActive,
    @IsApprove,
    @Status,
    @CreationDate,
    @CreationUserId,
    @LastModificationDate,
    @LastModificationUserId
)
				
									
							
			]]></body>
		</procedure>
		<procedure owner="dbo" name="Project_Update" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Updates a record in the Project table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@ProjectId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@OriginalProjectId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@GroupId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@ContractId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@Code" type="nvarchar" direction="Input" size="100" precision="0" scale="0" param="(100)" nulldefault=""/>
                <parameter name="@Name" type="nvarchar" direction="Input" size="500" precision="0" scale="0" param="(500)" nulldefault=""/>
                <parameter name="@DesignedPrice" type="money" direction="Input" size="8" precision="19" scale="4" param="" nulldefault=""/>
                <parameter name="@FinalPrice" type="money" direction="Input" size="8" precision="19" scale="4" param="" nulldefault=""/>
                <parameter name="@IsActive" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
                <parameter name="@IsApprove" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
                <parameter name="@Status" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@LastModificationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[

				
-- Modify the updatable columns
UPDATE
    dbo.[Project]
SET
    [ProjectId] = @ProjectId,
    [GroupId] = @GroupId,
    [ContractId] = @ContractId,
    [Code] = @Code,
    [Name] = @Name,
    [DesignedPrice] = @DesignedPrice,
    [FinalPrice] = @FinalPrice,
    [IsActive] = @IsActive,
    [IsApprove] = @IsApprove,
    [Status] = @Status,
    [CreationDate] = @CreationDate,
    [CreationUserId] = @CreationUserId,
    [LastModificationDate] = @LastModificationDate,
    [LastModificationUserId] = @LastModificationUserId
WHERE
    [ProjectId] = @OriginalProjectId 

				
			]]></body>
		</procedure>
		<procedure owner="dbo" name="Project_Delete" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Deletes a record in the Project table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@ProjectId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
DELETE FROM dbo.[Project] WITH (ROWLOCK) 
WHERE
    [ProjectId] = @ProjectId
					
			]]></body>
		</procedure>
		<procedure owner="dbo" name="Project_GetByContractId" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Select records from the Project table through a foreign key
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@ContractId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
SET ANSI_NULLS OFF

SELECT
    [ProjectId],
    [GroupId],
    [ContractId],
    [Code],
    [Name],
    [DesignedPrice],
    [FinalPrice],
    [IsActive],
    [IsApprove],
    [Status],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
FROM
    dbo.[Project]
WHERE
    [ContractId] = @ContractId
				
Select @@ROWCOUNT
SET ANSI_NULLS ON
]]></body>
		</procedure>
		<procedure owner="dbo" name="Project_GetByGroupId" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Select records from the Project table through a foreign key
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@GroupId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
SET ANSI_NULLS OFF

SELECT
    [ProjectId],
    [GroupId],
    [ContractId],
    [Code],
    [Name],
    [DesignedPrice],
    [FinalPrice],
    [IsActive],
    [IsApprove],
    [Status],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
FROM
    dbo.[Project]
WHERE
    [GroupId] = @GroupId
				
Select @@ROWCOUNT
SET ANSI_NULLS ON
]]></body>
		</procedure>
		<procedure owner="dbo" name="Project_GetByProjectId" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Select records from the Project table through an index
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@ProjectId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
SELECT
    [ProjectId],
    [GroupId],
    [ContractId],
    [Code],
    [Name],
    [DesignedPrice],
    [FinalPrice],
    [IsActive],
    [IsApprove],
    [Status],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
FROM
    dbo.[Project]
WHERE
    [ProjectId] = @ProjectId
Select @@ROWCOUNT
					
]]></body>
			
		</procedure>
		<procedure owner="dbo" name="Project_Find" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Finds records in the Project table passing nullable parameters
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
				<parameter name="@SearchUsingOR" type="bit" direction="Input" size="0" precision="1" scale="0" param="" nulldefault="null"/>
                <parameter name="@ProjectId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@GroupId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@ContractId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@Code" type="nvarchar" direction="Input" size="100" precision="0" scale="0" param="(100)" nulldefault="null"/>
                <parameter name="@Name" type="nvarchar" direction="Input" size="500" precision="0" scale="0" param="(500)" nulldefault="null"/>
                <parameter name="@DesignedPrice" type="money" direction="Input" size="8" precision="19" scale="4" param="" nulldefault="null"/>
                <parameter name="@FinalPrice" type="money" direction="Input" size="8" precision="19" scale="4" param="" nulldefault="null"/>
                <parameter name="@IsActive" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault="null"/>
                <parameter name="@IsApprove" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault="null"/>
                <parameter name="@Status" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault="null"/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@LastModificationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault="null"/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
			</parameters>
			<body><![CDATA[

IF ISNULL(@SearchUsingOR, 0) <> 1
BEGIN
    SELECT
        [ProjectId], 
        [GroupId], 
        [ContractId], 
        [Code], 
        [Name], 
        [DesignedPrice], 
        [FinalPrice], 
        [IsActive], 
        [IsApprove], 
        [Status], 
        [CreationDate], 
        [CreationUserId], 
        [LastModificationDate], 
        [LastModificationUserId]
    FROM
        dbo.[Project]
    WHERE 
     ([ProjectId] = @ProjectId OR @ProjectId is null)
    AND ([GroupId] = @GroupId OR @GroupId is null)
    AND ([ContractId] = @ContractId OR @ContractId is null)
    AND ([Code] = @Code OR @Code is null)
    AND ([Name] = @Name OR @Name is null)
    AND ([DesignedPrice] = @DesignedPrice OR @DesignedPrice is null)
    AND ([FinalPrice] = @FinalPrice OR @FinalPrice is null)
    AND ([IsActive] = @IsActive OR @IsActive is null)
    AND ([IsApprove] = @IsApprove OR @IsApprove is null)
    AND ([Status] = @Status OR @Status is null)
    AND ([CreationDate] = @CreationDate OR @CreationDate is null)
    AND ([CreationUserId] = @CreationUserId OR @CreationUserId is null)
    AND ([LastModificationDate] = @LastModificationDate OR @LastModificationDate is null)
    AND ([LastModificationUserId] = @LastModificationUserId OR @LastModificationUserId is null)
END
ELSE
    BEGIN
        SELECT
            [ProjectId], 
            [GroupId], 
            [ContractId], 
            [Code], 
            [Name], 
            [DesignedPrice], 
            [FinalPrice], 
            [IsActive], 
            [IsApprove], 
            [Status], 
            [CreationDate], 
            [CreationUserId], 
            [LastModificationDate], 
            [LastModificationUserId]
        FROM
            dbo.[Project]
        WHERE
     ([ProjectId] = @ProjectId AND @ProjectId is not null)
    OR ([GroupId] = @GroupId AND @GroupId is not null)
    OR ([ContractId] = @ContractId AND @ContractId is not null)
    OR ([Code] = @Code AND @Code is not null)
    OR ([Name] = @Name AND @Name is not null)
    OR ([DesignedPrice] = @DesignedPrice AND @DesignedPrice is not null)
    OR ([FinalPrice] = @FinalPrice AND @FinalPrice is not null)
    OR ([IsActive] = @IsActive AND @IsActive is not null)
    OR ([IsApprove] = @IsApprove AND @IsApprove is not null)
    OR ([Status] = @Status AND @Status is not null)
    OR ([CreationDate] = @CreationDate AND @CreationDate is not null)
    OR ([CreationUserId] = @CreationUserId AND @CreationUserId is not null)
    OR ([LastModificationDate] = @LastModificationDate AND @LastModificationDate is not null)
    OR ([LastModificationUserId] = @LastModificationUserId AND @LastModificationUserId is not null)
        Select @@ROWCOUNT			
    END
	]]></body>
		</procedure>

		
		<procedure owner="dbo" name="Project_Find_Dynamic" grant="" skip="true">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets records from the Project table using a dynamically generated query.
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters/>
			<body><![CDATA[

BEGIN
				
with PageIndex as (
	select top {3} row_number() over (order by {1}) as RowIndex
	, [ProjectId]
	, [GroupId]
	, [ContractId]
	, [Code]
	, [Name]
	, [DesignedPrice]
	, [FinalPrice]
	, [IsActive]
	, [IsApprove]
	, [Status]
	, [CreationDate]
	, [CreationUserId]
	, [LastModificationDate]
	, [LastModificationUserId]
	from dbo.[Project] {0}
	)
select
    [ProjectId],
    [GroupId],
    [ContractId],
    [Code],
    [Name],
    [DesignedPrice],
    [FinalPrice],
    [IsActive],
    [IsApprove],
    [Status],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
from PageIndex
where RowIndex > {2}
and RowIndex <= {3};
				

				-- get total count
				select count(*) as TotalRowCount from dbo.[Project] {0};
			
				END
			]]></body>
		</procedure>
		
		
		<procedure owner="dbo" name="ItemMovement_Get_List" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets all records from the ItemMovement table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters/>
			<body><![CDATA[

SELECT
    [RepositoryMovementId],
    [ItemId],
    [FromRepositoryId],
    [ToRepositoryId],
    [FromRepositoryManagerId],
    [ToRepositoryManagerId],
    [StranferUserId],
    [ReceiverUserId],
    [UnitPrice],
    [TotalQuantity],
    [TotalAmount],
    [Status],
    [IsActive],
    [IsApprove],
    [DeliveryDate],
    [ReceivedDate],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
FROM
    dbo.[ItemMovement]
					
Select @@ROWCOUNT
]]></body>
		</procedure>
		
		
		<procedure owner="dbo" name="ItemMovement_GetPaged" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets records from the ItemMovement table passing page index and page count parameters
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
				<parameter name="@WhereClause" type="varchar" direction="Input" size="2000" precision="0" scale="0" param="(2000)" />
				<parameter name="@OrderBy" type="varchar" direction="Input" size="2000" precision="0" scale="0" param="(2000)"/>
				<parameter name="@PageIndex" type="int" direction="Input" size="0" precision="10" scale="0" />
				<parameter name="@PageSize" type="int" direction="Input" size="0" precision="10" scale="0" /> 
			</parameters>
			<body><![CDATA[

BEGIN
DECLARE @PageLowerBound int
DECLARE @PageUpperBound int
				
-- Set the page bounds
SET @PageLowerBound = @PageSize * @PageIndex
SET @PageUpperBound = @PageLowerBound + @PageSize

IF (@OrderBy is null or LEN(@OrderBy) < 1)
BEGIN
    -- default order by to first column
    SET @OrderBy = '[RepositoryMovementId]'
END

-- SQL Server 2005 Paging
declare @SQL as nvarchar(4000)
SET @SQL = 'WITH PageIndex AS ('
SET @SQL = @SQL + ' SELECT'
IF @PageSize > 0
BEGIN
    SET @SQL = @SQL + ' TOP ' + convert(nvarchar, @PageUpperBound)
END
SET @SQL = @SQL + ' ROW_NUMBER() OVER (ORDER BY ' + @OrderBy + ') as RowIndex'
SET @SQL = @SQL + ', [RepositoryMovementId]'
SET @SQL = @SQL + ', [ItemId]'
SET @SQL = @SQL + ', [FromRepositoryId]'
SET @SQL = @SQL + ', [ToRepositoryId]'
SET @SQL = @SQL + ', [FromRepositoryManagerId]'
SET @SQL = @SQL + ', [ToRepositoryManagerId]'
SET @SQL = @SQL + ', [StranferUserId]'
SET @SQL = @SQL + ', [ReceiverUserId]'
SET @SQL = @SQL + ', [UnitPrice]'
SET @SQL = @SQL + ', [TotalQuantity]'
SET @SQL = @SQL + ', [TotalAmount]'
SET @SQL = @SQL + ', [Status]'
SET @SQL = @SQL + ', [IsActive]'
SET @SQL = @SQL + ', [IsApprove]'
SET @SQL = @SQL + ', [DeliveryDate]'
SET @SQL = @SQL + ', [ReceivedDate]'
SET @SQL = @SQL + ', [CreationDate]'
SET @SQL = @SQL + ', [CreationUserId]'
SET @SQL = @SQL + ', [LastModificationDate]'
SET @SQL = @SQL + ', [LastModificationUserId]'
SET @SQL = @SQL + ' FROM dbo.[ItemMovement]'
IF LEN(@WhereClause) > 0
BEGIN
    SET @SQL = @SQL + ' WHERE ' + @WhereClause
END
SET @SQL = @SQL + ' ) SELECT'
SET @SQL = @SQL + ' [RepositoryMovementId],'
SET @SQL = @SQL + ' [ItemId],'
SET @SQL = @SQL + ' [FromRepositoryId],'
SET @SQL = @SQL + ' [ToRepositoryId],'
SET @SQL = @SQL + ' [FromRepositoryManagerId],'
SET @SQL = @SQL + ' [ToRepositoryManagerId],'
SET @SQL = @SQL + ' [StranferUserId],'
SET @SQL = @SQL + ' [ReceiverUserId],'
SET @SQL = @SQL + ' [UnitPrice],'
SET @SQL = @SQL + ' [TotalQuantity],'
SET @SQL = @SQL + ' [TotalAmount],'
SET @SQL = @SQL + ' [Status],'
SET @SQL = @SQL + ' [IsActive],'
SET @SQL = @SQL + ' [IsApprove],'
SET @SQL = @SQL + ' [DeliveryDate],'
SET @SQL = @SQL + ' [ReceivedDate],'
SET @SQL = @SQL + ' [CreationDate],'
SET @SQL = @SQL + ' [CreationUserId],'
SET @SQL = @SQL + ' [LastModificationDate],'
SET @SQL = @SQL + ' [LastModificationUserId]'
SET @SQL = @SQL + ' FROM PageIndex'
SET @SQL = @SQL + ' WHERE RowIndex > ' + convert(nvarchar, @PageLowerBound)
IF @PageSize > 0
BEGIN
    SET @SQL = @SQL + ' AND RowIndex <= ' + convert(nvarchar, @PageUpperBound)
END
exec sp_executesql @SQL
				
-- get row count
SET @SQL = 'SELECT COUNT(*) as TotalRowCount'
SET @SQL = @SQL + ' FROM dbo.[ItemMovement]'
IF LEN(@WhereClause) > 0
BEGIN
    SET @SQL = @SQL + ' WHERE ' + @WhereClause
END
exec sp_executesql @SQL
			
END
]]></body>
		</procedure>
		
		<procedure owner="dbo" name="ItemMovement_Insert" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Inserts a record into the ItemMovement table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@RepositoryMovementId" type="int" direction="Output" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@ItemId" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
                <parameter name="@FromRepositoryId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@ToRepositoryId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@FromRepositoryManagerId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@ToRepositoryManagerId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@StranferUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@ReceiverUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@UnitPrice" type="money" direction="Input" size="8" precision="19" scale="4" param="" nulldefault=""/>
                <parameter name="@TotalQuantity" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
                <parameter name="@TotalAmount" type="money" direction="Input" size="8" precision="19" scale="4" param="" nulldefault=""/>
                <parameter name="@Status" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@IsActive" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
                <parameter name="@IsApprove" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@DeliveryDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@ReceivedDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@LastModificationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
					
INSERT INTO dbo.[ItemMovement]
(
    [ItemId],
    [FromRepositoryId],
    [ToRepositoryId],
    [FromRepositoryManagerId],
    [ToRepositoryManagerId],
    [StranferUserId],
    [ReceiverUserId],
    [UnitPrice],
    [TotalQuantity],
    [TotalAmount],
    [Status],
    [IsActive],
    [IsApprove],
    [DeliveryDate],
    [ReceivedDate],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
)
VALUES
(
    @ItemId,
    @FromRepositoryId,
    @ToRepositoryId,
    @FromRepositoryManagerId,
    @ToRepositoryManagerId,
    @StranferUserId,
    @ReceiverUserId,
    @UnitPrice,
    @TotalQuantity,
    @TotalAmount,
    @Status,
    @IsActive,
    @IsApprove,
    @DeliveryDate,
    @ReceivedDate,
    @CreationDate,
    @CreationUserId,
    @LastModificationDate,
    @LastModificationUserId
)
				
-- Get the identity value
SET @RepositoryMovementId = SCOPE_IDENTITY()
									
							
			]]></body>
		</procedure>
		<procedure owner="dbo" name="ItemMovement_Update" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Updates a record in the ItemMovement table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@RepositoryMovementId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@ItemId" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
                <parameter name="@FromRepositoryId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@ToRepositoryId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@FromRepositoryManagerId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@ToRepositoryManagerId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@StranferUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@ReceiverUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@UnitPrice" type="money" direction="Input" size="8" precision="19" scale="4" param="" nulldefault=""/>
                <parameter name="@TotalQuantity" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
                <parameter name="@TotalAmount" type="money" direction="Input" size="8" precision="19" scale="4" param="" nulldefault=""/>
                <parameter name="@Status" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@IsActive" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
                <parameter name="@IsApprove" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault=""/>
                <parameter name="@DeliveryDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@ReceivedDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
                <parameter name="@LastModificationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault=""/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[

				
-- Modify the updatable columns
UPDATE
    dbo.[ItemMovement]
SET
    [ItemId] = @ItemId,
    [FromRepositoryId] = @FromRepositoryId,
    [ToRepositoryId] = @ToRepositoryId,
    [FromRepositoryManagerId] = @FromRepositoryManagerId,
    [ToRepositoryManagerId] = @ToRepositoryManagerId,
    [StranferUserId] = @StranferUserId,
    [ReceiverUserId] = @ReceiverUserId,
    [UnitPrice] = @UnitPrice,
    [TotalQuantity] = @TotalQuantity,
    [TotalAmount] = @TotalAmount,
    [Status] = @Status,
    [IsActive] = @IsActive,
    [IsApprove] = @IsApprove,
    [DeliveryDate] = @DeliveryDate,
    [ReceivedDate] = @ReceivedDate,
    [CreationDate] = @CreationDate,
    [CreationUserId] = @CreationUserId,
    [LastModificationDate] = @LastModificationDate,
    [LastModificationUserId] = @LastModificationUserId
WHERE
    [RepositoryMovementId] = @RepositoryMovementId 

				
			]]></body>
		</procedure>
		<procedure owner="dbo" name="ItemMovement_Delete" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Deletes a record in the ItemMovement table
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@RepositoryMovementId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
DELETE FROM dbo.[ItemMovement] WITH (ROWLOCK) 
WHERE
    [RepositoryMovementId] = @RepositoryMovementId
					
			]]></body>
		</procedure>
		<procedure owner="dbo" name="ItemMovement_GetByItemId" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Select records from the ItemMovement table through a foreign key
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@ItemId" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
SET ANSI_NULLS OFF

SELECT
    [RepositoryMovementId],
    [ItemId],
    [FromRepositoryId],
    [ToRepositoryId],
    [FromRepositoryManagerId],
    [ToRepositoryManagerId],
    [StranferUserId],
    [ReceiverUserId],
    [UnitPrice],
    [TotalQuantity],
    [TotalAmount],
    [Status],
    [IsActive],
    [IsApprove],
    [DeliveryDate],
    [ReceivedDate],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
FROM
    dbo.[ItemMovement]
WHERE
    [ItemId] = @ItemId
				
Select @@ROWCOUNT
SET ANSI_NULLS ON
]]></body>
		</procedure>
		<procedure owner="dbo" name="ItemMovement_GetByFromRepositoryId" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Select records from the ItemMovement table through a foreign key
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@FromRepositoryId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
SET ANSI_NULLS OFF

SELECT
    [RepositoryMovementId],
    [ItemId],
    [FromRepositoryId],
    [ToRepositoryId],
    [FromRepositoryManagerId],
    [ToRepositoryManagerId],
    [StranferUserId],
    [ReceiverUserId],
    [UnitPrice],
    [TotalQuantity],
    [TotalAmount],
    [Status],
    [IsActive],
    [IsApprove],
    [DeliveryDate],
    [ReceivedDate],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
FROM
    dbo.[ItemMovement]
WHERE
    [FromRepositoryId] = @FromRepositoryId
				
Select @@ROWCOUNT
SET ANSI_NULLS ON
]]></body>
		</procedure>
		<procedure owner="dbo" name="ItemMovement_GetByToRepositoryId" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Select records from the ItemMovement table through a foreign key
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@ToRepositoryId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
SET ANSI_NULLS OFF

SELECT
    [RepositoryMovementId],
    [ItemId],
    [FromRepositoryId],
    [ToRepositoryId],
    [FromRepositoryManagerId],
    [ToRepositoryManagerId],
    [StranferUserId],
    [ReceiverUserId],
    [UnitPrice],
    [TotalQuantity],
    [TotalAmount],
    [Status],
    [IsActive],
    [IsApprove],
    [DeliveryDate],
    [ReceivedDate],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
FROM
    dbo.[ItemMovement]
WHERE
    [ToRepositoryId] = @ToRepositoryId
				
Select @@ROWCOUNT
SET ANSI_NULLS ON
]]></body>
		</procedure>
		<procedure owner="dbo" name="ItemMovement_GetByRepositoryMovementId" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Select records from the ItemMovement table through an index
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
                <parameter name="@RepositoryMovementId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault=""/>
			</parameters>
			<body><![CDATA[
SELECT
    [RepositoryMovementId],
    [ItemId],
    [FromRepositoryId],
    [ToRepositoryId],
    [FromRepositoryManagerId],
    [ToRepositoryManagerId],
    [StranferUserId],
    [ReceiverUserId],
    [UnitPrice],
    [TotalQuantity],
    [TotalAmount],
    [Status],
    [IsActive],
    [IsApprove],
    [DeliveryDate],
    [ReceivedDate],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
FROM
    dbo.[ItemMovement]
WHERE
    [RepositoryMovementId] = @RepositoryMovementId
Select @@ROWCOUNT
					
]]></body>
			
		</procedure>
		<procedure owner="dbo" name="ItemMovement_Find" grant="">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Finds records in the ItemMovement table passing nullable parameters
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters>
				<parameter name="@SearchUsingOR" type="bit" direction="Input" size="0" precision="1" scale="0" param="" nulldefault="null"/>
                <parameter name="@RepositoryMovementId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@ItemId" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault="null"/>
                <parameter name="@FromRepositoryId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@ToRepositoryId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@FromRepositoryManagerId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@ToRepositoryManagerId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@StranferUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@ReceiverUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@UnitPrice" type="money" direction="Input" size="8" precision="19" scale="4" param="" nulldefault="null"/>
                <parameter name="@TotalQuantity" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault="null"/>
                <parameter name="@TotalAmount" type="money" direction="Input" size="8" precision="19" scale="4" param="" nulldefault="null"/>
                <parameter name="@Status" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@IsActive" type="bigint" direction="Input" size="8" precision="19" scale="0" param="" nulldefault="null"/>
                <parameter name="@IsApprove" type="bit" direction="Input" size="1" precision="1" scale="0" param="" nulldefault="null"/>
                <parameter name="@DeliveryDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault="null"/>
                <parameter name="@ReceivedDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault="null"/>
                <parameter name="@CreationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault="null"/>
                <parameter name="@CreationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
                <parameter name="@LastModificationDate" type="datetime" direction="Input" size="8" precision="23" scale="3" param="" nulldefault="null"/>
                <parameter name="@LastModificationUserId" type="int" direction="Input" size="4" precision="10" scale="0" param="" nulldefault="null"/>
			</parameters>
			<body><![CDATA[

IF ISNULL(@SearchUsingOR, 0) <> 1
BEGIN
    SELECT
        [RepositoryMovementId], 
        [ItemId], 
        [FromRepositoryId], 
        [ToRepositoryId], 
        [FromRepositoryManagerId], 
        [ToRepositoryManagerId], 
        [StranferUserId], 
        [ReceiverUserId], 
        [UnitPrice], 
        [TotalQuantity], 
        [TotalAmount], 
        [Status], 
        [IsActive], 
        [IsApprove], 
        [DeliveryDate], 
        [ReceivedDate], 
        [CreationDate], 
        [CreationUserId], 
        [LastModificationDate], 
        [LastModificationUserId]
    FROM
        dbo.[ItemMovement]
    WHERE 
     ([RepositoryMovementId] = @RepositoryMovementId OR @RepositoryMovementId is null)
    AND ([ItemId] = @ItemId OR @ItemId is null)
    AND ([FromRepositoryId] = @FromRepositoryId OR @FromRepositoryId is null)
    AND ([ToRepositoryId] = @ToRepositoryId OR @ToRepositoryId is null)
    AND ([FromRepositoryManagerId] = @FromRepositoryManagerId OR @FromRepositoryManagerId is null)
    AND ([ToRepositoryManagerId] = @ToRepositoryManagerId OR @ToRepositoryManagerId is null)
    AND ([StranferUserId] = @StranferUserId OR @StranferUserId is null)
    AND ([ReceiverUserId] = @ReceiverUserId OR @ReceiverUserId is null)
    AND ([UnitPrice] = @UnitPrice OR @UnitPrice is null)
    AND ([TotalQuantity] = @TotalQuantity OR @TotalQuantity is null)
    AND ([TotalAmount] = @TotalAmount OR @TotalAmount is null)
    AND ([Status] = @Status OR @Status is null)
    AND ([IsActive] = @IsActive OR @IsActive is null)
    AND ([IsApprove] = @IsApprove OR @IsApprove is null)
    AND ([DeliveryDate] = @DeliveryDate OR @DeliveryDate is null)
    AND ([ReceivedDate] = @ReceivedDate OR @ReceivedDate is null)
    AND ([CreationDate] = @CreationDate OR @CreationDate is null)
    AND ([CreationUserId] = @CreationUserId OR @CreationUserId is null)
    AND ([LastModificationDate] = @LastModificationDate OR @LastModificationDate is null)
    AND ([LastModificationUserId] = @LastModificationUserId OR @LastModificationUserId is null)
END
ELSE
    BEGIN
        SELECT
            [RepositoryMovementId], 
            [ItemId], 
            [FromRepositoryId], 
            [ToRepositoryId], 
            [FromRepositoryManagerId], 
            [ToRepositoryManagerId], 
            [StranferUserId], 
            [ReceiverUserId], 
            [UnitPrice], 
            [TotalQuantity], 
            [TotalAmount], 
            [Status], 
            [IsActive], 
            [IsApprove], 
            [DeliveryDate], 
            [ReceivedDate], 
            [CreationDate], 
            [CreationUserId], 
            [LastModificationDate], 
            [LastModificationUserId]
        FROM
            dbo.[ItemMovement]
        WHERE
     ([RepositoryMovementId] = @RepositoryMovementId AND @RepositoryMovementId is not null)
    OR ([ItemId] = @ItemId AND @ItemId is not null)
    OR ([FromRepositoryId] = @FromRepositoryId AND @FromRepositoryId is not null)
    OR ([ToRepositoryId] = @ToRepositoryId AND @ToRepositoryId is not null)
    OR ([FromRepositoryManagerId] = @FromRepositoryManagerId AND @FromRepositoryManagerId is not null)
    OR ([ToRepositoryManagerId] = @ToRepositoryManagerId AND @ToRepositoryManagerId is not null)
    OR ([StranferUserId] = @StranferUserId AND @StranferUserId is not null)
    OR ([ReceiverUserId] = @ReceiverUserId AND @ReceiverUserId is not null)
    OR ([UnitPrice] = @UnitPrice AND @UnitPrice is not null)
    OR ([TotalQuantity] = @TotalQuantity AND @TotalQuantity is not null)
    OR ([TotalAmount] = @TotalAmount AND @TotalAmount is not null)
    OR ([Status] = @Status AND @Status is not null)
    OR ([IsActive] = @IsActive AND @IsActive is not null)
    OR ([IsApprove] = @IsApprove AND @IsApprove is not null)
    OR ([DeliveryDate] = @DeliveryDate AND @DeliveryDate is not null)
    OR ([ReceivedDate] = @ReceivedDate AND @ReceivedDate is not null)
    OR ([CreationDate] = @CreationDate AND @CreationDate is not null)
    OR ([CreationUserId] = @CreationUserId AND @CreationUserId is not null)
    OR ([LastModificationDate] = @LastModificationDate AND @LastModificationDate is not null)
    OR ([LastModificationUserId] = @LastModificationUserId AND @LastModificationUserId is not null)
        Select @@ROWCOUNT			
    END
	]]></body>
		</procedure>

		
		<procedure owner="dbo" name="ItemMovement_Find_Dynamic" grant="" skip="true">
			<comment><![CDATA[/*
----------------------------------------------------------------------------------------------------
-- Date Created: Thursday, November 18, 2010

-- Created By:  ()
-- Purpose: Gets records from the ItemMovement table using a dynamically generated query.
----------------------------------------------------------------------------------------------------
*/
]]></comment>
			<parameters/>
			<body><![CDATA[

BEGIN
				
with PageIndex as (
	select top {3} row_number() over (order by {1}) as RowIndex
	, [RepositoryMovementId]
	, [ItemId]
	, [FromRepositoryId]
	, [ToRepositoryId]
	, [FromRepositoryManagerId]
	, [ToRepositoryManagerId]
	, [StranferUserId]
	, [ReceiverUserId]
	, [UnitPrice]
	, [TotalQuantity]
	, [TotalAmount]
	, [Status]
	, [IsActive]
	, [IsApprove]
	, [DeliveryDate]
	, [ReceivedDate]
	, [CreationDate]
	, [CreationUserId]
	, [LastModificationDate]
	, [LastModificationUserId]
	from dbo.[ItemMovement] {0}
	)
select
    [RepositoryMovementId],
    [ItemId],
    [FromRepositoryId],
    [ToRepositoryId],
    [FromRepositoryManagerId],
    [ToRepositoryManagerId],
    [StranferUserId],
    [ReceiverUserId],
    [UnitPrice],
    [TotalQuantity],
    [TotalAmount],
    [Status],
    [IsActive],
    [IsApprove],
    [DeliveryDate],
    [ReceivedDate],
    [CreationDate],
    [CreationUserId],
    [LastModificationDate],
    [LastModificationUserId]
from PageIndex
where RowIndex > {2}
and RowIndex <= {3};
				

				-- get total count
				select count(*) as TotalRowCount from dbo.[ItemMovement] {0};
			
				END
			]]></body>
		</procedure>
		
</procedures>
</root>
